(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{2016:function(e,t,a){var n=a(1259);e.exports=function(e,t){for(var a=-1,r=e.length;++a<r&&n(t,e[a],0)>-1;);return a}},2221:function(e,t){e.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},2223:function(e,t,a){var n=a(325),r=a(384),o=a(2016),i=a(317),c=a(122),l=/^\s+/;e.exports=function(e,t,a){if((e=c(e))&&(a||void 0===t))return e.replace(l,"");if(!e||!(t=n(t)))return e;var s=i(e),u=o(s,i(t));return r(s,u).join("")}},2568:function(e,t,a){"use strict";a.r(t),function(e){var n=a(16),r=a.n(n),o=a(20),i=a.n(o),c=a(34),l=a.n(c),s=a(10),u=a.n(s),d=a(11),m=a.n(d),p=a(7),b=a.n(p),g=a(12),f=a.n(g),h=a(13),v=a.n(h),y=a(8),O=a.n(y),E=a(5),j=a.n(E),_=a(4),C=a.n(_),I=a(99),N=a.n(I),k=a(1),S=a.n(k),w=a(65),A=a.n(w),F=a(0),M=a.n(F),R=a(18),T=a(166),x=a(14),L=a(94),P=a(82),D=a(3972),U=a(3412),V=a(129),B=a(3413),z=a(3040),q=a(2774),H=a(3977),W=a(3983),G=a(3974),K=a(3426),J=a(3973),Q=a(3984),Z=a(3436),X=a(3437),$=a(1997),Y=a(409),ee=a(2600),te=a(140),ae=a(296),ne=a(52),re=a(243),oe=a(17),ie=a(63),ce=a(167),le=a(232),se=a(90),ue=a(3);function de(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=O()(e);if(t){var r=O()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return v()(this,a)}}var me=function(t){f()(n,t);var a=de(n);function n(){var e;u()(this,n);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return e=a.call.apply(a,[this].concat(r)),j()(b()(e),"triggerLoad",(function(t){var a,n=e.props,r=n.isAdd,o=n.loaded,i=n.loading,c=n.error,l=n.siteError,s=n.hasBody,u=n.contentType,d=n.site,m=n.siteIsLoaded,p=n.siteIsLoading,b=n.load,g=n.loadSite,f=n.match.params,h=f.contentId,v=f.siteId,y=f.versionId,O=f.contentType;t&&(a=t.match.params.versionId),(r||i||o&&s||c)&&y===a||b(h,u||O,y,y!==a),"blog_post"===u||p||d&&m||l||g(v)})),j()(b()(e),"handleApprove",l()(i.a.mark((function t(){var a,n,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.content.get("status"),n=e.props.content.get("firstPublishedAt"),t.next=4,e.props.approve();case 4:return r=t.sent,e.props.hasPromotionActions&&Object(le.j)(r,a,n)&&e.props.history.push("?openPromoteModal"),t.abrupt("return",!0);case 7:case"end":return t.stop()}}),t)})))),j()(b()(e),"isPrivateSite404",(function(){return"404"===e.props.error&&e.props.site&&!e.props.canAccessSite})),j()(b()(e),"checkForModalLaunchRequests",(function(){if(e.props.loaded){var t=A.a.parse((e.props.location.search||"").substr(1));[{queryKey:"openContentAnalytics",modalName:ne.z,tabName:"analytics"},{queryKey:"openModerationHistory",modalName:ne.z,tabName:"moderationHistory"},{queryKey:"openUsefulHistory",modalName:ne.z,tabName:"usefulContentHistory"},{queryKey:"openPromoteModal",modalName:ne.E},{queryKey:"openSendEventUpdatedNotification",modalName:ne.y}].forEach((function(a){var n=a.tabName,r=a.queryKey,o=a.modalName;if(void 0!==t[r]){var i="openUsefulHistory"===r&&e.props.content.getIn(["authoredBy","peopleId"])===e.props.currentUser.get("peopleId");!e.props.content||e.props.content.get("canEdit")||i?setTimeout((function(){e.props.openModal(o,n)})):e.props.addFlash("danger",Object(ue.a)("common.no_longer_accessible")),delete t[r],e.props.history.replace(Object(se.f)({query:t}))}}))}})),e}return m()(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.history,a=e.site;this.triggerLoad(),this.checkForModalLaunchRequests(),this.isPrivateSite404()&&t.replace("/site/".concat(a.get("siteId")))}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.history,n=t.site;this.triggerLoad(e),this.checkForModalLaunchRequests(),this.isPrivateSite404()&&a.replace("/site/".concat(n.get("siteId")))}},{key:"render",value:function(){var t=this.props,a=t.isAdd,n=t.isEdit,o=t.content,i=t.site,c=t.currentUser,l=t.loaded,s=t.error,u=t.toListingPage,d=t.showFeed,m=t.viewport,p=t.canViewUsefulHistory,b=t.canViewModerationHistory,g=t.canMakeMustRead,f=t.isContentAnalyticsEnabled,h=t.location,v=t.showValidationBox,y=t.isAutoGovernanceEnabled,O=t.feedMode,E=t.match.params.versionId,j=o.getIn(["rsvp","attendingCount"]),_=a||n,C=this.props.contentType||(a?this.props.match.params.contentType:o.get("type")),I="blog_post"===C,k=i&&!i.get("isManager")&&i.get("isPrivate")&&i.get("isBroadcast")||O!==ae.d.TIMELINE_COMMENT_POST;if("404"===s)return this.isPrivateSite404()?M.a.createElement(V.a,null):M.a.createElement(Y.a,null);if(!a&&!l||"blog_post"!==C&&!i)return M.a.createElement(V.a,null);if(n&&!o.get("canEdit"))return M.a.createElement($.a,null);if(a&&!I&&i&&!i.get("canCreate".concat(N()(C))))return M.a.createElement($.a,null);if(o.get("isDeleted"))return M.a.createElement("div",{className:"row"},M.a.createElement("div",{className:"column"},M.a.createElement("div",{className:"Page"},M.a.createElement("div",{className:"u-textCenter u-pad--large"},M.a.createElement("p",null,Object(ue.a)("content.delete.now_deleted"))))));var S={detail:{page:Z.a,blog_post:Z.a,event:J.a,album:H.a},addEdit:{page:X.a,blog_post:X.a,event:Q.a,album:W.a}},w=o.get("isPublished"),A=a?this.props.match.params.siteId:o.getIn(["site","id"]),F=a?this.props.currentUser.get("id"):o.getIn(["authoredBy","id"]),R=o.get("id"),T=S[_?"addEdit":"detail"][C],x="blog_post"===C?"/people/".concat(F,"/blog"):"/site/".concat(A,"/").concat(C),L="".concat(x,"/add"),P=a?null:"".concat(x,"/").concat(R).concat(E?"/history/".concat(E):""),te=a?null:"".concat(x,"/").concat(R).concat(E?"/history/".concat(E):"","/edit"),re=c.getIn(["permissions","isAppManager"]),oe=c.get("peopleId")===o.getIn(["authoredBy","peopleId"]),ie=i&&(i.get("isManager")||i.get("isOwner")||re),ce=i&&i.get("isContentManager"),le=("published"===o.get("status")||"draft"===o.get("status"))&&(I?re:ie||ce),se=c.getIn(["permissions","canAccessAllPrivateSites"]),de=c.getIn(["permissions","isUnlistedAdmin"])||!1,me=I?oe||re:i.get("isContentManager")||i.get("isManager")||i.get("isOwner")||re&&(i.get("isPublic")||se)||"unlisted"===i.get("access")&&de,pe=me&&!_&&"pending"===o.get("status"),be=!I&&(re||oe||ie||ce),ge=o.get("canEdit"),fe=i&&!0===i.get("isBroadcast");if(a&&this.props.location.pathname!==L)return window.reactRouterHistory.replace("".concat(L).concat(this.props.location.search)),null;if(n&&this.props.location.pathname!==te)return window.reactRouterHistory.replace("".concat(te).concat(this.props.location.search)),null;if(!_&&!this.props.location.pathname.startsWith(P))return window.reactRouterHistory.replace("".concat(P).concat(this.props.location.search)),null;if(!T)return null;var he=i&&i.get("isPrivate")&&!i.get("isMember"),ve=w&&(!fe||fe&&i.get("isManager"))&&!he,ye=!ve&&(fe?Object(ue.a)("feed.error.posts_available_to_site_managers"):Object(ue.a)("feed.error.posts_available_on_content"))||"";!ve&&he&&(ye=Object(ue.a)("feed.error.posts_available_to_site_members"));var Oe={contentId:R,content:o,contentUrl:e.Simpplr.Settings.contentUrl,siteId:A,site:i,contentType:C,isBlog:I,isAddEdit:_,isAdd:a,isEdit:n,isAppManager:re,baseUrl:x,addUrl:L,viewUrl:P,editUrl:te,toListingPage:u,showFeed:d,canChangeAuthor:le,canManage:me,isSiteContentManager:ce,viewport:m,canPost:ve,cannotPostMessage:ye,currentUser:c,location:h,canShare:!k,openModal:this.props.openModal,showFeedOptions:this.props.isFeedEnabled&&O!==ae.d.TIMELINE,markAsRead:this.props.markAsRead,isAutoGovernanceEnabled:y,translateContentLanguage:this.props.translateContentLanguage,setContentLanguageToOriginal:this.props.setContentLanguageToOriginal,isNativeVideoEnabled:this.props.isNativeVideoEnabled},Ee=_?K.a:G.a;return M.a.createElement(M.a.Fragment,null,v&&!_&&M.a.createElement("div",{className:"row"},M.a.createElement("div",{className:"column"},M.a.createElement(U.a,{content:o}))),M.a.createElement("div",{className:"row"},M.a.createElement("div",{className:"column"},M.a.createElement("div",{className:"Page"},M.a.createElement(D.a,{hasModerationOptions:pe,hasVersionHistoryOption:be,isOlderVersion:!!E,versionId:E,onApprove:this.handleApprove,canEdit:ge,canManage:me,editUrl:te,content:this.props.content,user:o.get("authoredBy")||this.props.currentUser,isAdd:a,isEdit:n,contentType:C,openModal:this.props.openModal,siteName:i&&i.get("name")||null,siteAccess:i&&i.get("access"),siteUrl:i&&i.get("url"),profileName:!i&&o.getIn(["authoredBy","name"])}),M.a.createElement(Ee,r()({component:T},Oe)),_&&M.a.createElement(ee.a,null),M.a.createElement(z.a,{contentTitle:o.get("title"),contentMustReadDetails:o.get("mustReadDetails"),contentType:C,contentStatus:o.get("status"),name:ne.z,contentId:R,canViewUsefulHistory:p,canViewModerationHistory:b,hasVersionHistoryOption:be,canMakeMustRead:g,isContentAnalyticsEnabled:f,createdAt:o.get("createdAt"),firstPublishedAt:o.get("firstPublishedAt"),recentViewCount:o.get("recentViewCount"),updateUrl:te,siteId:A,lastMovedAt:o.get("lastMovedAt")}),R&&M.a.createElement(q.b,{contentId:R}),j>0&&M.a.createElement(B.a,{contentId:R})))))}}]),n}(M.a.Component);j()(me,"propTypes",{isAdd:S.a.bool,isEdit:S.a.bool,hasBody:S.a.bool,hasPromotionActions:S.a.bool,toListingPage:S.a.string,translateContentLanguage:S.a.func,setContentLanguageToOriginal:S.a.func}),j()(me,"defaultProps",{isAdd:!1,isEdit:!1,hasBody:!1}),t.default=Object(R.connect)((function(e,t){var a,n=t.match.params,r=n.contentId,o=n.siteId,i=Object(re.o)(e,r)||new C.a.Map,c=i.get("result")||new C.a.Map,l="blog_post"===t.contentType,s=Object(ie.n)(e,o),u=s&&s.get("result"),d=l||u&&u.get("isContentFeedEnabled"),m=Object(oe.i)(e),p=c.get("isFeedEnabled")&&m!==ae.d.TIMELINE||!1,b=Object(oe.v)(e,"feedEnabled")&&Object(oe.v)(e,"feedOnContentEnabled")&&d;if(!c.isEmpty())if(u)a="/site/".concat(u.get("siteId"),"/content?type=").concat(c.get("type"));else{var g=c.getIn(["authoredBy","peopleId"]);a="/people/".concat(g,"/blogposts")}var f=!c.isEmpty()&&Object(re.e)(e,c)&&!Object(re.x)(e,c);return{loaded:i.get("loaded")&&i.get("isFullModel")||!1,loading:i.get("loading")||!1,isFullModel:i.get("isFullModel")||!1,hasBody:i.get("hasBody")||!1,error:i.get("error")||null,content:c,isBlog:l,site:u,siteIsLoaded:s&&s.get("loaded")&&s.get("isFullModel"),siteIsLoading:s&&s.get("loading"),siteError:s&&s.get("error"),canAccessSite:u&&Object(ie.a)(e,u),currentUser:e.get("currentUser"),isFeedEnabled:b,showFeed:b&&p,toListingPage:a,viewport:Object(ce.a)(e),canViewUsefulHistory:Object(re.g)(c),canViewModerationHistory:Object(re.f)(e,c),canMakeMustRead:c.get("canMakeMustRead"),isContentAnalyticsEnabled:Object(oe.C)(e,"externalAnalytics"),showValidationBox:f,hasPromotionActions:Object(re.u)(e,c),isAutoGovernanceEnabled:Object(oe.E)(e),feedMode:m,isNativeVideoEnabled:Object(oe.C)(e,te.e)}}),(function(e,t){return{load:function(t,a,n,r){return e(Object(T.t)(t,{contentType:a,versionId:n,areDifferentVersions:r}))},loadSite:function(t){return e(Object(P.load)(t))},markAsRead:function(){return e(Object(T.w)(t.match.params.contentId))},approve:function(){return e(Object(T.b)(t.match.params.contentId))},translateContentLanguage:function(){return e(Object(T.R)(t.match.params.contentId))},setContentLanguageToOriginal:function(){return e(Object(T.M)(t.match.params.contentId))},openModal:function(a){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e(Object(L.open)(a,t.match.params.contentId,n||null))},addFlash:function(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return e(x.a.apply(void 0,[null].concat(a)))}}}))(me)}.call(this,a(27))},2590:function(e,t,a){"use strict";a.d(t,"a",(function(){return y})),a.d(t,"b",(function(){return O}));var n=a(20),r=a.n(n),o=a(5),i=a.n(o),c=a(34),l=a.n(c),s=a(480),u=a.n(s),d=a(1),m=a.n(d),p=a(0),b=a.n(p),g=(a(141),a(1012)),f=a(1252);function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(Object(a),!0).forEach((function(t){i()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function y(e){var t=e.endpoint,a=e.defaultParams,n=e.valueField,o=e.labelField,i=e.itemFactory,c=e.excluded,s=void 0===c?[]:c,u=e.getItemsFromResponse,d=void 0===u?function(e){return e.result.listOfItems}:u;return function(){var e=l()(r.a.mark((function e(c){var l,u;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=c.trim(),e.next=3,Object(f.b)(t,v(v({},a),{},{term:l,size:9999}));case 3:if(u=e.sent){e.next=6;break}return e.abrupt("return",null);case 6:return e.abrupt("return",d(u).filter((function(e){return!s.includes(e[n])})).map((function(e){return{value:e[n],label:e[o],item:i(e)}})));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}function O(e){var t=e.endpoint,a=e.valueField,n=e.labelField,o=e.itemFactory,i=e.getItemFromResponse,c=void 0===i?function(e){return e.result}:i;return function(){var e=l()(r.a.mark((function e(i){var l,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=Array.isArray(i)?i:[i],e.next=3,Promise.all(l.map((function(e){return Object(f.b)(t,e)})));case 3:if(s=e.sent){e.next=6;break}return e.abrupt("return",null);case 6:return e.abrupt("return",s.map(c).filter((function(e){return!!e})).map((function(e){return{value:e[a],label:e[n],item:o(e)}})));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}function E(e){var t=e.load,a=e.loadInitialOptions,n=e.makeOption,r=e.canCreate,o=e.isMulti,i=e.placeholder,c=e.icon,l=e.inputId,s=e.renderOption,d=e.isOptionDisabled,m=e.value,f=e.onChange,h=e.onBlur,v=e.onFocus,y=e.isDisabled,O=e.isValueModel,E=e.createItem,j=e.isValidNewOption,_=e.autoFocus,C=e.isLegacyIcon,I=e.isReduxForm,N=e.hasClearButton,k=e.cacheOptions,S=e.defaultOptions,w=u()(Object(p.useCallback)((function(e,a){t(e).then(a)}),[t]),250);return b.a.createElement(g.a,{loadOptions:w,loadInitialOptions:a,isMulti:o,defaultOptions:S,canCreate:r,makeOption:n,hasClearButton:N,cacheOptions:k,placeholder:i,renderOption:s,inputId:l,icon:c,value:m,onChange:f,onFocus:v,onBlur:h,isDisabled:y,isOptionDisabled:d,isValueModel:O,createItem:E,isValidNewOption:j,autoFocus:_,isLegacyIcon:C,isReduxForm:I})}E.propTypes={load:m.a.func.isRequired,makeOption:m.a.func.isRequired,canCreate:m.a.bool,isMulti:m.a.bool,isValueModel:m.a.bool,cacheOptions:m.a.bool,isDisabled:m.a.bool,isOptionDisabled:m.a.func,placeholder:m.a.string,icon:m.a.string,value:m.a.oneOfType([m.a.string,m.a.shape({}),m.a.arrayOf(m.a.string),m.a.arrayOf(m.a.shape({}))]),onChange:m.a.func,onBlur:m.a.func,onFocus:m.a.func,inputId:m.a.string,isValidNewOption:m.a.func,autoFocus:m.a.bool,isLegacyIcon:m.a.bool,isReduxForm:m.a.bool,hasClearButton:m.a.bool},E.defaultProps={canCreate:!1,isMulti:!1,icon:"search",isLegacyIcon:!1,isReduxForm:!1,hasClearButton:!1,cacheOptions:!0},t.c=E},2591:function(e,t,a){"use strict";var n=a(16),r=a.n(n),o=a(5),i=a.n(o),c=a(71),l=a.n(c),s=a(1),u=a.n(s),d=a(0),m=a.n(d),p=a(123),b=a(380);function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),!0).forEach((function(t){i()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function h(e){e.icon;var t=l()(e,["icon"]),a=t.id,n=t.pickerComponent,o=t.input,i=t.placeholder,c=t.isMulti,s=t.defaultParams,u=(t.isStaticLabel,t.isValueModel),d=t.isDisabled,g=t.valueField,h=t.isOptionDisabled,v=t.canCreate,y=t.excluded,O=t.autoFocus,E=t.renderOption,j=t.makeOption,_=t.meta,C=t.hasClearButton,I=t.cacheOptions,N=t.isLegacyIcon,k=t.defaultOptions,S="".concat(Object(p.a)(a,o),"_input");return m.a.createElement(b.a,r()({inputType:"reactSelect",id:S},t),m.a.createElement(n,{isMulti:c,placeholder:i,isValueModel:u,input:f({},o),meta:_,valueField:g,renderOption:E,makeOption:j,inputId:S,cacheOptions:I,isDisabled:d,isOptionDisabled:h,defaultParams:s,excluded:y,canCreate:v,autoFocus:O,hasClearButton:C,isLegacyIcon:N,defaultOptions:k}))}h.propTypes={pickerComponent:u.a.elementType.isRequired,isValueModel:u.a.bool,canCreate:u.a.bool,autoFocus:u.a.bool,meta:u.a.shape({}),hasClearButton:u.a.bool,isStaticLabel:u.a.bool,cacheOptions:u.a.bool,renderOption:u.a.func,isOptionDisabled:u.a.func,defaultOptions:u.a.bool},h.defaultProps={autoFocus:!1,hasClearButton:!1,isStaticLabel:!0,cacheOptions:!0,defaultOptions:!1},t.a=h},2598:function(e,t,a){"use strict";var n=a(16),r=a.n(n),o=a(65),i=a.n(o),c=a(0),l=a.n(c);t.a=function(e){return function(t){if(!t.location)return l.a.createElement(e,t);var a=t.location,n=a.search.substr(1);return a.query=i.a.parse(n),l.a.createElement(e,r()({},t,{location:a}))}}},2623:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(16),r=a.n(n),o=a(0),i=a.n(o),c=a(2651),l=a(2591);function s(e){return i.a.createElement(l.a,r()({},e,{pickerComponent:c.a}))}},2637:function(e,t,a){"use strict";var n=a(5),r=a.n(n),o=a(15),i=a.n(o),c=a(1),l=a.n(c),s=a(0),u=a.n(s);function d(e){var t=e.children,a=e.emblem,n=e.size,o=i()(r()({Meta:!0},"Meta--".concat(n),n));return u.a.createElement("div",{className:o},u.a.createElement("div",{className:"Meta-thumb"},a),u.a.createElement("div",{className:"Meta-body"},t))}d.propTypes={children:l.a.node,emblem:l.a.node,size:l.a.oneOf(["xlarge","large","medium","small"])},d.defaultProps={size:"large"},t.a=d},2651:function(e,t,a){"use strict";(function(e){var n=a(1),r=a.n(n),o=a(0),i=a.n(o),c=a(661),l=a(35),s=a(2590);function u(t){var a=t.isMulti,n=t.isValueModel,r=t.placeholder,o=t.icon,c=t.inputId,u=t.valueField,d=t.input,m=void 0===d?{}:d,p=t.defaultParams,b=t.excluded,g=void 0===b?[]:b,f=t.isDisabled,h=t.hasClearButton,v=t.makeOption,y=t.renderOption,O=t.isOptionDisabled,E=t.load,j=t.loadInitialOptions,_=t.cacheOptions,C=t.isLegacyIcon,I=E||Object(s.a)({endpoint:e.Simpplr.Salesforce.User.search,defaultParams:p,valueField:u,labelField:"name",itemFactory:l.e,excluded:g}),N=j||Object(s.b)({endpoint:e.Simpplr.Salesforce.User.get,valueField:u,labelField:"name",itemFactory:l.e});return i.a.createElement(s.c,{isMulti:a,isValueModel:n,hasClearButton:h,placeholder:r,icon:o,isLegacyIcon:C,inputId:c,load:I,loadInitialOptions:N,makeOption:v,renderOption:y,isOptionDisabled:O,value:m.value,onChange:m.onChange,onBlur:m.onBlur,onFocus:m.onFocus,cacheOptions:_,isDisabled:f})}u.propTypes={isMulti:r.a.bool,isValueModel:r.a.bool,hasClearButton:r.a.bool,placeholder:r.a.string,icon:r.a.string,valueField:r.a.string,cacheOptions:r.a.bool,defaultParams:r.a.shape({}),makeOption:r.a.func,renderOption:r.a.func,isOptionDisabled:r.a.func},u.defaultProps={isMulti:!1,icon:"search",defaultParams:{},valueField:"peopleId",cacheOptions:!0,makeOption:function(e){return{value:e.peopleId,label:e.name,item:e}},renderOption:function(e){var t=e.data.item;return i.a.createElement(c.a,{user:t})}},t.a=u}).call(this,a(27))},2666:function(e,t,a){"use strict";var n=a(4),r=a.n(n),o=a(1),i=a.n(o),c=a(0),l=a.n(c),s=a(568),u=a(55),d=a(192),m=a(128),p=a(2637),b=a(1131),g=a(499),f=a(3);function h(e){var t=e.content,a=e.showDate,n=e.showLastValidated,r=e.hideFollow,o=e.onFilesClick,i=e.size,c=t.get("authoredBy"),h=l.a.createElement(b.a,{peopleId:c.get("peopleId")});return l.a.createElement("div",{className:"u-cf"},o&&t.get("files").size>0&&l.a.createElement("div",{className:"u-floatRight u-sm-hide"},l.a.createElement(u.a,{icon:"attachment",onClick:o,size:"large",color:"inherit"},l.a.createElement("span",{className:"type--500"},[t.get("files").size,Object(f.a)("common.file",{count:t.get("files").size}).toLowerCase(),Object(f.a)("content.attached_small")].join(" ")))),l.a.createElement(p.a,{emblem:h,size:i},l.a.createElement(d.a,{isStacked:!a,hasNoBottom:a},l.a.createElement(m.a,null,l.a.createElement("a",{className:"type--b1 type--title",href:c.get("url"),tabIndex:"-1"},c.get("name")),!r&&c.get("canFollow")&&l.a.createElement("div",{className:"u-marg-l--small u-inlineBlock"},l.a.createElement(g.a,{size:"micro",sfUserId:c.get("sfUserId"),isFollowing:c.get("isFollowing")})))),a&&l.a.createElement("div",{className:"type--b3"},l.a.createElement(s.a,{publishAt:t.get("publishAt"),createdAt:t.get("createdAt"),modifiedAt:t.get("modifiedAt"),lastValidatedAt:n?t.get("lastValidatedAt"):void 0,isLowercase:!0,showModified:!0,showFull:!0,publishedStatus:t.get("status"),hideStatusForUnpublishedContent:!0}))))}h.propTypes={content:i.a.instanceOf(r.a.Map).isRequired,showDate:i.a.bool,showLastValidated:i.a.bool,hideFollow:i.a.bool,onFilesClick:i.a.func,size:i.a.oneOf(["large","medium","small"])},h.defaultProps={showDate:!0,hideFollow:!1,showLastValidated:!1,size:"large"},t.a=h},2667:function(e,t,a){"use strict";var n=a(5),r=a.n(n),o=a(10),i=a.n(o),c=a(11),l=a.n(c),s=a(12),u=a.n(s),d=a(13),m=a.n(d),p=a(8),b=a.n(p),g=a(15),f=a.n(g),h=a(4),v=a.n(h),y=a(1),O=a.n(y),E=a(0),j=a.n(E),_=a(70),C=a(129),I=a(2668);function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=b()(e);if(t){var r=b()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return m()(this,a)}}var k=function(e){u()(a,e);var t=N(a);function a(){return i()(this,a),t.apply(this,arguments)}return l()(a,[{key:"shouldComponentUpdate",value:function(e){return!v.a.is(this.props.users,e.users)||this.props.isLoading!==e.isLoading||this.props.total!==e.total}},{key:"render",value:function(){var e,t=this.props,a=t.users,n=t.isLoading,o=t.total,i=t.onExpand,c=t.isHoneycomb,l=t.rows,s=t.perRow,u=t.isOverlapping,d=t.isOnWashBg,m=l*s,p=o||a.size,b=(m&&p>m?a.take(m-1):a).filter((function(e){return!!e})),g=p>b.size,h=i?function(e){e.preventDefault(),i()}:null,y=i?"a":"span";if(0===a.size)return n?j.a.createElement("div",{className:"Tile-loaderContainer"},j.a.createElement(C.a,null)):j.a.createElement(_.a,null);var O=f()((e={"UserAvatarList-inner":u},r()(e,"u-blockList-".concat(s),!u),r()(e,"u-blockList",!u),r()(e,"u-blockList--small",!u),e)),E=f()({UserAvatarList:!0,"u-cf":!0,"UserAvatarList--honeycomb":c}),N=f()({"UserAvatarList-item":u,"UserAvatarList-item--noBorder":u}),k=new v.a.Range(0,b.count(),s).map((function(e){return b.slice(e,e+s)})),S=u?"reverse":"push";return j.a.createElement("div",{className:E},k.map((function(e,t){return j.a.createElement("ul",{className:O,key:t},e.map((function(e){return j.a.createElement(I.a,{isOnWashBg:d,isOverlapping:u,user:e,key:e.get("id")})})).push(k.size===t+1&&g&&j.a.createElement("li",{className:N,key:"plus"},j.a.createElement("div",{className:"PlusCircle"},j.a.createElement(y,{href:"",onClick:h},"+",p-b.size))))[S](!1))})))}}]),a}(j.a.Component);k.propTypes={users:O.a.instanceOf(v.a.List),isLoading:O.a.bool,perRow:O.a.number,total:O.a.number,onExpand:O.a.func,isHoneycomb:O.a.bool,isOverlapping:O.a.bool,isOnWashBg:O.a.bool},k.defaultProps={perRow:7,isHoneycomb:!1,isOverlapping:!1,isOnWashBg:!1},t.a=k},2668:function(e,t,a){"use strict";var n=a(15),r=a.n(n),o=a(1),i=a.n(o),c=a(0),l=a.n(c),s=a(1022),u=a(35);function d(e){var t=e.user,a=e.popoverTitle,n=e.isOverlapping,o=e.isOnWashBg,i=r()({"UserAvatarList-item":n,"UserAvatarList-item--washBg":o});return l.a.createElement("li",{className:i},l.a.createElement(s.a,{user:t,showTitle:!1,popoverTitle:a}))}d.propTypes={user:i.a.instanceOf(u.b),isOverlapping:i.a.bool,isOnWashBg:i.a.bool},d.defaultProps={isOverlapping:!1,isOnWashBg:!1},t.a=d},2681:function(e,t,a){"use strict";var n=a(16),r=a.n(n),o=a(15),i=a.n(o),c=a(1),l=a.n(c),s=a(0),u=a.n(s),d=a(21),m=a(123),p=a(759);var b=function(e){return u.a.createElement(p.a,r()({},e,{type:"checkbox"}))};function g(e){var t=e.label,a=e.icon,n=e.hasBorder,o=e.isHorizontal,c=e.note,l=e.isDisabled,s=e.isVisuallyDisabled,p=e.hasLegacyIcon,g=e.hasLargeIcon,f=e.hasDarkIcon,h=Object(m.a)(e.id,e.input),v=i()({IconToggle:!0,"is-disabled":l&&s,"IconToggle--hasBorder":n,"IconToggle--horizontal":o,"IconToggle--hasNote":c,"IconToggle--large":g,"IconToggle--darkIcon":f});return u.a.createElement("div",{className:v},u.a.createElement(b,r()({},e,{id:h,hasIcon:!0})),u.a.createElement("div",{className:"IconToggle-iconContainer IconToggle-iconContainer--".concat(a)},u.a.createElement(d.a,{isLegacy:p,name:a})),u.a.createElement("label",{htmlFor:h,className:"IconToggle-label"},t),c&&u.a.createElement("span",{className:"IconToggle-note"},c))}g.propTypes={isVisuallyDisabled:l.a.bool,hasLegacyIcon:l.a.bool,hasLargeIcon:l.a.bool},g.defaultProps={isVisuallyDisabled:!0,hasLegacyIcon:!0,hasLargeIcon:!1};t.a=g},2686:function(e,t,a){"use strict";var n=a(15),r=a.n(n),o=a(1),i=a.n(o),c=a(0),l=a.n(c),s=a(21);a(3);function u(e){var t=e.children,a=e.onClick,n=e.hasButton,o=e.ariaLabel,i=r()({RemovableField:n});return l.a.createElement("div",{className:i},t,n&&l.a.createElement("button",{className:"RemovableField-button",type:"button",onClick:a,"aria-label":o},l.a.createElement(s.a,{name:"circle-close",sourceSize:"24"})))}u.propTypes={children:i.a.node.isRequired,onClick:i.a.func,hasButton:i.a.bool,ariaLabel:i.a.string},u.defaultProps={hasButton:!0},t.a=u},2687:function(e,t,a){"use strict";var n=a(15),r=a.n(n),o=a(1),i=a.n(o),c=a(0),l=a.n(c),s=a(21),u=a(3);function d(e){var t=e.label,a=e.icon,n=e.onClick,o=e.size,i=e.isPositionFit,c=e.appearance,d=r()({AddSection:!0,"AddSection--theme":"theme"===c,"AddSection--large":"large"===o,"theme--color":"theme"===c,"u-hidePrint":!0,"u-posFit":i}),m=r()({"u-textNoWrap":!0,"type--b1":"theme"!==c,"type--500":"theme"!==c});return l.a.createElement("button",{type:"button",className:d,onClick:n},l.a.createElement("div",{className:"AddSection-inner"},l.a.createElement("span",{className:"AddSection-iconContainer"},l.a.createElement(s.a,{name:a})),l.a.createElement("span",{className:m},t||Object(u.a)("common.add"))))}d.propTypes={label:i.a.string,icon:i.a.string,onClick:i.a.func,size:i.a.oneOf(["normal","large"]),appearance:i.a.oneOf(["normal","theme"]),isPositionFit:i.a.bool},d.defaultProps={icon:"plus",size:"normal",isPositionFit:!1,appearance:"theme"},t.a=d},2688:function(e,t,a){"use strict";var n=a(10),r=a.n(n),o=a(11),i=a.n(o),c=a(7),l=a.n(c),s=a(12),u=a.n(s),d=a(13),m=a.n(d),p=a(8),b=a.n(p),g=a(5),f=a.n(g),h=a(1),v=a.n(h),y=a(0),O=a.n(y),E=a(18),j=a(1256),_=a(17),C=a(2226),I=a(2022),N=a(1004);function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=b()(e);if(t){var r=b()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return m()(this,a)}}var S=function(e){u()(a,e);var t=k(a);function a(e){var n;return r()(this,a),(n=t.call(this,e)).ref=null,n.applyFormatting=n.applyFormatting.bind(l()(n)),n.setRef=n.setRef.bind(l()(n)),n}return i()(a,[{key:"componentDidMount",value:function(){Object(I.b)(this.props.history.location)}},{key:"componentDidUpdate",value:function(e){e.html!==this.props.html&&this.applyFormatting(this.ref)}},{key:"setRef",value:function(e){!this.ref&&e&&this.applyFormatting(e),this.ref=e}},{key:"applyFormatting",value:function(e){if(e){var t=this.props,a=t.peopleUrl,n=t.sitesUrl,r=t.topicsUrl,o=t.history,i=t.contentType,c={people:a,sites:n,topics:r};Object(C.default)(e,{history:o,contentType:i,mentionsUrlMap:c}),this.props.applyFormatting(e)}}},{key:"render",value:function(){var e=this.props,t=e.html,a=e.escape;return O.a.createElement("div",{ref:this.setRef,className:"Content fr-simpplr-theme fr-simpplr-theme--detail"},O.a.createElement("div",{className:"fr-element",dangerouslySetInnerHTML:{__html:Object(N.a)(t,a)}}))}}]),a}(O.a.PureComponent);f()(S,"propTypes",{html:v.a.string.isRequired,contentType:v.a.string.isRequired,escape:v.a.shape({css:v.a.bool}),applyFormatting:v.a.func}),f()(S,"defaultProps",{escape:{css:!0},applyFormatting:function(){}}),t.a=Object(E.connect)((function(e){return{peopleUrl:Object(_.y)(e,"/people/:peopleId:"),sitesUrl:Object(_.y)(e,"/site/:siteId:"),topicsUrl:Object(_.y)(e,"/topic/:topicId:/content")}}))(Object(j.a)(S))},2689:function(e,t,a){"use strict";var n=a(16),r=a.n(n),o=a(1),i=a.n(o),c=a(0),l=a.n(c),s=a(2782),u=a(380);function d(e){return l.a.createElement(u.a,e,l.a.createElement(s.a,r()({selected:e.input.value},e.input,e,{onChange:function(t){e.input.onChange(t),"function"==typeof e.onChange&&e.onChange(t)},ref:e.selectorRef||null,maxItems:e.maxItems||99})))}d.propTypes={input:i.a.object.isRequired,selectorRef:i.a.oneOfType([i.a.shape({current:i.a.object}),i.a.func])},t.a=d},2690:function(e,t,a){"use strict";a.d(t,"a",(function(){return N}));var n=a(10),r=a.n(n),o=a(11),i=a.n(o),c=a(7),l=a.n(c),s=a(12),u=a.n(s),d=a(13),m=a.n(d),p=a(8),b=a.n(p),g=a(5),f=a.n(g),h=a(15),v=a.n(h),y=a(1),O=a.n(y),E=a(0),j=a.n(E),_=a(1017),C=a(3);function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=b()(e);if(t){var r=b()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return m()(this,a)}}var N=function(e){u()(a,e);var t=I(a);function a(){var e;r()(this,a);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),f()(l()(e),"wrapper",j.a.createRef()),f()(l()(e),"state",{isContentTooSmall:!0}),f()(l()(e),"calculateHeight",(function(){var t=l()(e).wrapper;if(t.current){var a=t.current.offsetHeight;e.setState({isContentTooSmall:a<=e.props.height})}})),e}return i()(a,[{key:"componentDidMount",value:function(){this.calculateHeight()}},{key:"componentDidUpdate",value:function(){this.calculateHeight()}},{key:"render",value:function(){var e=this,t=this.props,a=t.label,n=t.height,r=t.children,o=t.isWashColor,i=t.hasFade,c=this.state.isContentTooSmall,l=v()({RevealMore:!0,"RevealMore--wash":o,"RevealMore--hasFade":i});return j.a.createElement(_.a,null,(function(t,o){var i=t.activate;return j.a.createElement("div",{className:l,style:{height:o||c?"auto":"".concat(n,"px")}},j.a.createElement("div",{ref:e.wrapper},r),!(o||c)&&j.a.createElement("div",{className:"RevealMore-button-container"},j.a.createElement("button",{type:"button",className:"RevealMore-button theme--color",onClick:i},a||Object(C.a)("common.more_lowercase"))))}))}}]),a}(j.a.PureComponent);f()(N,"propTypes",{height:O.a.number.isRequired,label:O.a.string,children:O.a.node,isWashColor:O.a.bool,hasFade:O.a.bool}),f()(N,"defaultProps",{label:"",isWashColor:!1,hasFade:!0})},2715:function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(380),i=a(1023);function c(e){return r.a.createElement(o.a,e,r.a.createElement("div",{className:"has-smallControls u-zIndex--2 u-posRelative"},r.a.createElement(i.a,e)))}c.propTypes={},t.a=c},2716:function(e,t,a){"use strict";(function(e){var n=a(1),r=a.n(n),o=a(0),i=a.n(o),c=a(208),l=a(1006),s=a(117),u=a(2773),d=a(3),m=a(47);function p(t){var a=t.isSlackConnected,n=t.label,r=t.isRequired,o=Object(u.a)(e.Simpplr.Salesforce.Slack.getAvailableChannels,{isSlackConnected:a}),p=o.loading,b=o.loaded,g=o.result,f=Object(c.e)().change,h=g&&g.listOfChannels||[];if(!a)return i.a.createElement(c.a,{name:"channelDisable",component:s.a,validate:m.E,isRequired:r,isDisabled:!0,label:n,placeholder:Object(d.a)("field.slack_channel.placeholder"),hasLabelAbove:!0,hasNoInternalLabel:!0});var v=h.map((function(e){var t=e.channelId,a=e.name,n=e.isPrivate;return{value:t,label:"#".concat(a).concat(n?" (".concat(Object(d.a)("common.private"),")"):"")}}));return b&&0===v.length?i.a.createElement(c.a,{component:s.a,name:"channelUrl",label:Object(d.a)("field.slack_channel.label"),validate:m.E,isRequired:!0,placeholder:Object(d.a)("manage_sites.external_apps.slack_dropdown_placeholder_text"),hasLabelAbove:!0,hasNoInternalLabel:!0,icon:"link",info:Object(d.a)("content.promote_modal.action.slack_input_text")}):i.a.createElement(c.a,{component:l.a,name:"channelId",validate:m.E,isRequired:r,label:n,placeholder:Object(d.a)("field.slack_channel.placeholder"),hasLabelAbove:!0,hasClearButton:!0,options:v,isLoading:p,onChange:function(e){var t=h.find((function(t){return t.channelId===e})),a=t&&t.name;f("channelName",a)}})}p.propTypes={isSlackConnected:r.a.bool,label:r.a.string},p.defaultProps={isSlackConnected:!0},t.a=p}).call(this,a(27))},2717:function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(850),i=a(1001),c=a(192),l=a(128),s=a(2637),u=a(114),d=a(66),m=a(1004);t.a=function(e){var t=e.createdBy,a=e.createdAt,n=e.message;return r.a.createElement(i.a,{type:"positive",hasContentStyles:!1},r.a.createElement(s.a,{emblem:r.a.createElement(u.a,t),size:"small"},r.a.createElement(c.a,{hasNoBottom:!0},r.a.createElement(l.a,null,r.a.createElement("a",{className:"type--b2 type--title",href:t.url,tabIndex:"-1"},t.name))),r.a.createElement("div",{className:"type--b3"},r.a.createElement(o.a,{input:a,type:d.g}))),n&&r.a.createElement("div",{className:"Content Content--small u-marg-t--small",dangerouslySetInnerHTML:{__html:Object(m.a)(n)}}))}},2718:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return p})),a.d(t,"c",(function(){return b}));var n=a(5),r=a.n(n),o=a(71),i=a.n(o),c=a(0),l=a.n(c),s=a(1009);function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),!0).forEach((function(t){r()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var m=l.a.createContext({}),p=function(t){var a=t.children,n=i()(t,["children"]),r=Object(s.a)(d({endpoint:e.Simpplr.Salesforce.Event.getAttending},n));return l.a.createElement(m.Provider,{value:r},a)};function b(){return Object(c.useContext)(m)}t.b=function(t){return Object(s.a)(d({endpoint:e.Simpplr.Salesforce.Event.getAttending},t))}}).call(this,a(27))},2772:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return o}));var n=a(1087);function r(e,t){return{type:n.a,name:e,value:t}}function o(){return function(t){e.Simpplr.Loader.show(),e.Simpplr.Salesforce.Analytics.getInstallStats().done((function(e){var a={activeLicenseCount:parseInt(e.result.activeLicenseCount,10)||0,totalLicenseCount:parseInt(e.result.totalLicenseCount,10)||0};Object.keys(a).map((function(e){return t(r(e,a[e]))}))})).always(e.Simpplr.Loader.hide)}}}).call(this,a(27))},2773:function(e,t,a){"use strict";a.d(t,"a",(function(){return E}));var n=a(5),r=a.n(n),o=a(20),i=a.n(o),c=a(34),l=a.n(c),s=a(24),u=a.n(s),d=a(0),m=a(18),p=a(131),b=a(560),g=a(26),f=a(3);function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(Object(a),!0).forEach((function(t){r()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var y={loaded:!1,loading:!0,result:null,error:!1};function O(e,t){var a=t.type,n=t.result,r=t.error;switch(a){case"load":return{loading:!1,loaded:!0,result:n,error:!1};case"error":return{loading:!1,loaded:!1,result:null,error:r};case"reset":return y;default:throw new Error}}function E(e,t){var a=t.isSlackConnected,n=Object(d.useReducer)(O,y),r=u()(n,2),o=r[0],c=r[1],s=Object(d.useRef)(!0),h=Object(b.b)(),E=Object(m.useDispatch)(),j=Object(d.useCallback)(l()(i.a.mark((function t(){var a,n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e();case 3:if(a=t.sent,s.current){t.next=6;break}return t.abrupt("return",null);case 6:return c({type:"load",result:a.result}),t.abrupt("return",a.result);case 10:if(t.prev=10,t.t0=t.catch(0),s.current){t.next=14;break}return t.abrupt("return",null);case 14:console.log(t.t0),"token_revoked"===(n=Object(g.a)(t.t0))?(h(Object(f.a)("manage_app.slack.token_revoked.warning_flash")),E(Object(p.b)("slackContentShare"))):h(n),c({type:"error",error:n});case 18:return t.abrupt("return",null);case 19:case"end":return t.stop()}}),t,null,[[0,10]])}))),[]);return Object(d.useEffect)((function(){a&&j()}),[]),Object(d.useEffect)((function(){return function(){s.current=!1}}),[]),v(v({},o),{},{reload:j})}},2774:function(e,t,a){"use strict";a.d(t,"a",(function(){return X}));var n=a(20),r=a.n(n),o=a(34),i=a.n(o),c=a(10),l=a.n(c),s=a(11),u=a.n(s),d=a(7),m=a.n(d),p=a(12),b=a.n(p),g=a(13),f=a.n(g),h=a(8),v=a.n(h),y=a(5),O=a.n(y),E=a(615),j=a(4),_=a.n(j),C=a(515),I=a.n(C),N=a(1169),k=a.n(N),S=a(1),w=a.n(S),A=a(0),F=a.n(A),M=a(208),R=a(81),T=a(18),x=a(166),L=a(131),P=a(2715),D=a(55),U=a(2681),V=a(2716),B=a(52),z=a(113),q=a(243),H=a(30),W=a(17),G=a(3),K=a(89),J=a(2915);function Q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=v()(e);if(t){var r=v()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return f()(this,a)}}var X=2e3,$=function(e){b()(a,e);var t=Z(a);function a(){var e;l()(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return e=t.call.apply(t,[this].concat(o)),O()(m()(e),"getAvailableActions",(function(){var t=e.props.actions,a={slack:"slack-outline",homeCarousel:"carousel",siteCarousel:"carousel",notification:"notifications"};return t.map((function(e){return{label:Object(G.a)("content.promote_modal.action.".concat(e)),name:e,icon:a[e]}}))})),O()(m()(e),"onSubmit",function(){var t=i()(r.a.mark((function t(a){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.actions||{},t.next=3,e.props.promote([n.homeCarousel&&"homeCarousel",n.siteCarousel&&"siteCarousel",n.notification&&"notification",n.slack&&"slack"].filter((function(e){return!!e})),a.message,a.channelId,a.channelUrl);case 3:e.closeWithoutWarning();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),O()(m()(e),"closeWithoutWarning",(function(){e.props.warnOnClose(!1),e.props.close()})),O()(m()(e),"redirectToSlack",(function(){var t=e.props;(0,t.connectApp)(t.redirectUrl)})),e}return u()(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.content,n=t.isSlackEnabled,r=t.showSlackConnectMessage,o=t.actions,i=t.hasConnectedSlackAccount,c=Object(G.a)("common.".concat(a.get("type")));return F.a.createElement(M.b,{onSubmit:this.onSubmit,initialValues:{actions:{slack:o.contains("slack")&&i,siteCarousel:o.contains("siteCarousel")}},initialValuesEqual:function(){return!0},validate:function(e){var t=e.actions,a=I()(t,(function(e,t,a){return t?function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(a),!0).forEach((function(t){O()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Q(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}(O()({},a,t),e):e}),{});return 0===k()(a)?O()({},E.b,!0):void 0}},(function(t){var a=t.handleSubmit,o=t.invalid,i=t.submitting,l=t.values.actions,s=l.slack,u=l.notification,d=s||u;return F.a.createElement("form",{onSubmit:a},F.a.createElement("div",{className:"Modal-content Modal-content--forms"},F.a.createElement("h1",{className:"type--h4 type--500 u-marg-b--small"},Object(G.a)("content.promote_modal.heading",{contentType:c})),F.a.createElement("div",{className:"Content Content--small type--secondary u-marg-b--medium"},Object(G.a)("content.promote_modal.intro")),r&&F.a.createElement(J.a,{onFauxClick:e.redirectToSlack}),F.a.createElement("ul",{className:"u-blockList u-blockList--noBottom u-blockList--flex u-blockList-small-2 u-blockList-medium-2 u-blockList-large-2 u-marg-b--small"},e.getAvailableActions().map((function(e){return F.a.createElement("li",{key:e.name},F.a.createElement(M.a,{component:U.a,icon:e.icon,label:e.label,name:"actions[".concat(e.name,"]"),isDisabled:"slack"===e.name&&r,hasLegacyIcon:!1,hasLargeIcon:!0,hasBorder:!0}))}))),s&&F.a.createElement("div",{className:"u-marg-t--medium u-marg-b--large u-pad-t--medium u-border-top"},F.a.createElement(V.a,{label:Object(G.a)("field.slack_channel.label"),isSlackConnected:!r})),d&&F.a.createElement("div",{className:"u-marg-t--medium u-marg-b--medium u-pad-t--medium u-border-top"},F.a.createElement(M.a,{note:"(".concat(Object(G.a)("common.optional"),")"),label:Object(G.a)("field.add_a_message.label"),component:P.a,name:"message",isInitOnClick:!1,placeholder:Object(G.a)("share_modal.comment_placeholder",{typeLabel:c}),minRows:2,hasListOptions:!1,maxLength:X,hasLabelAbove:!0}),F.a.createElement("div",{className:"note u-marg-t--small"},F.a.createElement("p",null,n?Object(G.a)("content.promote_modal.message_note"):Object(G.a)("content.promote_modal.message_note_slack_disabled"))))),F.a.createElement("div",{className:"Strip Strip--modal"},F.a.createElement(D.a,{type:"button",label:Object(G.a)("button_label.do_nothing"),onClick:e.closeWithoutWarning,size:"large"}),F.a.createElement(D.a,{type:"submit",label:Object(G.a)("button_label.promote"),disabled:o||i,appearance:"brand",size:"large"})),F.a.createElement(M.c,{subscription:{submitting:!0,dirty:!0},onChange:function(t){var a=t.submitting,n=t.dirty;e.props.warnOnClose(n&&!a)}}))}))}}]),a}(R.b);O()($,"propTypes",{contentId:w.a.string.isRequired,content:w.a.instanceOf(_.a.Map).isRequired,isSlackEnabled:w.a.bool,showSlackConnectMessage:w.a.bool,showChannelField:w.a.bool,showTextField:w.a.bool,getUrl:w.a.func.isRequired}),t.b=Object(T.connect)((function(e,t){var a=Object(q.m)(e,t.contentId),n=Object(W.Q)(e,"slack"),r=Object(H.hasConnectedSlackAccount)(e),o=Object(q.r)(e,a),i=Object(W.y)(e,Object(K.g)(a));return{actions:o,content:a,isSlackEnabled:n,hasConnectedSlackAccount:r,showSlackConnectMessage:n&&!r,getUrl:function(t){return Object(W.y)(e,t)},contentUrl:i,redirectUrl:"".concat(i,"&openPromoteModal=true")}}),(function(e,t){return{promote:function(a){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return e(Object(x.z)({contentId:t.contentId,actions:a,message:n,membersType:"site_members",slackChannelId:r,slackChannelUrl:o}))},connectApp:function(t){return e(Object(L.a)("slackContentShare",t))}}}))(Object(z.a)((function(e){return{name:B.E,classes:["Modal--small"],id:e.contentId,title:Object(G.a)("content.promote_modal.title",{contentType:Object(G.a)("common.".concat(e.content.get("type")))})}}))($))},2775:function(e,t,a){"use strict";var n=a(15),r=a.n(n),o=a(1),i=a.n(o),c=a(0),l=a.n(c);function s(e){var t=e.title,a=e.children,n=e.actionBar,o=e.isEvent,i=e.breadcrumb,c=r()({Hero:!0,"Hero--event":o});return l.a.createElement("header",{className:c},l.a.createElement("div",{className:"Hero-inner"},l.a.createElement("div",{className:"Hero-innerContainer"},l.a.createElement("div",{className:"Hero-breadcrumbContainer"},i),l.a.createElement("div",{className:"Hero-eventInner"},l.a.createElement("h1",{className:"type--h1 Hero-heading"},t),a)),n&&l.a.createElement("div",{className:"Hero-actionBarContainer"},n)))}s.propTypes={title:i.a.string.isRequired,children:i.a.node,breadcrumb:i.a.node,actionBar:i.a.node,isEvent:i.a.bool},t.a=s},2776:function(e,t,a){"use strict";var n=a(4),r=a.n(n),o=a(1),i=a.n(o),c=a(0),l=a.n(c),s=a(18),u=a(1007),d=a(324),m=a(243),p=a(17),b=a(3);function g(e){var t=e.content,a=e.translateContentLanguage,n=e.setContentLanguageToOriginal,r=Object(d.a)().language,o=Object(s.useSelector)(m.w),i=Object(s.useSelector)(p.F),c=t.getIn(["translation","loading"],!1),g=t.getIn(["translation","error"],!1),f=t.getIn(["translation","detectLangCode"],null),h=Object(s.useSelector)((function(e){return Object(m.v)(e,f)})),v=t.getIn(["translation","isTranslated"],!1);return i&&(!i||f)&&f!==r.split("-")[0]&&o&&h?c?l.a.createElement("p",{className:"u-marg-t--medium type--secondary type--fs13"},Object(b.a)("common.loading")):l.a.createElement("p",{className:"u-marg-t--medium type--secondary type--fs13"},v&&!g?l.a.createElement(l.a.Fragment,null,Object(b.a)("content.language.translated_to.label",{language:Object(b.a)("content.language.".concat(r.split("-")[0])),link:l.a.createElement(u.a,{appearance:"tertiary",onClick:n})})):l.a.createElement(l.a.Fragment,null,Object(b.a)("content.language.published_in.label",{language:Object(b.a)("content.language.".concat(f)),link:l.a.createElement(u.a,{appearance:"tertiary",onClick:a})}))):null}g.propTypes={content:i.a.instanceOf(r.a.Map).isRequired,translateContentLanguage:i.a.func,setContentLanguageToOriginal:i.a.func},t.a=g},2777:function(e,t,a){"use strict";var n=a(4),r=a.n(n),o=a(1),i=a.n(o),c=a(0),l=a.n(c),s=a(2923),u=a(55),d=a(3);function m(e){var t,a,n=e.onSave,r=e.onSaveDraft,o=e.onApprove,i=e.canManage,c=e.content,m=e.disabled,p=e.isSiteContentManager,b=e.removeRenewLock,g=e.publishingStatus,f="blog_post"===c.get("type"),h=c.get("isLatest"),v="schedule"===g,y=c.get("type"),O=n,E=r,j=i||p,_="new"===c.get("status");switch(c.get("status")){case"new":case"predraft":t=j||f?v?Object(d.a)("button_label.schedule"):Object(d.a)("button_label.publish"):Object(d.a)("button_label.submit_for_approval"),a=Object(d.a)("button_label.save_draft");break;case"draft":t=j||f?v?Object(d.a)("button_label.schedule"):Object(d.a)("button_label.publish"):Object(d.a)("button_label.submit_for_approval"),a=Object(d.a)("button_label.update_draft");break;case"pending":O=o,E=n,j&&(t=v?Object(d.a)("button_label.approve_and_schedule"):Object(d.a)("button_label.approve")),a=j&&Object(d.a)("button_label.update");break;case"published":case"unpublished":t=j||f?Object(d.a)("button_label.update"):"",a="";break;case"rejected":O=j?o:n,t=j?v?Object(d.a)("button_label.approve_and_schedule"):Object(d.a)("button_label.approve"):Object(d.a)("button_label.submit_for_approval"),a=!j&&Object(d.a)("button_label.update_draft")}return l.a.createElement(s.a,{isFixed:!0,isHiddenOnMobile:!0,isDisabledWhileSubmitting:!0},l.a.createElement("div",{className:"ContentBar-link"},l.a.createElement("button",{type:"button",className:"type--fauxLink",onClick:function(){window.reactRouterHistory.go(-1),b()}},Object(d.a)("button_label.cancel"))),!h&&!_&&l.a.createElement("span",{className:"type--secondary type--b2 u-marg-r--small"},Object(d.a)("content.edit.update_version_label",{type:Object(d.a)("common.".concat(y)).toLocaleLowerCase()})),a&&l.a.createElement(u.a,{size:"large",disabled:m,label:a,onClick:E}),t&&l.a.createElement(u.a,{size:"large",appearance:"brand",disabled:m,label:t,onClick:function(){O(),b()}}))}m.propTypes={onSave:i.a.func.isRequired,onSaveDraft:i.a.func.isRequired,onApprove:i.a.func.isRequired,canManage:i.a.bool,isSiteContentManager:i.a.bool,content:i.a.instanceOf(r.a.Map),disabled:i.a.bool,publishingStatus:i.a.string},t.a=m},2778:function(e,t,a){"use strict";var n=a(1),r=a.n(n),o=a(0),i=a.n(o),c=a(37),l=a(225),s=a(853),u=a(245),d=a(655),m=a(242),p=a(773),b=a(3),g=a(47);function f(e){var t=e.hasOpenAlbumOptions,a=e.hasContentWidthOption,n=e.isPublicSite,r=e.showFeedOptions,o=e.getFormValue,f=e.isEdit,h=e.languages,v=f?[{label:Object(b.a)("content.publish.to.no_date"),value:"no_date"},{label:Object(b.a)("content.publish.to.date"),value:"date"}]:[{label:Object(b.a)("content.publish.to.no_date"),value:"no_date"},{label:Object(b.a)("content.publish.to.three_months"),value:"three_months"},{label:Object(b.a)("content.publish.to.six_months"),value:"six_months"},{label:Object(b.a)("content.publish.to.date"),value:"date"}],y=f||[{label:Object(b.a)("content.publish.from.immediately"),value:"immediately"},{label:Object(b.a)("content.publish.to.date"),value:"date_from"}];return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"u-marg-b--mediumlarge u-posRelative u-zIndex--3"},i.a.createElement("div",{className:"u-marg-b--small"},i.a.createElement("h3",{className:"type--h6 type--title u-marg-b--small u-marg-t--large"},Object(b.a)("content.publish.from.title")),!f&&i.a.createElement(c.Field,{component:m.a,name:"publishImmediately",options:y,onChange:e.onPublishImmediatelyChange,isStacked:!0,isLight:!0})),(f||"date_from"===o("publishImmediately"))&&i.a.createElement("div",{className:"medium-6"},i.a.createElement(c.Field,{component:s.a,name:"publishAt",label:Object(b.a)("content.publish.from.title"),hasTime:!1,onChange:e.onPublishFromChange,validate:[g.E],isRequired:!0})),i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"u-marg-b--small"},i.a.createElement("h3",{className:"type--h6 type--title u-marg-b--small u-marg-t--large"},Object(b.a)("content.publish.to.title")),f?i.a.createElement(c.Field,{component:l.a,name:"publishIndefinitely",label:Object(b.a)("content.publish.to.no_date"),onChange:function(t,a){return e.onPublishPresetChange(a?"no_date":"date")},isStacked:!0,isLight:!0}):i.a.createElement(c.Field,{component:m.a,name:"publishToPreset",onChange:function(t,a){return e.onPublishPresetChange(a)},options:v,isStacked:!0,isLight:!0})),"date"===o("publishToPreset")&&i.a.createElement("div",{className:"medium-6"},i.a.createElement(c.Field,{component:s.a,name:"publishTo",label:Object(b.a)("content.publish.to.title"),validate:[g.E,Object(g.c)(Object(g.d)("publishAt"),Object(b.a)("content.publish.from.field_error"))],hasTime:!1,isRequired:!0})))),i.a.createElement("div",{className:"u-pad-t--xxlarge u-marg-t--xxlarge u-border-top"},i.a.createElement("h3",{className:"type--h5 type--title u-marg-b--xlarge"},Object(b.a)("content.edit.more_options")),h.length>0&&i.a.createElement("div",{className:"u-marg-b--xlarge medium-4"},i.a.createElement(c.Field,{component:d.a,name:"language",options:h,label:Object(b.a)("content.edit.page_language")})),a&&i.a.createElement("div",{className:"u-marg-b--xlarge"},i.a.createElement(c.Field,{component:p.a,type:"checkbox",name:"isMaximumWidth",label:Object(b.a)("content.edit.maximize_label"),note:Object(b.a)("content.edit.maximize_note")})),i.a.createElement("div",{className:"u-marg-b--xlarge"},i.a.createElement(c.Field,{component:u.a,name:"summary",id:"summary",label:Object(b.a)("content.edit.summary_label"),placeholder:Object(b.a)("content.edit.summary_note"),maxLength:255,showRemainingCharactersCount:!0})),t&&i.a.createElement("div",{className:r?"u-marg-b--medium":null},i.a.createElement(c.Field,{component:l.a,name:"isOpenToSubmissions",label:Object(b.a)("content.checkbox.open_album"),note:n?Object(b.a)("content.albums.open_anyone_add"):Object(b.a)("content.albums.open_site_members_add")})),r&&i.a.createElement(c.Field,{component:l.a,name:"isFeedEnabled",label:Object(b.a)("content.feed_allow_posts")})))}f.propTypes={getFormValue:r.a.func.isRequired,showFeedOptions:r.a.bool,isPublicSite:r.a.bool,hasOpenAlbumOptions:r.a.bool,hasContentWidthOption:r.a.bool,isEdit:r.a.bool,onPublishPresetChange:r.a.func.isRequired,onPublishFromChange:r.a.func.isRequired,languages:r.a.arrayOf(r.a.shape({value:r.a.string.isRequired,label:r.a.string.isRequired}))},f.defaultProps={isPublicSite:!1,hasOpenAlbumOptions:!1,hasContentWidthOption:!1,isEdit:!1,languages:[]},t.a=f},2779:function(e,t,a){"use strict";var n=a(4),r=a.n(n),o=a(1),i=a.n(o),c=a(0),l=a.n(c),s=a(37),u=a(220),d=a(192),m=a(128),p=a(2637),b=a(114),g=a(1016),f=a(287),h=a(3),v=a(47);function y(e){var t=e.content,a=e.showDate,n=e.size,r=e.siteId,o=t.get("authoredBy"),i=l.a.createElement(b.a,{img:o.get("img"),url:o.get("url"),name:o.get("name")}),c=Object(f.a)(),y=c.toggle,O=c.isActive;return l.a.createElement("div",null,O?l.a.createElement(s.Field,{component:g.a,name:"authoredBy",label:Object(h.a)("content.field_label.author"),isStaticLabel:!0,isStaticLabelWithImage:!0,placeholder:Object(h.a)("field.people_selector.placeholder"),defaultParams:{siteId:r},isRequired:!0,validate:[v.E,v.x],isValueModel:!0}):l.a.createElement(p.a,{emblem:i,size:n},l.a.createElement(d.a,{isStacked:!a,hasNoBottom:a},l.a.createElement(m.a,null,l.a.createElement("a",{className:"type--b1 type--title",href:o.get("url"),tabIndex:"-1"},o.get("name")))),l.a.createElement(u.a,{label:Object(h.a)("common.change"),onClick:y})))}y.propTypes={content:i.a.instanceOf(r.a.Map).isRequired,showDate:i.a.bool,siteId:i.a.string,size:i.a.oneOf(["large","medium","small"])},y.defaultProps={showDate:!0,size:"large"},t.a=y},2780:function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(1018),i=a(3),c=a(1007);t.a=function(e){var t=e.topics,a=e.updateTopics,n=e.topicSelectize;return t.length?r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"u-marg-r--small"},Object(i.a)("content.edit.suggested_topics")),r.a.createElement("ul",{className:"u-inline"},r.a.createElement(o.a,{delimiter:", ",lastDelimiter:" ".concat(Object(i.a)("common.and").toLowerCase()," ")},t.map((function(e){return r.a.createElement("li",{key:e.id,className:"u-marg-t--xsmall u-inlineBlock"},r.a.createElement(c.a,{appearance:"brand",onClick:function(){a(e.id),n.selectize.createItem(e.name,!1)}},e.name))}))))):null}},2781:function(e,t,a){"use strict";var n=a(10),r=a.n(n),o=a(11),i=a.n(o),c=a(7),l=a.n(c),s=a(12),u=a.n(s),d=a(13),m=a.n(d),p=a(8),b=a.n(p),g=a(5),f=a.n(g),h=a(15),v=a.n(h),y=a(4),O=a.n(y),E=a(1),j=a.n(E),_=a(0),C=a.n(_),I=a(18),N=a(37),k=a(166),S=a(14),w=a(62),A=a(496),F=a(1156),M=a(2924),R=a(140),T=a(150),x=a(30),L=a(17),P=a(3),D=a(104),U=a(658);function V(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=b()(e);if(t){var r=b()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return m()(this,a)}}var B=function(e){u()(a,e);var t=V(a);function a(e){var n;return r()(this,a),(n=t.call(this,e)).getCurrentValue=n.getCurrentValue.bind(l()(n)),n.uploadFiles=n.uploadFiles.bind(l()(n)),n.uploadFile=n.uploadFile.bind(l()(n)),n.selectFiles=n.selectFiles.bind(l()(n)),n.removeFile=n.removeFile.bind(l()(n)),n.moveFile=n.moveFile.bind(l()(n)),n}return i()(a,[{key:"getCurrentValue",value:function(){return Object(N.formValueSelector)(this.props.formName)(Object(w.b)().getState(),this.props.input.name)}},{key:"uploadFiles",value:function(e){var t=this,a=e;Array.isArray(e)||(a=[e]),a.forEach((function(e){t.uploadFile(e)}))}},{key:"uploadFile",value:function(e){var t=this,a=!1;Object(U.a)("content-upload-".concat(this.props.contentId),this.props.uploadFile(e,this.props.siteId,(function(e){a||(t.props.input.onChange(t.getCurrentValue().push(e)),a=e)}),this.props.isNativeVideoEnabled).then((function(e){var n=t.getCurrentValue().findKey((function(e){return e===a}));t.props.input.onChange(t.getCurrentValue().set(n,new O.a.Map({error:null,loading:!1,result:e})))})).catch((function(){var e=t.getCurrentValue(),n=e.findKey((function(e){return e===a}));t.props.input.onChange(e.remove(n))})))}},{key:"selectFiles",value:function(e){var t=this.props.input.value.map((function(e){return e.getIn&&e.getIn(["result","id"])})),a=e.reduce((function(e,a){return t.includes(a.get("id"))?e:e.push(new O.a.Map({error:null,loading:!1,result:a}))}),new O.a.List);this.props.input.onChange(this.props.input.value.concat(a))}},{key:"removeFile",value:function(e,t){this.props.input.onChange(this.props.input.value.slice(0,t).concat(this.props.input.value.slice(t+1)))}},{key:"moveFile",value:function(e,t){var a=this.props.input.value.get(e),n=this.props.input.value.splice(e,1).splice(t,0,a);this.props.input.value.equals(n)||this.props.input.onChange(n)}},{key:"render",value:function(){var e=this.props,t=e.selectedFiles,a=e.siteId,n=e.isStacked,r=e.isBoxEnabled,o=e.isGDriveEnabled,i=e.isDropboxEnabled,c=e.isOneDriveEnabled,l=e.isSharePointEnabled,s=e.isCRMEnabled,u=e.hasConnectedBoxAccount,d=e.hasConnectedGoogleDriveAccount,m=e.hasConnectedDropboxAccount,p=e.hasConnectedOneDriveAccount,b=e.hasConnectedSharePointAccount,g=e.showByDefault,f=e.customAddLabel,h=e.isVideoRecorderEnabled,y=e.canUploadAllFileTypes,O=v()({"u-marg-b--medium":t.size>0});return C.a.createElement(M.a,{label:Object(P.a)("content.add_files_and_attachments"),fontStyle:"b2",isInitiallyActive:g||t.size>0},C.a.createElement("div",{className:"u-marg-b--xlarge"},C.a.createElement("div",{className:"type--500 u-marg-b--small"},Object(P.a)("content.edit.files_label")),C.a.createElement("div",{className:O},C.a.createElement(A.a,{isMulti:!0,hasIntranetOption:!0,isInContent:!0,hasBoxOption:r&&u,hasDropboxOption:i&&m,hasCrmOption:s,hasGoogleDriveOption:o&&d,hasOneDriveOption:c&&p,hasSharePointOption:l&&b,mediaManagerId:"content-files-list",mediaManagerProps:{defaultSiteId:a},onUpload:this.uploadFiles,onSelect:this.selectFiles,maximumUploadFilesize:5e11,isStacked:n,icon:"dropzone-files",customAddMessage:f,isVideoRecorderEnabled:h,canUploadAllFileTypes:y})),C.a.createElement(F.a,{isEdit:!0,files:t,onClear:this.removeFile,onMove:this.moveFile})))}}]),a}(C.a.Component);f()(B,"propTypes",{formName:j.a.string.isRequired,contentId:j.a.string.isRequired,siteId:j.a.string,isStacked:j.a.bool,showByDefault:j.a.bool,isNativeVideoEnabled:j.a.bool,customAddLabel:j.a.string,canUploadAllFileTypes:j.a.bool}),f()(B,"defaultProps",{isStacked:!1,showByDefault:!1,isNativeVideoEnabled:!1,customAddLabel:"",canUploadAllFileTypes:!1}),t.a=Object(I.connect)((function(e,t){var a=Object(x.getCurrentUser)(e),n=(t.input.value||new O.a.List).map((function(t){return"string"==typeof t?e.getIn(["files",t]):t.set("thumbnailImgLocal",e.getIn(["files",t.getIn(["result","id"]),"thumbnailImgLocal"]))})).filter((function(e){return!!e})),r=Object(x.getFileUploadPermissions)(e,t.canUploadAllFileTypes);return{selectedFiles:n,isBoxEnabled:Object(L.Q)(e,"box"),isGDriveEnabled:Object(L.Q)(e,"googledrive"),isDropboxEnabled:Object(L.Q)(e,"dropbox"),isOneDriveEnabled:Object(L.Q)(e,"onedrive"),isSharePointEnabled:Object(L.Q)(e,"sharepoint"),isCRMEnabled:Object(L.Q)(e,"crm"),hasConnectedBoxAccount:a.get("hasConnectedBoxAccount"),hasConnectedGoogleDriveAccount:a.get("hasConnectedGoogleDriveAccount"),hasConnectedDropboxAccount:a.get("hasConnectedDropboxAccount"),hasConnectedOneDriveAccount:a.get("hasConnectedOneDriveAccount"),hasConnectedSharePointAccount:a.get("hasConnectedSharePointAccount"),isVideoRecorderEnabled:Object(L.C)(e,R.e)&&[T.a.ALL,T.a.MEDIA].includes(r)}}),(function(e){return{uploadFile:function(t,a,n,r){return Object(D.g)(t)&&!r&&e(Object(S.l)(Object(P.a)("feed.video_files_content_not_playable"))),e(Object(k.X)(t,a,n,r))}}}))(B)},2782:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return R}));var n=a(10),r=a.n(n),o=a(11),i=a.n(o),c=a(7),l=a.n(c),s=a(12),u=a.n(s),d=a(13),m=a.n(d),p=a(8),b=a.n(p),g=a(5),f=a.n(g),h=a(15),v=a.n(h),y=a(4),O=a.n(y),E=a(2223),j=a.n(E),_=a(1),C=a.n(_),I=a(0),N=a.n(I),k=a(69),S=a.n(k),w=a(21),A=a(354),F=a(3);function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=b()(e);if(t){var r=b()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return m()(this,a)}}var R=function(t){u()(n,t);var a=M(n);function n(t){var o;return r()(this,n),o=a.call(this,t),f()(l()(o),"onChange",(function(e){if("function"==typeof o.props.onChange){var t=[];if(e)for(var a=Array.isArray(e)?e:[e],n=0;n<a.length;n+=1){var r=o.selectize.options[a[n]];r=r.id===r.name?{id:null,name:a[n]}:{id:r.id,topicAssignmentId:r.topicAssignmentId,name:r.name},t.push(r)}o.props.onChange(O.a.fromJS(t))}})),f()(l()(o),"setExcluded",(function(e){O.a.Map.isMap(e.exclude)&&(o.excluded=e.exclude.toJS()),O.a.List.isList(e.exclude)&&(o.excluded=e.exclude.reduce((function(e,t){return e.set(t.topic.id,t.toJS())}),new O.a.Map).toObject())})),f()(l()(o),"getSelectize",(function(){return o.selectize})),f()(l()(o),"selectize",null),f()(l()(o),"excluded",{}),f()(l()(o),"initSelectize",(function(t){if(t){var a=o.props,n=a.maxItems,r=a.canCreate,i=a.value,c=n&&1===n?{}:{item:function(e,t){return'\n        <div class="Tag Tag--plain Tag--noHover Tag--withMargin Tag--hasRemove">\n          <div class="Tag-text type--500 type--b3">\n            '.concat(t(e.name),'\n          </div>\n          <span class="Tag-childrenContainer remove">\n            <i class="Icon">\n              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M8.65 7.943l3.888 3.889a.5.5 0 0 1-.707.707l-3.889-3.89-3.89 3.89a.5.5 0 0 1-.706-.707l3.889-3.89-3.89-3.889a.5.5 0 1 1 .708-.707l3.889 3.89 3.89-3.89a.5.5 0 1 1 .706.707L8.65 7.943z"/></svg>\n            </i>\n          </span>\n        </div>\n        ')},option_create:function(e,t){var a=j()(e.input,"#");return a?'<div data-selectable class="create option">'.concat(Object(F.a)("button_label.add")," <strong>").concat(t(a),"</strong></div>"):""}},s=l()(o);window.$(t).selectize({loadingClass:"selectize-loading",valueField:"id",labelField:"name",searchField:["name"],closeAfterSelect:!0,placeholder:o.props.placeholder,maxItems:n,options:i?i.toJS():[],items:i?i.map((function(e){return e.get("id")})).toJS():[],plugins:{simpplr_loader:{},maxwidth:{},remove_button:{append:!1},clear_button:{},classCopy:{}},load:function(t,a){if(!t.length)return a();var n=this;e.Simpplr.Loader.show();var r={term:t,query:t};return e.Simpplr.Salesforce.Topic.search(r).fail(a).done((function(e){var t=(e.result.listOfItems||[]).filter((function(e){return void 0===s.excluded[e.id]}));n.$control_input.val()&&a(t)})).always(e.Simpplr.Loader.hide)},render:c,create:!!r&&function(e){if(e.length>99)return Object(A.danger)(Object(F.a)("topic.add.too_long.error_flash")),!1;e=j()(e,"#");for(var t=this.settings,a=t.valueField,n=t.labelField,r=e.toLowerCase().replace(/ /g,""),o=0;o<this.items.length;o++)for(var i in this.options)if(this.options[i][this.settings.valueField]===this.items[o]&&this.options[i].name.toLowerCase().replace(/ /g,"")===r)return Object(A.danger)(Object(F.a)("topic.add.duplicate.error_flash")),!1;if(n!==a)for(var c in this.options)if(this.options[c][n].toLowerCase()===e.toLowerCase())return this.options[c];var l={};return l[n]=e,l[a]=e,l}}),o.selectize=t.selectize,o.selectize.on("change",o.onChange)}})),f()(l()(o),"clear",(function(){o.selectize&&o.selectize.clear()})),o.setExcluded(t),o}return i()(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.value,a=e.exclude,n=1===e.maxItems,r=(t||new O.a.List).size;n||r||this.selectize.clearOptions(),O.a.is(a,this.props.exclude)||this.setExcluded(e)}},{key:"shouldComponentUpdate",value:function(){return!this.selectize}},{key:"componentWillUnmount",value:function(){this.selectize&&(this.selectize.destroy(),this.selectize=null)}},{key:"render",value:function(){var e=this.props,t=e.value,a=e.maxItems,n=e.isCompact,r=e.isStaticLabel,o=e.meta,i=e.id,c=(t||[]).map((function(e){return N.a.createElement("option",{value:e.get("id"),key:e.get("id")},e.get("name"))})),l=v()({Field:!0,"Field--hasIcon":!0,"Field--compact":n,"Field--staticLabel":r,"has-error":o.error&&o.touched});return N.a.createElement("div",{className:l},N.a.createElement("select",{ref:this.initSelectize,multiple:1!==a,id:i},c),N.a.createElement("div",{className:"Field-iconContainer Field-iconContainer--search"},N.a.createElement(w.a,{isLegacy:!0,name:"search"})))}}]),n}(N.a.Component);f()(R,"propTypes",{placeholder:C.a.string,maxItems:C.a.number,canCreate:C.a.bool,onChange:C.a.func,isCompact:C.a.bool,isStaticLabel:C.a.bool,topics:S.a.list}),f()(R,"defaultProps",{onChange:function(){},topics:new O.a.List})}).call(this,a(27))},2783:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return S}));var n=a(16),r=a.n(n),o=a(31),i=a.n(o),c=a(10),l=a.n(c),s=a(11),u=a.n(s),d=a(7),m=a.n(d),p=a(12),b=a.n(p),g=a(13),f=a.n(g),h=a(8),v=a.n(h),y=a(5),O=a.n(y),E=a(0),j=a.n(E),_=a(139);function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=v()(e);if(t){var r=v()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return f()(this,a)}}function I(e,t){for(t(e),e=e.firstChild;e;)I(e,t),e=e.nextSibling}function N(e){if(!e)return"";var t=[];return I(e,(function(e){3===e.nodeType&&e.textContent.trim().length&&t.push(e.textContent.trim())})),t.join(" ")}function k(e){return e.replace(/<\/(p|h[0-9]|li)>/gi,"\n\n</$1>").replace(/<br( \/)?>/gi,"<br$1>\n").replace(/<span class="fr-video-processing-overlay">\W*(.*)\W*<\/span>/,"")}function S(t){return function(a){b()(o,a);var n=C(o);function o(){var t;l()(this,o);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return t=n.call.apply(n,[this].concat(r)),O()(m()(t),"state",{topics:null}),O()(m()(t),"getSuggestedTopics",(function(a,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",c=k(o),l=N(Object(_.e)(c));l&&e.Simpplr.Salesforce.Utility.suggestTopics(l,r).then((function(e){var r=e.result,o=r.topicList,c=r.isAIEnabled,l=o.map((function(e){return{id:e.topicId||e.topicName,name:e.topicName}}));t.setState({topics:i()(l)}),l.forEach((function(e){return a.selectize.addOption(e)})),a.selectize.refreshOptions(!1),n(l,c)}))})),O()(m()(t),"updateTopics",(function(e){t.setState((function(t){return{topics:t.topics.filter((function(t){return t.id!==e}))}}))})),t}return u()(o,[{key:"render",value:function(){return j.a.createElement(t,r()({},this.props,{getSuggestedTopics:this.getSuggestedTopics,suggestedTopics:this.state.topics,updateTopics:this.updateTopics}))}}]),o}(j.a.Component)}}).call(this,a(27))},2784:function(e,t,a){"use strict";t.decode=t.parse=a(2785),t.encode=t.stringify=a(2786)},2785:function(e,t,a){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,a,o){t=t||"&",a=a||"=";var i={};if("string"!=typeof e||0===e.length)return i;var c=/\+/g;e=e.split(t);var l=1e3;o&&"number"==typeof o.maxKeys&&(l=o.maxKeys);var s=e.length;l>0&&s>l&&(s=l);for(var u=0;u<s;++u){var d,m,p,b,g=e[u].replace(c,"%20"),f=g.indexOf(a);f>=0?(d=g.substr(0,f),m=g.substr(f+1)):(d=g,m=""),p=decodeURIComponent(d),b=decodeURIComponent(m),n(i,p)?r(i[p])?i[p].push(b):i[p]=[i[p],b]:i[p]=b}return i};var r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},2786:function(e,t,a){"use strict";var n=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,a,c){return t=t||"&",a=a||"=",null===e&&(e=void 0),"object"==typeof e?o(i(e),(function(i){var c=encodeURIComponent(n(i))+a;return r(e[i])?o(e[i],(function(e){return c+encodeURIComponent(n(e))})).join(t):c+encodeURIComponent(n(e[i]))})).join(t):c?encodeURIComponent(n(c))+a+encodeURIComponent(n(e)):""};var r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function o(e,t){if(e.map)return e.map(t);for(var a=[],n=0;n<e.length;n++)a.push(t(e[n],n));return a}var i=Object.keys||function(e){var t=[];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.push(a);return t}},2787:function(e,t,a){"use strict";var n=a(5),r=a.n(n),o=a(15),i=a.n(o),c=a(1),l=a.n(c),s=a(0),u=a.n(s),d=a(21),m=a(185),p=a.n(m);function b(e){var t,a=e.children,n=e.isSimple,o=i()((t={},r()(t,p.a.breadcrumb,!0),r()(t,p.a.simple,n),t));return u.a.createElement("nav",{className:o},u.a.Children.map(a,(function(e,t){return e&&u.a.createElement(s.Fragment,{key:e.key},0!==t&&u.a.createElement("div",{className:"".concat(p.a.chevronContainer," ").concat(p.a.chevronContainerLine)},u.a.createElement(d.a,{name:"arrow-right",sourceSize:"10"})),e)})))}b.propTypes={children:l.a.node.isRequired,isSimple:l.a.bool},b.defaultProps={isSimple:!0},t.a=b},2788:function(e,t,a){"use strict";var n=a(5),r=a.n(n),o=a(15),i=a.n(o),c=a(1),l=a.n(c),s=a(0),u=a.n(s),d=a(53),m=a(185),p=a.n(m);function b(e){var t,a=e.to,n=e.fontStyle,o=e.color,c=e.href,l=e.label,s=i()((t={},r()(t,p.a.title,!0),r()(t,"type--".concat(n),!0),r()(t,"type--".concat(o),!0),t));return c&&(l=u.a.createElement("a",{href:c,title:"string"==typeof l?l:void 0},l)),a&&(l=u.a.createElement(d.a,{to:a,title:"string"==typeof l?l:void 0},l)),u.a.createElement("div",{className:s},l)}b.propTypes={label:l.a.node.isRequired,to:l.a.string,href:l.a.string,fontStyle:l.a.string,color:l.a.string},b.defaultProps={fontStyle:"b4",color:"secondary"},t.a=b},2789:function(e,t,a){"use strict";a.d(t,"a",(function(){return C}));var n=a(10),r=a.n(n),o=a(11),i=a.n(o),c=a(12),l=a.n(c),s=a(13),u=a.n(s),d=a(8),m=a.n(d),p=a(5),b=a.n(p),g=a(1),f=a.n(g),h=a(0),v=a.n(h),y=a(53),O=a(224),E=a(411),j=a(3);function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=m()(e);if(t){var r=m()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return u()(this,a)}}var C=function(e){l()(a,e);var t=_(a);function a(){return r()(this,a),t.apply(this,arguments)}return i()(a,[{key:"render",value:function(){var e=this.props,t=e.image,a=e.title,n=e.meta,r=e.stamp,o=e.to,i=e.type;return v.a.createElement("div",{className:"ContentCard"},v.a.createElement(y.a,{to:o},t),i&&v.a.createElement("div",{className:"ContentCard-type"},Object(j.a)("common.".concat(i))),v.a.createElement(y.a,{to:o,className:"ContentCard-title"},v.a.createElement(O.a,{length:46},a)),r&&v.a.createElement("div",{className:"ContentCard-stamp"},v.a.createElement(E.a,{text:r})),n)}}]),a}(v.a.PureComponent);b()(C,"propTypes",{image:f.a.node.isRequired,title:f.a.string.isRequired,to:f.a.string.isRequired,meta:f.a.node.isRequired,stamp:f.a.node,type:f.a.string})},2790:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return r}));var n="is-editingContent",r="is-submitting"},2791:function(e,t,a){"use strict";var n=a(1),r=a.n(n),o=a(0),i=a.n(o),c=a(37),l=a(125),s=a(2686),u=a(117),d=a(149);a(3);function m(e){var t=e.fields,a=e.maxFields,n=e.getPlaceholder,r=e.addLabel,o=e.showDeleteButton,m=e.label,p=e.note,b=(e.minFields,e.inputMaxLength),g=e.isCompact,f=e.ariaLabel,h=function(){t.length<a&&t.push("")};return i.a.createElement(i.a.Fragment,null,(m||p)&&i.a.createElement("label",{htmlFor:"poll-options",className:"type--h6 type--title u-pad-b--small"},m," ",p&&i.a.createElement("span",{className:"note"},"- ",p)),i.a.createElement("ul",{id:"poll-options"},t.map((function(e,a){return i.a.createElement("li",{"aria-live":"assertive","aria-atomic":"true",className:"u-marg-b--small",key:a},i.a.createElement(s.a,{onClick:function(){return t.remove(a)},hasButton:o&&t.length>1,ariaLabel:f},i.a.createElement(c.Field,{isCompact:g,hasNoInternalLabel:!0,name:"".concat(e),component:u.a,type:"text",placeholder:n&&n(a+1),maxLength:b&&b,onKeyDown:function(e){e.which===d.i&&a===t.length-1&&h()},onKeyUp:function(e){e.target.value&&a===t.length-1&&h()}})))}))),t.length<a&&i.a.createElement("div",{className:"u-marg-t--small"},i.a.createElement(l.a,{icon:"circle-plus",color:"brand",label:r,onClick:h,hasCurrentColorIcon:!0,fontStyle:"b2",iconSourceSize:"17",ariaControls:"poll-options"})))}m.propTypes={maxFields:r.a.number,getPlaceholder:r.a.func,addLabel:r.a.string,label:r.a.string,note:r.a.string,showDeleteButton:r.a.bool,minFields:r.a.number,inputMaxLength:r.a.number,isCompact:r.a.bool},m.defaultProps={maxFields:10,addLabel:"Add",showDeleteButton:!1,minFields:0,isCompact:!1},t.a=m},2792:function(e,t,a){"use strict";var n=a(0),r=a.n(n);t.a=function(){return r.a.createElement("svg",{width:"176",height:"16",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 176 16"},r.a.createElement("g",{fill:"#757575"},r.a.createElement("path",{d:"M129.8 4.827c-.7 0-1.8.5-2.1 1.3h-.1v-1.2h-1.3v7.1h1.3v-3.8c0-1.3.9-2.1 1.8-2.1.3 0 .5 0 .7.1l.5-1.2c-.1-.2-.4-.2-.8-.2M153.8 1.427h1.3v10.5h-1.3v-10.5zM149.7 4.827c-1.4 0-2.8.8-2.8 2.1 0 1.2 1.2 1.8 1.8 1.9l1.5.3c.7.2 1 .6 1 .9 0 .6-.6 1-1.4 1-.8 0-1.5-.4-1.9-1.3l-1.2.4c.4 1 1.4 2 3 2s2.8-.9 2.8-2.2c0-.8-.6-1.7-1.9-2l-1.4-.3c-.5-.1-.9-.4-.9-.8 0-.6.7-.9 1.4-.9s1.3.3 1.6.9l1.1-.5c-.5-1-1.5-1.5-2.7-1.5M159.6 10.927c-.7 0-1.5-.3-1.5-1.1 0-.6.6-1.3 2-1.3 1.1 0 1.6.4 1.6.4 0 1.1-1.1 2-2.1 2m.3-6.1c-1.7 0-2.7 1-2.9 1.6l1.2.5c.2-.6 1.1-.9 1.8-.9 1 0 1.8.6 1.8 1.7v.2c-.3-.2-.9-.4-1.8-.4-1.6 0-3.1.8-3.1 2.4 0 1.4 1.3 2.3 2.7 2.3 1.2 0 1.9-.6 2.2-1.2h.1v1.1h1.3v-4.4c-.3-1.9-1.7-2.9-3.3-2.9M134.3 10.927c-.7 0-1.5-.3-1.5-1.1 0-.6.6-1.3 2-1.3 1.1 0 1.6.4 1.6.4 0 1.1-1.1 2-2.1 2m.3-6.1c-1.7 0-2.7 1-2.9 1.6l1.2.5c.2-.6 1.1-.9 1.8-.9 1 0 1.8.6 1.8 1.7v.2c-.3-.2-.9-.4-1.8-.4-1.6 0-3.1.8-3.1 2.4 0 1.4 1.3 2.3 2.7 2.3 1.2 0 1.9-.6 2.2-1.2h.1v1.1h1.3v-4.4c-.2-1.9-1.6-2.9-3.3-2.9M170.4 7.627c.3-1 1-1.6 2-1.6 1.5 0 2 1 2.1 1.6h-4.1m2-2.8c-2.1 0-3.4 1.7-3.4 3.7 0 2.1 1.4 3.7 3.6 3.7 1.6 0 2.6-.9 3.1-1.9l-1.2-.5c-.4.9-1.1 1.2-1.9 1.2-1.1 0-2.2-.8-2.2-2.2h5.5v-.2c-.1-2.4-1.4-3.8-3.5-3.8M142.8 4.827c-1 0-1.9.6-2.2 1.2h-.1v-1.1h-1.3v7.1h1.3v-3.8c0-1.1.7-2.2 1.9-2.2 1 0 1.8.5 1.8 2v4h1.3v-4.2c0-1.8-.9-3-2.7-3M166.4 2.827h-1.3v2.1h-1.2v1.2h1.2v3.7c0 1.4.8 2.3 2.3 2.3.4 0 .8-.1 1.1-.2l-.5-1.1c-.2.1-.4.1-.6.1-.6 0-1-.4-1-1.2v-3.6h1.7v-1.2h-1.7v-2.1M126 1.427h-7.2v1.4h2.9v9.2h1.3v-9.2h3v-1.4M73.2 5.627v1.6h3.9c-.1.9-.4 1.6-.9 2.1-.6.6-1.5 1.2-3 1.2-2.4 0-4.3-1.9-4.3-4.4s1.9-4.4 4.3-4.4c1.3 0 2.3.5 3 1.2l1.2-1.2c-1.1-.9-2.4-1.6-4.2-1.6-3.3 0-6.1 2.7-6.1 6s2.8 6 6.1 6c1.8 0 3.1-.6 4.2-1.7s1.4-2.6 1.4-3.8c0-.4 0-.7-.1-1h-5.5M83.7 4.227c-2.1 0-3.9 1.6-3.9 3.9 0 2.2 1.7 3.9 3.9 3.9 2.1 0 3.9-1.6 3.9-3.9 0-2.2-1.8-3.9-3.9-3.9zm0 6.2c-1.2 0-2.2-1-2.2-2.3 0-1.4 1-2.3 2.2-2.3s2.2 1 2.2 2.3c0 1.4-1.1 2.3-2.2 2.3zM102.7 5.127c-.4-.5-1.2-.9-2.1-.9-1.9 0-3.6 1.7-3.6 3.9s1.7 3.9 3.6 3.9c.9 0 1.7-.4 2-.9h.1v.5c0 1.5-.8 2.3-2.1 2.3-1 0-1.7-.7-2-1.4l-1.4.6c.4 1 1.6 2.3 3.4 2.3 2 0 3.7-1.2 3.7-4v-7h-1.6v.7zm-1.9 5.3c-1.2 0-2.1-1-2.1-2.3 0-1.4.9-2.3 2.1-2.3 1.2 0 2.1 1 2.1 2.4-.1 1.3-1 2.2-2.1 2.2zM92.3 4.227c-2.1 0-3.9 1.6-3.9 3.9 0 2.2 1.7 3.9 3.9 3.9 2.1 0 3.9-1.6 3.9-3.9 0-2.2-1.7-3.9-3.9-3.9zm0 6.2c-1.2 0-2.2-1-2.2-2.3 0-1.4 1-2.3 2.2-2.3 1.2 0 2.2 1 2.2 2.3 0 1.4-1 2.3-2.2 2.3zM105.7.327h1.7v11.7h-1.7V.327zM112.5 10.427c-.9 0-1.5-.4-1.9-1.2l5.2-2.1-.2-.4c-.3-.9-1.3-2.5-3.3-2.5-2 0-3.7 1.6-3.7 3.9 0 2.2 1.6 3.9 3.8 3.9 1.8 0 2.8-1.1 3.2-1.7l-1.3-.9c-.3.6-.9 1-1.8 1zm-.1-4.7c.7 0 1.3.4 1.5.9l-3.5 1.4c0-1.7 1.1-2.3 2-2.3z"})),r.a.createElement("path",{d:"M6.2 8.9c0 1-.2 1.7-.7 2.3s-1 .9-1.8.9-1.4-.2-1.8-.7v3.1H.8V5.7h1l.1.7c.4-.5 1.1-.8 1.8-.8.8 0 1.4.3 1.8.9s.7 1.3.7 2.4zm-1.1-.1c0-.7-.2-1.3-.5-1.7s-.7-.6-1.2-.6c-.7 0-1.1.3-1.5.9v3c.3.6.8.9 1.5.9.5 0 .9-.2 1.2-.6s.5-1.1.5-1.9zM7.3 8.8c0-.6.1-1.2.4-1.7s.6-.9 1-1.1.9-.4 1.5-.4c.9 0 1.6.3 2.1.9s.7 1.3.7 2.3v.1c0 .6-.1 1.2-.4 1.7s-.6.9-1 1.1-.9.4-1.5.4c-.9 0-1.6-.3-2.1-.9s-.7-1.4-.7-2.4zm1.1.1c0 .7.2 1.3.5 1.7s.8.6 1.3.6c.6 0 1-.2 1.3-.6s.5-1 .5-1.8c0-.7-.2-1.3-.5-1.7s-.8-.6-1.3-.6-1 .2-1.3.6-.5 1-.5 1.8zM20 10.5l1.2-4.8h1.1L20.5 12h-.9L18 7.2 16.5 12h-.9l-1.8-6.3h1.1l1.2 4.7 1.5-4.7h.9l1.5 4.8zM26 12.1c-.9 0-1.6-.3-2.1-.8s-.8-1.3-.8-2.3v-.2c0-.6.1-1.2.4-1.7s.6-.9 1-1.2.9-.4 1.4-.4c.8 0 1.5.3 1.9.8s.7 1.3.7 2.3v.5h-4.3c0 .6.2 1.1.5 1.5s.8.6 1.3.6c.4 0 .7-.1 1-.2s.5-.4.7-.6l.7.5c-.5.8-1.3 1.2-2.4 1.2zm-.1-5.7c-.4 0-.8.2-1.1.5s-.5.8-.6 1.3h3.2c0-.6-.2-1-.4-1.3s-.6-.5-1.1-.5zM32.8 6.6h-.5c-.7 0-1.2.3-1.4.9V12h-1.1V5.7h1.1v.7c.4-.6.9-.8 1.5-.8.2 0 .4 0 .5.1v.9zM36.4 12.1c-.9 0-1.6-.3-2.1-.8s-.9-1.3-.9-2.3v-.2c0-.6.1-1.2.4-1.7s.6-.9 1-1.2.9-.4 1.4-.4c.8 0 1.5.3 1.9.8s.7 1.3.7 2.3v.5h-4.3c0 .6.2 1.1.5 1.5s.8.6 1.3.6c.4 0 .7-.1 1-.2s.5-.4.7-.6l.7.5c-.5.8-1.3 1.2-2.3 1.2zm-.2-5.7c-.4 0-.8.2-1.1.5s-.5.8-.6 1.3h3.2c0-.6-.2-1-.4-1.3s-.6-.5-1.1-.5zM39.8 8.8c0-1 .2-1.8.7-2.3s1.1-.9 1.8-.9 1.3.3 1.8.8V3h1.1v9h-1l-.1-.7c-.4.5-1 .8-1.8.8-.7 0-1.3-.3-1.8-.9s-.7-1.4-.7-2.4zm1.1.1c0 .7.1 1.3.4 1.7s.7.6 1.2.6c.7 0 1.2-.3 1.5-.9V7.4c-.3-.6-.8-.9-1.5-.9-.5 0-.9.2-1.2.6s-.4 1-.4 1.8zM55.2 8.9c0 1-.2 1.7-.7 2.3s-1 .9-1.8.9-1.4-.3-1.9-.8v.7h-1V3h1.1v3.4c.4-.5 1-.8 1.8-.8s1.4.3 1.8.9.7 1.3.7 2.4zm-1.1-.1c0-.7-.1-1.3-.4-1.7s-.7-.6-1.3-.6c-.7 0-1.2.3-1.5 1v2.7c.3.7.8 1 1.6 1 .5 0 .9-.2 1.2-.6s.4-1 .4-1.8zM58.6 10.4L60 5.7h1.2L58.6 13c-.4 1.1-1 1.6-1.9 1.6h-.2l-.4-.1v-.9h.3c.4 0 .7-.1.9-.2s.4-.4.5-.8l.2-.6-2.3-6.3H57l1.6 4.7z"}))}},2915:function(e,t,a){"use strict";var n=a(1),r=a.n(n),o=a(0),i=a.n(o),c=a(220),l=a(1001),s=a(3),u=function(e){var t=e.onFauxClick;return i.a.createElement("div",{className:"u-marg-b--medium"},i.a.createElement(l.a,{type:"positive"},i.a.createElement("p",null,Object(s.a)("content.promote_modal.connect_slack_link",{Link:i.a.createElement(c.a,{onClick:t})}))))};u.propTypes={onFauxClick:r.a.func},t.a=u},2920:function(e,t,a){"use strict";var n=a(10),r=a.n(n),o=a(11),i=a.n(o),c=a(7),l=a.n(c),s=a(12),u=a.n(s),d=a(13),m=a.n(d),p=a(8),b=a.n(p),g=a(5),f=a.n(g),h=a(15),v=a.n(h),y=a(4),O=a.n(y),E=a(1),j=a.n(E),_=a(0),C=a.n(_),I=a(510),N=a(21),k=a(129),S=a(50),w=a(3);function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=b()(e);if(t){var r=b()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return m()(this,a)}}var F=function(e){u()(a,e);var t=A(a);function a(e){var n;return r()(this,a),(n=t.call(this,e)).state={description:e.media.get("description")||""},n.handleRemove=n.handleRemove.bind(l()(n)),n.handleSetCover=n.handleSetCover.bind(l()(n)),n.handleOnClick=n.handleOnClick.bind(l()(n)),n.getImageStyle=n.getImageStyle.bind(l()(n)),n}return i()(a,[{key:"shouldComponentUpdate",value:function(e,t){return this.props.isAddEdit!==e.isAddEdit||this.props.isDragging!==e.isDragging||this.props.index!==e.index||this.state.description!==t.description||this.props.media.get("id")!==e.media.get("id")||this.props.media.get("thumbnailImg")!==e.media.get("thumbnailImg")||this.props.media.get("isVideo")!==e.media.get("isVideo")||this.props.media.get("isCover")!==e.media.get("isCover")||this.props.media.get("description")!==e.media.get("description")||this.props.media.get("thumbnailImgLocal")!==e.media.get("thumbnailImgLocal")||this.props.media.get("percentage")!==e.media.get("percentage")||this.props.media.get("isUploaded")!==e.media.get("isUploaded")}},{key:"handleRemove",value:function(e){e.preventDefault(),this.props.onRemove(this.props.media.get("id"),this.props.index)}},{key:"handleSetCover",value:function(e){e.preventDefault(),this.props.onSetCover(this.props.media.get("id"),this.props.index)}},{key:"handleOnClick",value:function(e){e.preventDefault(),this.props.onClick(this.props.media.get("id"),this.props.index)}},{key:"getImageStyle",value:function(e){return{backgroundImage:"url('".concat(e,"')")}}},{key:"render",value:function(){var e=this,t=this.props,a=t.media,n=t.isAddEdit,r=t.canSetCover,o=t.descriptionInput,i=t.isDragging,c=t.connectDragDrop,l=t.connectDragHandle,s=a.get("img"),u=a.get("isVideo"),d=a.get("isCover"),m=".gif"===(s||"").substring((s||"").length-4)?s:a.get("thumbnailImgLocal")||a.get("thumbnailImg");"native_video"===a.get("videoProvider")&&null===a.get("thumbnailImg")&&(m="".concat(S.b,"/play_242.png"));var p=l(C.a.createElement("div",{className:"AlbumSquare-handle"})),b=n&&!a.get("isUploaded"),g=v()("AlbumSquare","Drop-item",{"AlbumSquare--edit":n,"PlayButton-trigger":u&&!n,"is-uploading":b,"Drop-placeholder":i}),f=function(t){return C.a.createElement("div",{className:"AlbumSquare-inner ImageOptions-trigger",style:e.getImageStyle(t)},b&&a.get("percentage")<=0&&C.a.createElement(k.a,null),n&&C.a.createElement("div",{className:"ImageOptions ImageOptions--small"},!d&&C.a.createElement("button",{type:"button",className:"ImageOptions-button ImageOptions-button--delete",onClick:e.handleRemove},C.a.createElement(N.a,{isLegacy:!0,name:"delete"}))),u&&!n&&C.a.createElement("div",{className:"PlayButton"},C.a.createElement(N.a,{isLegacy:!0,name:"play"})),u&&n&&C.a.createElement("div",{className:"AlbumSquare-videoIconContainer"},C.a.createElement(N.a,{isLegacy:!0,name:"video"})),d&&n&&C.a.createElement("div",{className:"ImageOptions ImageOptions--small ImageOptions--left is-static"},C.a.createElement("div",{className:"ImageOptions-text"},Object(w.a)("content.album.cover"))),!d&&n&&r&&C.a.createElement("div",{className:"ImageOptions ImageOptions--small ImageOptions--left",onClick:e.handleSetCover},C.a.createElement("div",{className:"ImageOptions-text"},Object(w.a)("content.album.make_cover"))),a.get("description")&&!n&&C.a.createElement("div",{className:"AlbumSquare-caption"},a.get("description")),n?p:C.a.createElement("button",{"aria-label":Object(w.a)("gallery.open_light_box_label"),type:"button",className:"AlbumSquare-button",onClick:e.handleOnClick}))};return c(C.a.createElement("div",{className:"u-grid-item small-6 medium-3"},C.a.createElement("div",{className:g},b&&C.a.createElement("div",{className:"AlbumSquare-loading"},C.a.createElement("div",{className:"AlbumSquare-loading-bar theme--bg",style:{width:"".concat(a.get("percentage"),"%")}})),n?f(m):C.a.createElement(I.a,{src:new O.a.List([m,a.get("downloadUrl")])},(function(e){var t=e.loaded,a=e.loading,n=e.src;return t||a?f(n):C.a.createElement("div",{className:"AlbumSquare-inner ImageOptions-trigger"},C.a.createElement(k.a,null))})),n&&C.a.createElement("div",{className:"AlbumSquare-description"},C.a.createElement("div",{className:"Field Field--compact"},o)))))}}]),a}(C.a.Component);f()(F,"propTypes",{media:j.a.instanceOf(O.a.Map).isRequired,isAddEdit:j.a.bool,onClick:j.a.func,onSetCover:j.a.func,descriptionInput:j.a.node,onRemove:j.a.func,canSetCover:j.a.bool,isDragging:j.a.bool,connectDragDrop:j.a.func,connectDragHandle:j.a.func}),f()(F,"defaultProps",{onClick:function(){},onSetCover:function(){},onRemove:function(){},isDragging:!1,canSetCover:!0,connectDragDrop:function(e){return e},connectDragHandle:function(e){return e}}),t.a=F},2921:function(e,t,a){"use strict";var n=a(193),r=a(194),o=a(2920);t.a=Object(r.a)(n.a)(o.a)},2922:function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var n=a(4),r=a.n(n),o=a(232),i=a(555),c=a(32),l=a(234),s=a(139),u=a(170);function d(e){var t=e.get("body"),a=Object(s.e)(t),n=e.get("listOfInlineVideos");return t&&n&&n.size?(n.forEach((function(e){var t=e.get("id"),n=Object(o.h)(t,a);if(n){var r=n.parentElement;null!=r&&r.querySelector(".fr-video-processing-overlay")&&Object(o.a)(n)}})),e.set("body",a.innerHTML)):e}function m(e,t,a,n){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new r.a.List([]),m=t.set("siteId",a||null).set("body",Object(i.b)(t.get("body")));if(m=d(m=(m=m.set("body",Object(l.a)(m.get("body")))).set("body",Object(l.k)(m.get("body")))),"event"===n){if((m=m.set("hasRsvp","yes"===m.get("hasRsvp"))).get("rsvp")){var p=m.getIn(["rsvp","hasDueDate"]);m=(m=m.setIn(["rsvp","dueAtDate"],p?m.getIn(["rsvp","dueAtDate"]):null).deleteIn(["rsvp","hasDueDate"])).setIn(["rsvp","capacityCount"],parseInt(m.getIn(["rsvp","capacityCount"]),10)||null)}if((m=(m=m.update("directions",new r.a.List,(function(e){return e.filter((function(e){return e&&""!==e.trim()}))}))).set("hasDirections",!!m.get("directions").size)).get("isAllDay")){var b=Object(c.j)(m.get("startsAt"),(function(){return Object(u.f)(m.get("timezoneIso"),m.get("startsAt"))})),g=Object(c.j)(m.get("endsAt"),(function(){return Object(u.f)(m.get("timezoneIso"),m.get("endsAt"))}));m=m.set("startsAt",b.hours(0).minutes(0).seconds(0).format()).set("endsAt",g.hours(23).minutes(59).seconds(59).format())}m=m.set("startsAt",Object(u.b)(m.get("startsAt"))).set("endsAt",Object(u.b)(m.get("endsAt")))}if("page"===n){var f=s.find((function(e){return e.get("id")===m.get("category")}));m=m.set("category",new r.a.Map({id:(null==f?void 0:f.get("id"))||null,categoryId:(null==f?void 0:f.get("categoryId"))||(null==f?void 0:f.get("id"))||null,name:(null==f?void 0:f.get("name"))||m.get("category")}))}if("album"===n){(m.get("coverImageMediaId")||"").startsWith("_tempfile")&&(m=m.set("coverImageMediaId",null));var h=m.get("listOfAlbumMedia").filter((function(e){return!e.get("id").startsWith("_tempfile")}));m=m.set("listOfAlbumMedia",h)}if(m=m.update("listOfFiles",(function(e){return e.toList().map((function(e){return e.get("result")}))})),["img","imgLandscape","imgOriginal"].forEach((function(e){m.get("".concat(e,"File"))&&(m=m.set(e,m.get("".concat(e,"File")).get("fileUrl")).mergeIn(["".concat(e,"File")],{downloadUrl:null,thumbnailImg:null}))})),(m=m.set("listOfContentTopicIds",Object(l.c)(m.get("body")))).get("organizers")&&o){var v=(o.get("organizers")||[]).map((function(e){return e.get("id")}));m=m.set("listOfOrganizers",m.get("organizers").map((function(e){return-1===v.indexOf(e.get("id"))?e.set("id",null):e}))).delete("organizers")}return null===e&&(["imgFile","imgLandscapeFile","imgOriginalFile"].forEach((function(e){m.get(e)&&(m=m.setIn([e,"id"],null))})),m=m.update("listOfFiles",(function(e){return e.map((function(e){return e.set("id",null)}))}))),m=m.remove("publishImmediately").remove("publishToPreset").remove("publishIndefinitely")}},2923:function(e,t,a){"use strict";var n=a(5),r=a.n(n),o=a(15),i=a.n(o),c=a(1),l=a.n(c),s=a(0),u=a.n(s);function d(e){var t,a=e.children,n=e.isVisible,o=e.isFixed,c=e.isHiddenOnMobile,l=e.isDisabledWhileSubmitting,s=e.align,d=i()((t={ContentBar:!0},r()(t,"ContentBar--".concat(s),!0),r()(t,"is-fixed",o),r()(t,"is-visible",n),r()(t,"u-sm-hide",c),r()(t,"is-disabledWhileSubmitting",l),t));return u.a.createElement("div",{className:d},u.a.createElement("div",{className:"row row--maintain"},u.a.createElement("div",{className:"column"},u.a.createElement("div",{className:"ContentBar-inner u-cf"},a))))}d.propTypes={children:l.a.node,isFixed:l.a.bool,isVisible:l.a.bool,isHiddenOnMobile:l.a.bool,isDisabledWhileSubmitting:l.a.bool,align:l.a.oneOf(["left","center","right"])},d.defaultProps={isVisible:!0,isHiddenOnMobile:!1,isDisabledWhileSubmitting:!1,align:"right"},t.a=d},2924:function(e,t,a){"use strict";var n=a(1),r=a.n(n),o=a(0),i=a.n(o),c=a(125),l=a(287);function s(e){var t=e.label,a=e.children,n=e.fontStyle,r=e.isInitiallyActive,o=Object(l.a)(r),s=o.isActive,u=o.toggle;return s?a||null:i.a.createElement(c.a,{isInlineBlock:!0,icon:"circle-plus",color:"brand",label:t,onClick:u,hasCurrentColorIcon:!0,iconSourceSize:17,fontStyle:n})}s.propTypes={label:r.a.string.isRequired,children:r.a.node.isRequired,fontStyle:r.a.string,isInitiallyActive:r.a.bool},s.defaultProps={fontStyle:"b4",isInitiallyActive:!1},t.a=s},2925:function(e,t,a){"use strict";var n=a(5),r=a.n(n),o=a(15),i=a.n(o),c=a(1),l=a.n(c),s=a(0),u=a.n(s),d=a(21),m=a(168);function p(e){var t=e.img,a=e.layout,n=e.caption,o=e.canEdit,c=i()(r()({Banner:!0,"Banner--hasAdminBar":o},"Banner--".concat(a),!0));return u.a.createElement("figure",{className:c},u.a.createElement("div",{className:"Banner-imageContainer"},u.a.createElement(m.a,{imageClassName:"Banner-image",img:t,size:"fullscreen"===a?{desktop:"1086px",mobile:"100vw"}:{desktop:"670px",mobile:"calc(100vw - 32px)"},errorRender:function(){return u.a.createElement("div",{className:"Banner-coverImage u-imageCover"},u.a.createElement("div",{className:"Banner-image-placeholder u-posAbsoluteCenter"},u.a.createElement(d.a,{name:"albums"})))},aspectRatio:!1})),n&&u.a.createElement("figcaption",{className:"Banner-figcaption"},n))}p.propTypes={img:l.a.string.isRequired,layout:l.a.string,caption:l.a.string},t.a=p},3046:function(e,t,a){"use strict";var n=a(31),r=a.n(n),o=a(24),i=a.n(o),c=a(10),l=a.n(c),s=a(11),u=a.n(s),d=a(7),m=a.n(d),p=a(12),b=a.n(p),g=a(13),f=a.n(g),h=a(8),v=a.n(h),y=a(5),O=a.n(y),E=a(2922),j=a(4),_=a.n(j),C=a(1),I=a.n(C),N=a(0),k=a.n(N),S=a(18),w=a(37),A=a(931),F=a(166),M=a(355),R=a(14),T=a(94),x=a(62),L=a(2921),P=a(1018),D=a(496),U=a(1182),V=a(21),B=a(504),z=a(16),q=a.n(z),H=a(123);function W(e){var t=[e.label&&"".concat(e.label).concat(e.isRequired?" *":""),e.placeholder].filter((function(e){return!!e})).join(" - "),a=Object(H.a)(e.id,e.input.id);return k.a.createElement("textarea",q()({className:"Field-textarea",id:a},e.input,{placeholder:t,disabled:!0===e.isDisabled,maxLength:e.maxLength,onChange:function(t){e.input.onChange(t),"function"==typeof e.onChange&&e.onChange(t)}}))}W.propTypes={id:I.a.string,label:I.a.string,placeholder:I.a.string,input:I.a.shape({}).isRequired,maxLength:I.a.number,isDisabled:I.a.bool};var G=W,K=a(15),J=a.n(K),Q=a(55),Z=a(52),X=a(113),$=a(3);var Y=Object(X.a)((function(e){return{name:Z.cc,id:"commonId",title:Object($.a)("content.edit.album_upload.modal_heading"),classes:["Modal--mini"]}}))((function(e){var t=e.onAddButtonClick,a=e.close,n=e.handleVideoUrlChange,r=e.videoUrl,o=e.videoError,i=e.isVideoLoading,c=J()({Field:!0,"Field--hasNoInternalLabel":!0,"u-marg-b--medium":!0,"has-error":o});return k.a.createElement(k.a.Fragment,null,k.a.createElement("div",{className:"Modal-content Modal-content--forms"},k.a.createElement("p",{className:"u-marg-b--mediumlarge"},Object($.a)("content.edit.album_upload.modal_info")),k.a.createElement("h3",{className:"type--h6 type--title u-marg--small"},Object($.a)("file.upload_video_label")),k.a.createElement("div",{className:c},k.a.createElement("input",{type:"text",className:"Field-input ".concat(i?"Field--hasIcon":""),value:r,onChange:n,placeholder:Object($.a)("field.video_url.placeholder")}),i&&k.a.createElement("span",{className:"Field-iconContainer"},k.a.createElement(B.a,null)),o&&k.a.createElement("div",{className:"Field-error"},k.a.createElement("span",null,o)))),k.a.createElement("div",{className:"Strip Strip--modal"},k.a.createElement(Q.a,{label:Object($.a)("button_label.add_video"),onClick:function(){t(a)},appearance:"brand",size:"large"})))})),ee=a(50),te=a(90),ae=a(104),ne=a(658);function re(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function oe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?re(Object(a),!0).forEach((function(t){O()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):re(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function ie(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=v()(e);if(t){var r=v()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return f()(this,a)}}function ce(e,t){return e.findIndex((function(e){return e.get("id")===t}))}var le=function(e){b()(a,e);var t=ie(a);function a(e){var n;return l()(this,a),(n=t.call(this,e)).state={videoUrl:"",videoError:null,isVideoLoading:!1},n.handleUpload=n.handleUpload.bind(m()(n)),n.addVideo=n.addVideo.bind(m()(n)),n.handleVideoAdded=n.handleVideoAdded.bind(m()(n)),n.handleVideoUrlChange=n.handleVideoUrlChange.bind(m()(n)),n.handleVideoKeyDown=n.handleVideoKeyDown.bind(m()(n)),n.handleMove=n.handleMove.bind(m()(n)),n.handleRemove=n.handleRemove.bind(m()(n)),n}return u()(a,[{key:"handleUpload",value:function(e){var t=this.props,a=t.contentId,n=t.siteId,r=t.isNativeVideoEnabled,o=e;Array.isArray(e)||(o=[e]),this.props.uploadFiles(a,o,this,n,r)}},{key:"addVideo",value:function(e){var t=this,a=Object(ae.b)(this.state.videoUrl);a?(this.setState({videoUrl:"",videoError:null,isVideoLoading:!0}),this.props.addVideo(this.props.contentId,a,this).then((function(){t.setState({isVideoLoading:!1}),"function"==typeof e&&e()})).catch((function(){t.setState({isVideoLoading:!1}),t.setState({videoError:Object($.a)("form_error.unrecognized_video_url")})}))):(this.setState({isVideoLoading:!1}),this.setState({videoError:Object($.a)("form_error.unrecognized_video_url")}))}},{key:"handleVideoAdded",value:function(e){var t=this;setTimeout((function(){t.addVideo(e)}))}},{key:"handleVideoKeyDown",value:function(e){var t=this;13===e.which&&(e.preventDefault(),this.state.videoUrl&&setTimeout((function(){t.addVideo()})))}},{key:"handleVideoUrlChange",value:function(e){this.setState({videoUrl:e.target.value,videoError:null})}},{key:"handleMove",value:function(e,t){var a=ce(this.props.input.value,e),n=ce(this.props.input.value,t),r=this.props.input.value.get(a),o=this.props.input.value.splice(a,1).splice(n,0,r);this.props.input.onChange(o)}},{key:"handleRemove",value:function(e,t){this.props.input.onChange(this.props.input.value.remove(t))}},{key:"renderVideoUrlField",value:function(e){return k.a.createElement("div",{className:"DropZone-split u-sm-hide"},k.a.createElement("div",{className:"DropZone-inner"},k.a.createElement("div",{className:"DropZone-iconContainer"},k.a.createElement(V.a,{name:"dropzone-video",sourceSize:"60"})),k.a.createElement("span",{className:"type--h4 type--500 u-marg-l--small u-inlineBlock u-verticalAlign--middle"},Object($.a)("file.upload_video_label")),k.a.createElement("div",{className:"DropZone-body"},k.a.createElement("div",{className:"DropZone-input DropZone-input--noLabel"},k.a.createElement("div",{className:"Field ".concat(this.state.videoError?"has-error":"")},k.a.createElement("input",{type:"text",className:"Field-input ".concat(e?"Field--hasIcon":""),value:this.state.videoUrl,onChange:this.handleVideoUrlChange,onPaste:this.handleVideoAdded,onKeyDown:this.handleVideoKeyDown,placeholder:Object($.a)("field.video_url.placeholder")}),e&&k.a.createElement("span",{className:"Field-iconContainer"},k.a.createElement(B.a,null)),this.state.videoError&&k.a.createElement("div",{className:"Field-error"},k.a.createElement("span",null,this.state.videoError)))))))}},{key:"renderVideoUrlModalLink",value:function(e){var t=this;return k.a.createElement(k.a.Fragment,null,k.a.createElement("button",{className:"type--fauxLink",type:"button",onClick:e},Object($.a)("content.edit.album_upload.video_url_label")),k.a.createElement(Y,{onAddButtonClick:this.handleVideoAdded,handleVideoUrlChange:function(e){return t.handleVideoUrlChange(e)},videoUrl:this.state.videoUrl,videoError:this.state.videoError,isVideoLoading:this.state.isVideoLoading}))}},{key:"renderVideoUploadOptions",value:function(e){return k.a.createElement("div",{className:"type--b4"},k.a.createElement(P.a,{delimiter:", "},k.a.createElement("span",{className:"type--secondary"},Object($.a)("content.edit.album_upload.drop_here_label")),k.a.createElement(U.a,{upload:this.handleUpload,text:Object($.a)("content.edit.album_record_video_label"),isFeed:!1})),this.renderVideoUrlModalLink(e))}},{key:"render",value:function(){var e=this,t=this.props,a=t.input,n=t.canSetCover,r=t.items,o=t.isNativeVideoEnabled,i=t.openVideoUrlInputModal,c=t.disableVideoUrlInputModal,l=this.state.isVideoLoading;return k.a.createElement("div",null,k.a.createElement("div",{className:"u-marg-t--xxlarge u-marg-b--xxlarge"},k.a.createElement("div",{className:"row"},k.a.createElement("div",{className:"large-centered column Content-column large-8"},k.a.createElement("div",{className:"Content-columnInner--edit"},k.a.createElement(D.a,{fileType:o?["image","video"]:"image",size:"large",isMulti:!0,onUpload:this.handleUpload,maximumUploadFilesize:!o&&10485760,isLarge:!0,icon:o?"dropzone-images-videos":"dropzone-images",hasLargeButton:!0,directionsText:o?Object($.a)("dropzone.drop_type_add_images_and_videos"):Object($.a)("dropzone.drop_type_image_here_plural"),ignoreUploadPermissions:!0},!o||c?this.renderVideoUrlField(l):this.renderVideoUploadOptions(i)))))),r&&r.size>0&&k.a.createElement("div",{className:"u-marg--xxlarge"},k.a.createElement("div",{className:"u-grid u-grid--small"},r.map((function(t,r){if(!t)return null;var o=k.a.createElement(w.Field,{name:"".concat(a.name,"[").concat(r,"].description"),component:G,placeholder:Object($.a)("field.description.placeholder"),maxLength:255});return k.a.createElement(L.a,{id:t.get("id"),media:t.set("isCover",t.get("id")===e.props.coverImageMediaId),key:t.get("id"),index:r,isAddEdit:!0,canSetCover:n,onRemove:e.handleRemove,onSetCover:e.props.onSetCover,onMove:e.handleMove,descriptionInput:o})})))))}}]),a}(k.a.PureComponent);O()(le,"propTypes",{maxFields:I.a.number,canSetCover:I.a.bool,onSetCover:I.a.func,isNativeVideoEnabled:I.a.bool,disableVideoUrlInputModal:I.a.bool}),O()(le,"defaultProps",{maxFields:500,canSetCover:!1,onSetCover:function(){},isNativeVideoEnabled:!1,disableVideoUrlInputModal:!1});t.a=Object(S.connect)((function(e,t){return{items:(t.input.value||new _.a.List).map((function(t){return e.getIn(["albumMedia",t.get("id"),"result"])})).filter((function(e){return!!e}))}}),(function(e,t){function a(a){return a&&"_new"!==a?Promise.resolve(a):e(Object(F.J)("album",null,t.getFormValues?Object(E.a)(t.contentId,t.getFormValues(),t.siteId,"album",t.content):new _.a.Map,"predraft")).then((function(e){var a=e.contentId;return Object(te.e)({pathname:"".concat(t.baseUrl,"/").concat(a,"/edit")},!0),a}))}function n(e,a){var n=a.map((function(e){var t=i()(e,1)[0];return new _.a.Map({id:t,description:""})})),o=Object(x.b)().getState().getIn(["form",t.formName,"values",t.input.name]);o.size||e.props.onSetCover(n[0].get("id")),e.props.input.onChange(o.unshift.apply(o,r()(n)))}function o(e,a,n){var r=Object(x.b)().getState().getIn(["form",t.formName,"values",t.input.name]),o=ce(r,a);if(o>=0){var i=r.getIn([o,"description"]);e.props.input.onChange(r.set(o,new _.a.Map({id:n,description:i})));var c=Object(x.b)().getState().getIn(["form",t.formName,"values","coverImageMediaId"]);c&&c===a&&e.props.onSetCover(n)}}return{uploadFiles:function(r,i,c,l,s){return t.total>=ee.l?(this.addMaxMediaCountExceededWarning(),null):a(r).then((function(t){setTimeout((function(){Object(ne.a)("content-upload-".concat(t),e(Object(A.i)(t,i,(function(e){return n(c,e)}),(function(e,t){return o(c,e,t)}),l,s)))}),10)}))},addVideo:function(r,i,c){return t.total>=ee.l?(this.addMaxMediaCountExceededWarning(),null):new Promise((function(t,l){return a(r).then((function(a){setTimeout((function(){var r=function(e){return n(c,e)},s=function(e,t){return o(c,e,t)};Object(ne.a)("content-upload-".concat(a),e(Object(M.a)(i.url)).then((function(n){var o=oe(oe({},i),{},{thumbnailImg:n&&n.get("thumbnail_url")||null,title:n&&n.get("title")||null});return e(Object(A.a)(a,o,r,s)).then(t).catch(l)})).catch(l))}),10)}))}))},addMaxMediaCountExceededWarning:function(){return e(Object(R.l)(Object($.a)("form_error.album_too_large")))},openVideoUrlInputModal:function(){return e(Object(T.open)(Z.cc,"commonId"))}}}))(le)},3050:function(e,t,a){"use strict";var n=a(10),r=a.n(n),o=a(11),i=a.n(o),c=a(7),l=a.n(c),s=a(12),u=a.n(s),d=a(13),m=a.n(d),p=a(8),b=a.n(p),g=a(5),f=a.n(g),h=a(4),v=a.n(h),y=a(1),O=a.n(y),E=a(0),j=a.n(E),_=a(18),C=a(166),I=a(14),N=a(94),k=a(15),S=a.n(k),w=a(37),A=a(510),F=a(21),M=a(245),R=a(3);function T(e){var t=e.layout,a=e.img,n=e.imgOriginal,r=e.onEdit,o=e.onClear,i=e.percentage,c=null!==i,l=S()(f()({Banner:!0,"Banner--hasAdminBar":!0},"Banner--".concat(t),!0)),s=S()({column:!0,"Content-column":!0,"large-centered":!0,"large-12":"fullscreen"===t,"large-8":"fullscreen"!==t}),u=S()({"Content-columnInner":!0,"Content-columnInner--edit":"fullscreen"!==t,"large-centered":!0});return j.a.createElement("div",{className:"row"},j.a.createElement("div",{className:s},j.a.createElement("div",{className:u},j.a.createElement("figure",{className:l},j.a.createElement("div",{className:"Banner-imageContainer ImageOptions-trigger"},j.a.createElement(A.a,{src:a},(function(e){return e.error?j.a.createElement("div",{className:"Banner-coverImage u-imageCover"},j.a.createElement("div",{className:"Banner-image-placeholder u-posAbsoluteCenter"},j.a.createElement(F.a,{name:"albums"}))):j.a.createElement("img",{className:"Banner-image",src:a,alt:""})})),j.a.createElement("h3",{className:"Banner-hiddenText type--h5"},Object(R.a)("manage_banner.cover_image_hidden")),c&&j.a.createElement("div",{className:"Banner-loading"},j.a.createElement("div",{className:"Banner-loading-bar theme--bg",style:{width:"".concat(i,"%")}})),j.a.createElement("div",{className:"ImageOptions"},n&&"hidden"!==t&&j.a.createElement("div",{className:"ImageOptions-button ImageOptions-button--edit",onClick:r},j.a.createElement(F.a,{isLegacy:!0,name:"edit"})),j.a.createElement("div",{className:"ImageOptions-button ImageOptions-button--delete",onClick:o},j.a.createElement(F.a,{isLegacy:!0,name:"delete"}))),j.a.createElement("div",{className:"Banner-overlay"},j.a.createElement("div",{className:"u-grid u-grid--small"},j.a.createElement("div",{className:"u-grid-item small-4"},j.a.createElement("div",{className:"CustomInput"},j.a.createElement(w.Field,{name:"imgLayout",id:"image-width-small",value:"small",className:"CustomInput-field",component:"input",type:"radio"}),j.a.createElement("label",{htmlFor:"image-width-small",className:"CustomInput-label"},j.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"65",height:"65",viewBox:"0 0 65 65"},j.a.createElement("defs",null,j.a.createElement("rect",{id:"banner-small-a",width:"65",height:"65",rx:"2"})),j.a.createElement("g",{fill:"none",fillRule:"evenodd",opacity:".9"},j.a.createElement("use",{fill:"none",xlinkHref:"#banner-small-a"}),j.a.createElement("rect",{width:"64",height:"64",x:".5",y:".5",stroke:"#FFF",rx:"2"}),j.a.createElement("rect",{width:"37",height:"1",x:"14",y:"51",fill:"#FFF",opacity:".6",rx:".5"}),j.a.createElement("rect",{width:"37",height:"1",x:"14",y:"54",fill:"#FFF",opacity:".6",rx:".5"}),j.a.createElement("rect",{width:"12",height:"1",x:"14",y:"57",fill:"#FFF",opacity:".6",rx:".5"}),j.a.createElement("rect",{width:"36",height:"1",x:"14",y:"48",fill:"#FFF",opacity:".6",rx:".5"}),j.a.createElement("rect",{width:"37",height:"1",x:"14",y:"45",fill:"#FFF",opacity:".6",rx:".5"}),j.a.createElement("rect",{width:"12",height:"1",x:"14",y:"42",fill:"#FFF",opacity:".6",rx:".5"}),j.a.createElement("rect",{width:"37",height:"30",x:"14",y:"8",fill:"#FFF",rx:"2"})))))),j.a.createElement("div",{className:"u-grid-item small-4"},j.a.createElement("div",{className:"CustomInput"},j.a.createElement(w.Field,{name:"imgLayout",id:"image-width-fullscreen",value:"fullscreen",className:"CustomInput-field",component:"input",type:"radio"}),j.a.createElement("label",{htmlFor:"image-width-fullscreen",className:"CustomInput-label"},j.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"65",height:"65",viewBox:"0 0 65 65"},j.a.createElement("defs",null,j.a.createElement("rect",{id:"banner-fullscreen-a",width:"65",height:"65",rx:"2"})),j.a.createElement("g",{fill:"none",fillRule:"evenodd",opacity:".9"},j.a.createElement("use",{fill:"none",xlinkHref:"#banner-fullscreen-a"}),j.a.createElement("rect",{width:"64",height:"64",x:".5",y:".5",stroke:"#FFF",rx:"2"}),j.a.createElement("g",{fill:"#FFF",opacity:".6",transform:"translate(14 42)"},j.a.createElement("rect",{width:"37",height:"1",y:"9",rx:".5"}),j.a.createElement("rect",{width:"37",height:"1",y:"12",rx:".5"}),j.a.createElement("rect",{width:"12",height:"1",y:"15",rx:".5"}),j.a.createElement("rect",{width:"36",height:"1",y:"6",rx:".5"}),j.a.createElement("rect",{width:"37",height:"1",y:"3",rx:".5"}),j.a.createElement("rect",{width:"12",height:"1",rx:".5"})),j.a.createElement("path",{fill:"#FFF",d:"M2 1h61a1 1 0 0 1 1 1v34H1V2a1 1 0 0 1 1-1z"})))))),j.a.createElement("div",{className:"u-grid-item small-4"},j.a.createElement("div",{className:"CustomInput"},j.a.createElement(w.Field,{name:"imgLayout",id:"image-width-hidden",value:"hidden",className:"CustomInput-field",component:"input",type:"radio"}),j.a.createElement("label",{htmlFor:"image-width-hidden",className:"CustomInput-label"},j.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"65",height:"65",viewBox:"0 0 65 65"},j.a.createElement("defs",null,j.a.createElement("rect",{id:"banner-hidden-a",width:"65",height:"65",rx:"2"})),j.a.createElement("g",{fill:"none",fillRule:"evenodd"},j.a.createElement("use",{fill:"none",xlinkHref:"#banner-hidden-a"}),j.a.createElement("rect",{width:"64",height:"64",x:".5",y:".5",stroke:"#FFF",rx:"2"}),j.a.createElement("g",{fill:"#FFF",opacity:".6",transform:"translate(14 9)"},j.a.createElement("rect",{width:"37",height:"1",y:"9",rx:".5"}),j.a.createElement("rect",{width:"37",height:"1",y:"12",rx:".5"}),j.a.createElement("rect",{width:"12",height:"1",y:"15",rx:".5"}),j.a.createElement("rect",{width:"36",height:"1",y:"6",rx:".5"}),j.a.createElement("rect",{width:"37",height:"1",y:"3",rx:".5"}),j.a.createElement("rect",{width:"12",height:"1",rx:".5"}),j.a.createElement("rect",{width:"12",height:"1",y:"46",rx:".5"}),j.a.createElement("rect",{width:"37",height:"1",y:"43",rx:".5"}),j.a.createElement("rect",{width:"37",height:"1",y:"40",rx:".5"}),j.a.createElement("rect",{width:"37",height:"1",y:"29",rx:".5"}),j.a.createElement("rect",{width:"37",height:"1",y:"32",rx:".5"}),j.a.createElement("rect",{width:"12",height:"1",y:"35",rx:".5"}),j.a.createElement("rect",{width:"36",height:"1",y:"26",rx:".5"}),j.a.createElement("rect",{width:"37",height:"1",y:"23",rx:".5"}),j.a.createElement("rect",{width:"37",height:"1",y:"20",rx:".5"})))))))))),j.a.createElement("figcaption",{className:"Banner-figcaption"},j.a.createElement(w.Field,{component:M.a,name:"imgCaption",placeholder:Object(R.a)("manage_banner.caption.placeholder"),maxLength:255,isMinimal:!0,isCompact:!0}))))))}T.propTypes={onClear:O.a.func.isRequired,onEdit:O.a.func.isRequired,progress:O.a.number},T.defaultProps={onClear:function(){},onEdit:function(){},progress:100};var x=T,L=a(496),P=a(2010),D=a(50),U=a(52),V=a(88),B=a(26),z=a(97),q=a(158),H=a(658);function W(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=b()(e);if(t){var r=b()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return m()(this,a)}}var G=2048e3,K=function(e){u()(a,e);var t=W(a);function a(e){var n;return r()(this,a),(n=t.call(this,e)).state={selectedFile:null,selectedImage:null,isRecropping:!1},n.openCropper=n.openCropper.bind(l()(n)),n.onCrop=n.onCrop.bind(l()(n)),n.selectNewImage=n.selectNewImage.bind(l()(n)),n.selectExistingImage=n.selectExistingImage.bind(l()(n)),n}return i()(a,[{key:"onCrop",value:function(e){var t=e.square,a=e.widescreen,n=e.original;if(Object(z.dataURItoBlob)(a).size>D.j)return this.props.showImageUploadErrorFlash(Object(R.a)("content.edit.large_cover_image_error")),void this.setState({selectedImage:null,selectedFile:null,isRecropping:!1});var r=this.state,o=r.isRecropping,i=r.selectedFile,c=i&&(v.a.Iterable.isIterable(i)?i.get("title"):i.name);this.props.change("img",t),this.props.change("imgLandscape",a),this.props.upload("img",Object(V.a)(c,"thumbnail"),t),this.props.upload("imgLandscape",Object(V.a)(c,"cover"),a),o?this.props.imgOriginal||this.props.change("imgOriginal",n):(this.props.change("imgOriginal",n),this.props.upload("imgOriginal",c,n))}},{key:"openCropper",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.setState({selectedImage:e,selectedFile:t,isRecropping:a}),this.props.openCropModal()}},{key:"selectNewImage",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=1/0;Object(q.f)()&&e.size>G&&(r=1080),Object(z.resizeImageForUpload)(e,r,1/0).then((function(r){return t.openCropper(r,n||e,a)})).catch((function(e){var a=null!=e&&e.message?Object(B.a)(e):Object(R.a)("image.file_upload_error_message");t.props.showImageUploadErrorFlash(a)}))}},{key:"selectExistingImage",value:function(e){var t=this;this.props.change("imgOriginalFile",e),Object(z.fileToDataUrl)(e).then((function(a){return t.selectNewImage(a,!0,e)}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.imgLandscape,n=t.imgOriginal,r=t.imgOriginalFile,o=t.isUploading,i=t.percentage,c=t.layout,l=t.change,s=t.siteId;return j.a.createElement("div",null,a?j.a.createElement(x,{layout:c,img:a,imgOriginal:n,percentage:o?i:null,onClear:function(e){e.preventDefault(),l("img",null),l("imgFile",null),l("imgLandscape",null),l("imgLandscapeFile",null),l("imgOriginal",null),l("imgOriginalFile",null),l("imgLayout","wide")},onEdit:function(t){t.preventDefault(),e.selectExistingImage(r)}}):j.a.createElement("div",{className:"row"},j.a.createElement("div",{className:"large-centered column Content-column large-8"},j.a.createElement("div",{className:"Content-columnInner--edit u-marg-b--xxlarge"},j.a.createElement(L.a,{directionsText:Object(R.a)("content.edit.add_cover_image"),fileType:"image",hasIntranetOption:!0,onUpload:this.selectNewImage,onSelect:this.selectExistingImage,size:"large",mediaManagerId:"content-cover-image",mediaManagerProps:{fileType:"image",title:Object(R.a)("content.edit.add_cover_image"),defaultSiteId:s},maximumUploadFilesize:10485760,helperText:Object(R.a)("content.edit.cover_image_size"),ignoreUploadPermissions:!0})))),j.a.createElement(P.a,{id:U.t,title:Object(R.a)("content.cover.cropper.title"),img:this.state.selectedImage,file:this.state.selectedFile,onCrop:this.onCrop,modalEvents:{onClose:function(){return e.setState({selectedImage:null,selectedFile:null,isRecropping:!1})}},buttonLabel:a?Object(R.a)("common.update"):Object(R.a)("common.add"),crops:[{id:"widescreen",aspectRatio:1.7777777777777777,label:Object(R.a)("common.aspect_ratio.169"),minWidth:1600,maxWidth:1600},{id:"square",aspectRatio:1,label:Object(R.a)("common.aspect_ratio.square"),minWidth:720,maxWidth:720}]}))}}]),a}(j.a.Component);f()(K,"propTypes",{contentId:O.a.string.isRequired,img:O.a.string});t.a=Object(_.connect)((function(e,t){var a=!1,n=0;return["imgFile","imgLandscapeFile","imgOriginalFile"].forEach((function(r){var o=t.getFormValue(r);"string"==typeof o&&e.getIn(["files",o,"uploading"])?(a=!0,n+=e.getIn(["files",o,"percentage"])):n+=100})),{isUploading:a,percentage:Math.round(n/3),imgLandscape:t.getFormValue("imgLandscape"),imgOriginal:t.getFormValue("imgOriginal"),imgOriginalFile:t.getFormValue("imgOriginalFile"),layout:t.getFormValue("imgLayout")}}),(function(e,t){return{openCropModal:function(){return e(Object(N.open)(U.L,U.t))},upload:function(a,n,r){return Object(H.a)("content-upload-".concat(t.contentId),e(Object(C.Y)(t.contentId,a,n,r,t.change)).then((function(e){return t.change("".concat(a,"File"),e),e})))},showImageUploadErrorFlash:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(R.a)("common.error_message");e(Object(I.f)(t))}}}))(K)},3412:function(e,t,a){"use strict";var n=a(24),r=a.n(n),o=a(22),i=a(0),c=a.n(i),l=a(69),s=a.n(l),u=a(81),d=a(18),m=a(166),p=a(55),b=a(1001),g=a(1007),f=a(243),h=a(17),v=a(232),y=a(3);function O(e){var t,a=e.content,n=Object(d.useSelector)((function(e){return Object(o.duration)(Object(h.z)(e)).asMonths()})),i=Object(d.useSelector)((function(e){return Object(f.b)(e,a)})),l=Object(d.useSelector)((function(e){return Object(f.c)(e,a)})),s=i&&"published"===a.get("status"),u=Object(d.useDispatch)(),O=Object(v.e)(l,a.get("expiresAt"),s),E=r()(O,3),j=E[0],_=E[1],C=E[2],I=l?Object(y.a)("content_validation.title_expired"):Object(y.a)("content_validation.title_required");t=l?Object(y.a)("content_validation.remain_unpublished_warning"):0===C||s?Object(y.a)("content_validation.unpublish_warning_today"):Object(y.a)("content_validation.unpublish_warning",{count:C});var N=s?j:"".concat(_," (").concat(j,")");return c.a.createElement("div",{className:"ContentViews-infoBox"},c.a.createElement(b.a,{type:l?"negative":"warning",title:"".concat(I,"  ").concat(N),isContentValidationBox:!0},c.a.createElement("p",{className:"u-marg-b--mediumlarge"},Object(y.a)("content_validation.intro",{count:n})),l?c.a.createElement(p.a,{size:"large",label:Object(y.a)("button_label.validate_and_publish"),type:"button",onClick:function(){return u(Object(m.ab)(a.get("contentId")))},appearance:"brand"}):c.a.createElement(c.a.Fragment,null,c.a.createElement(p.a,{size:"large",label:Object(y.a)("button_label.unpublish"),type:"button",onClick:function(){return u(Object(m.U)(a.get("contentId")))}}),c.a.createElement(p.a,{size:"large",label:Object(y.a)("button_label.validate"),type:"button",onClick:function(){return u(Object(m.Z)(a.get("contentId")))},appearance:"brand"})),c.a.createElement("p",{className:"u-marg-t--medium type--secondary type--b3"},c.a.createElement(g.a,{appearance:"tertiary",onClick:function(){return u(Object(m.m)(a.get("contentId"),l?"expired":"required"))}},Object(y.a)("button_label.dismiss_warning"))," ","(",t,")")))}O.propTypes={content:s.a.map},t.a=Object(u.c)(O)},3413:function(e,t,a){"use strict";(function(e){var n=a(20),r=a.n(n),o=a(34),i=a.n(o),c=a(0),l=a.n(c),s=a(55),u=a(220),d=a(52),m=a(113),p=a(560),b=a(3);t.a=Object(m.a)((function(e){return{name:d.y,id:e.contentId,title:Object(b.a)("content.event_updated_notification.modal_title"),classes:["Modal--mini"]}}))((function(t){var a=t.contentId,n=t.close,o=Object(p.c)(),c=Object(p.b)(),d=function(){var t=i()(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.Simpplr.Salesforce.Event.sendEventUpdateMail(a);case 3:o(Object(b.a)("content.event_updated_notification.success_flash")),n(),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),c(Object(b.a)("common.error_message"));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"Modal-content"},l.a.createElement("p",null,Object(b.a)("content.event_updated_notification.modal_text"))),l.a.createElement("div",{className:"Strip Strip--modal"},l.a.createElement("span",{className:"Strip-cancel"},l.a.createElement(u.a,{onClick:function(){o(Object(b.a)("content.event_updated_notification.in_app_notify.success_flash")),n()},label:Object(b.a)("content.event_updated_notification.button_label.cancel")})),l.a.createElement(s.a,{label:Object(b.a)("content.event_updated_notification.button_label.send"),type:"button",onClick:d,appearance:"brand"})))}))}).call(this,a(27))},3420:function(e,t,a){"use strict";(function(e){var n=a(1),r=a.n(n),o=a(0),i=a.n(o),c=a(2119),l=a(3421),s=a(21),u=a(3422),d=a(3424),m=a(52),p=a(266),b=a(3);function g(t){var a=t.content,n=t.onCommentClick,r=t.openModal,o=t.canShare,g=t.doMountModal;return a.get("isPublished")?i.a.createElement("div",{className:"ActionBar u-hidePrint"},i.a.createElement("div",{className:"ActionBar-item"},i.a.createElement(l.a,{id:a.get("id"),isLiked:a.get("isLiked"),type:"button",contentType:a.get("contentSubType")||a.get("type")},(function(e,t){return e?i.a.createElement("button",{className:"ActionBar-button theme--hover--fill theme--fill",onClick:t,type:"button",title:Object(b.a)("common.unlike_this_noun",{noun:Object(b.a)("common.content")})},i.a.createElement(s.a,{name:"like-filled"})):i.a.createElement("button",{className:"ActionBar-button theme--hover--fill",onClick:t,title:Object(b.a)("common.like_this_noun",{noun:Object(b.a)("common.content")}),type:"button"},i.a.createElement(s.a,{name:"like"}))})),a.get("likeCount")>0&&i.a.createElement("button",{type:"button",className:"ActionBar-count ActionBar-count--withModal",onClick:function(){return r(m.A,a.get("id"))}},a.get("likeCount")),g&&i.a.createElement(u.a,{id:a.get("id")})),n&&i.a.createElement("div",{className:"ActionBar-item"},i.a.createElement("button",{title:Object(b.a)("content.post.tooltip"),className:"ActionBar-button theme--hover--fill",type:"button",onClick:function(){n(),Object(p.b)("Comment Content",{content_type:a.get("contentSubType")||a.get("type")})}},i.a.createElement(s.a,{name:"comments"})),a.get("postCount")>0&&i.a.createElement("span",{className:"ActionBar-count"},a.get("postCount"))),i.a.createElement("div",{className:"ActionBar-item"},i.a.createElement(c.a,{id:a.get("id"),isStarred:a.get("isStarred"),contentType:a.get("contentSubType")||a.get("type")},(function(e,t){return e?i.a.createElement("button",{className:"ActionBar-button ActionBar-button--favorite is-favorited",onClick:t,type:"button",title:Object(b.a)("content.remove_from_favorites")},i.a.createElement(s.a,{name:"star-selected"})):i.a.createElement("button",{className:"ActionBar-button ActionBar-button--favorite",onClick:t,type:"button",title:Object(b.a)("content.add_to_favorites")},i.a.createElement(s.a,{name:"star"}))}))),o&&e.Simpplr.Settings.feedEnabled&&i.a.createElement("div",{className:"ActionBar-item"},i.a.createElement("button",{title:Object(b.a)("common.share_this_noun",{noun:Object(b.a)("common.content")}),type:"button",className:"ActionBar-button theme--hover--fill",onClick:function(){return r(m.J,a.get("id"))}},i.a.createElement(s.a,{name:"share"})),g&&i.a.createElement(d.a,{id:a.get("id"),content:a}))):null}g.propTypes={canShare:r.a.bool,doMountModal:r.a.bool,onCommentClick:r.a.func},g.defaultProps={doMountModal:!0},t.a=g}).call(this,a(27))},3421:function(e,t,a){"use strict";var n=a(10),r=a.n(n),o=a(11),i=a.n(o),c=a(7),l=a.n(c),s=a(12),u=a.n(s),d=a(13),m=a.n(d),p=a(8),b=a.n(p),g=a(1),f=a.n(g),h=a(0),v=a.n(h),y=a(18),O=a(166),E=a(2021),j=a(266);a(3);function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=b()(e);if(t){var r=b()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return m()(this,a)}}var C=function(e){u()(a,e);var t=_(a);function a(e){var n;return r()(this,a),(n=t.call(this,e)).like=n.like.bind(l()(n)),n.unlike=n.unlike.bind(l()(n)),n}return i()(a,[{key:"shouldComponentUpdate",value:function(e){return e.isLiked!==this.props.isLiked||e.id!==this.props.id}},{key:"trackAnalytics",value:function(){Object(j.b)("Like Content",{content_type:this.props.contentType})}},{key:"like",value:function(){this.trackAnalytics(),this.props.like(this.props.id)}},{key:"unlike",value:function(){this.trackAnalytics(),this.props.unlike(this.props.id)}},{key:"render",value:function(){var e=this.props,t=e.children,a=e.isLiked,n=e.id;return v.a.createElement(E.a,{context:"content",isLiked:a,onLike:this.like,onUnlike:this.unlike,id:n},t)}}]),a}(v.a.Component);C.propTypes={id:f.a.string.isRequired,isLiked:f.a.bool.isRequired,children:f.a.func},t.a=Object(y.connect)(null,{like:O.s,unlike:O.T})(C)},3422:function(e,t,a){"use strict";var n=a(1),r=a.n(n),o=a(0),i=a.n(o),c=a(1008),l=a(1014),s=a(52),u=a(113),d=a(3423),m=a(3);function p(e){var t=e.id,a=Object(d.a)(t),n=a.users,r=a.loading,o=a.canPaginate,s=a.loadMore;return i.a.createElement("div",{className:"Modal-content"},i.a.createElement(c.a,{itemComponent:l.a,users:n,isLoading:r,canPaginate:o,onLoadMore:s,showPopovers:!1}))}p.propTypes={id:r.a.string},t.a=Object(u.a)((function(e){var t=e.id;return{name:s.A,id:t,title:Object(m.a)("modal.users_that_like.title"),classes:["Modal--mini"]}}))(p)},3423:function(e,t,a){"use strict";(function(e){var n=a(4),r=a.n(n),o=a(1009);t.a=function(t){return Object(o.a)({endpoint:e.Simpplr.Salesforce.Content.getLikers,initialParams:new r.a.Map({id:t})})}}).call(this,a(27))},3424:function(e,t,a){"use strict";var n=a(4),r=a.n(n),o=a(1),i=a.n(o),c=a(0),l=a.n(c),s=a(18),u=a(166),d=a(14),m=a(1999),p=a(50),b=a(52),g=a(298),f=a(266),h=a(3),v=a(929);function y(e){var t=e.content,a=e.onShare,n="blog_post"===t.get("type"),r="public"===t.getIn(["site","access"]);return l.a.createElement(v.a,{name:b.J,id:t.get("id"),type:r||n?"news":"record",subjectId:r?"me":t.getIn(["site","chatterGroupId"]),typeLabel:Object(h.a)("common.".concat(t.get("type"))),url:t.get("url"),urlName:t.get("title"),onShare:a},l.a.createElement("div",{className:"u-pad--medium u-pad-b--none"},l.a.createElement("ul",null,l.a.createElement(m.a,{isCompact:!0,content:t,hasSiteImageFallback:!0}))))}y.propTypes={id:i.a.string.isRequired,content:i.a.instanceOf(r.a.Map).isRequired},t.a=Object(s.connect)(null,(function(e,t){return{onShare:function(a){var n=a.set("body",Object(g.b)(a.get("body")));return Object(g.c)(n.get("body"))>p.k?e(Object(d.f)(Object(h.a)("feed.create.too_many_mentions"))):(Object(f.b)("Share Content",{content_type:t.content.get("contentSubType")||t.content.get("type")}),e(Object(u.O)(t.id,n)))}}}))(y)},3425:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return k}));var n=a(20),r=a.n(n),o=a(34),i=a.n(o),c=a(10),l=a.n(c),s=a(11),u=a.n(s),d=a(7),m=a.n(d),p=a(12),b=a.n(p),g=a(13),f=a.n(g),h=a(8),v=a.n(h),y=a(5),O=a.n(y),E=a(1),j=a.n(E),_=a(0),C=a.n(_),I=a(2717);function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=v()(e);if(t){var r=v()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return f()(this,a)}}var k=function(t){b()(n,t);var a=N(n);function n(){var t;l()(this,n);for(var o=arguments.length,c=new Array(o),s=0;s<o;s++)c[s]=arguments[s];return t=a.call.apply(a,[this].concat(c)),O()(m()(t),"state",{loading:!1,result:null}),O()(m()(t),"load",i()(r.a.mark((function a(){var n,o,i,c,l,s;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=e.Simpplr,o=t.props,i=o.contentId,c=o.notificationId,t.setState({loading:!0,result:null}),a.next=5,n.Salesforce.Content.getNotificationMessage(i,c);case 5:l=a.sent,s=l.result,t.setState({loading:!1,result:s});case 8:case"end":return a.stop()}}),a)})))),t}return u()(n,[{key:"componentDidMount",value:function(){this.load()}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.contentId,n=t.notificationId;a===e.contentId&&n===e.notificationId||this.load()}},{key:"render",value:function(){var e=this.state,t=e.loading,a=e.result;return!t&&a&&a.message?C.a.createElement(I.a,a):null}}]),n}(C.a.Component);O()(k,"propTypes",{contentId:j.a.string.isRequired,notificationId:j.a.string.isRequired})}).call(this,a(27))},3426:function(e,t,a){"use strict";(function(e){var n=a(16),r=a.n(n),o=a(20),i=a.n(o),c=a(34),l=a.n(c),s=a(10),u=a.n(s),d=a(11),m=a.n(d),p=a(7),b=a.n(p),g=a(12),f=a.n(g),h=a(13),v=a.n(h),y=a(8),O=a.n(y),E=a(5),j=a.n(E),_=a(2922),C=a(3427),I=a(4),N=a.n(I),k=a(3428),S=a.n(k),w=a(3429),A=a.n(w),F=a(1116),M=a.n(F),R=a(0),T=a.n(R),x=a(18),L=a(36),P=a(37),D=a(991),U=a(931),V=a(121),B=a(166),z=a(14),q=a(94),H=a(989),W=a(190),G=a(2003),K=a(3432),J=a(2790),Q=a(2038),Z=a(52),X=a(2598),$=a(243),Y=a(30),ee=a(161),te=a(40),ae=a(232),ne=a(32),re=a(503),oe=a(90),ie=a(3),ce=a(74),le=a(47),se=a(658);function ue(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function de(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(a),!0).forEach((function(t){j()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ue(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function me(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=O()(e);if(t){var r=O()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return v()(this,a)}}var pe="CONTENT_EDIT_FORM",be=174e4,ge=function(t){f()(n,t);var a=me(n);function n(){var t;u()(this,n);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return t=a.call.apply(a,[this].concat(o)),j()(b()(t),"renewLock",(function(){t.renewLockIntervalId=window.setInterval(l()(i.a.mark((function a(){return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.Simpplr.Salesforce.Content.renewLock(t.props.contentId);case 2:case"end":return a.stop()}}),a)}))),6e4)})),j()(b()(t),"resetUserActivityTimer",M()((function(){clearTimeout(t.userActivityTimeoutId),t.userActivityTimeoutId=window.setTimeout((function(){t.destroyUserActivityTimer(),t.props.openSessionExpireModal()}),be)}),5e3)),j()(b()(t),"activateUserActivityTimer",(function(){window.addEventListener("scroll",t.resetUserActivityTimer),window.addEventListener("resize",t.resetUserActivityTimer),window.addEventListener("mousemove",t.resetUserActivityTimer),window.addEventListener("keydown",t.resetUserActivityTimer),t.renewLock()})),j()(b()(t),"destroyUserActivityTimer",(function(){window.removeEventListener("scroll",t.resetUserActivityTimer),window.removeEventListener("resize",t.resetUserActivityTimer),window.removeEventListener("mousemove",t.resetUserActivityTimer),window.removeEventListener("keydown",t.resetUserActivityTimer),clearTimeout(t.userActivityTimeoutId),clearInterval(t.renewLockIntervalId)})),j()(b()(t),"onImageInsert",(function(e){Object(se.a)("content-upload-".concat(t.props.contentId),new Promise((function(a){var n=Object(ce.e)(e),r=t.props.getFileByUrl(n);if(void 0!==r){var o=t.props.getFormValue("listOfInlineImages")||new N.a.List;0===o.filter((function(e){return e.get("fileUrl")===n})).size&&t.props.change("listOfInlineImages",o.push(r)),a()}else a()})))})),j()(b()(t),"onImageRemove",(function(e){var a=t.props.getFormValue("listOfInlineImages")||new N.a.List;t.props.change("listOfInlineImages",a.filter((function(t){return t.get("downloadUrl")!==e})))})),j()(b()(t),"onVideoInsert",(function(e,a){var n=t.props.getFormValue("listOfInlineVideos")||new N.a.List,r=t.props.getFileById(e).set("thumbnailUrl",a);0===n.filter((function(t){return t.get("externalFileId")===e})).size&&t.props.change("listOfInlineVideos",n.push(r))})),j()(b()(t),"onVideoRemove",(function(e){var a=t.props.getFormValue("listOfInlineVideos")||new N.a.List;t.props.change("listOfInlineVideos",a.filter((function(t){return t.get("externalFileId")!==e})))})),j()(b()(t),"onPublishFromChange",(function(e){var a="string"==typeof e?e:Object(ne.j)().set("hour",0).set("minute",0).set("second",0).format();t.props.change("publishAt",a),t.props.change("publishingStatus",Object(ne.n)(a)?"schedule":"immediate"),t.setPublishTo(t.props.getFormValue("publishToPreset"),a)})),j()(b()(t),"onPublishImmediatelyChange",(function(e){var a="";"immediately"===e&&(t.props.change("publishingStatus","immediate"),a=Object(ne.j)().set("hour",0).set("minute",0).set("second",0).format(),t.props.change("publishAt",a)),"date_from"===e&&(a=t.props.getFormValue("publishAt"),t.props.change("publishingStatus",Object(ne.n)(a)?"schedule":"immediate")),t.setPublishTo(t.props.getFormValue("publishToPreset"),a)})),j()(b()(t),"setPublishTo",(function(e,a){var n=a||Object(ne.j)(t.props.getFormValue("publishAt"));t.props.change("publishTo",Object(C.c)(e,n)),t.props.change("publishToPreset",e)})),j()(b()(t),"changeTopicSuggestionValues",(function(e,a){t.props.change("listOfSuggestedTopics",e),t.props.change("isAIEnabled",a)})),j()(b()(t),"trackSuggestedTopicsUsage",(function(e,a,n,r){var o=t.props.content.get("type"),i=t.props.content.get("status"),c=S()(n,a,"name"),l=A()(n,a,"name"),s=Q.c;"saveDraft"===e&&("new"===i&&(s=Q.a),"draft"===i&&(s=Q.b)),Object(te.l)(s,a,l,c,o,i,r)})),j()(b()(t),"handleFieldBlur",(function(e,a,n,r){return function(){var o=t.props.content.get("type"),i=t.props.sharedInitialValues.get("language")||"";("page"!==o||i&&"en"===i)&&r(n,t.changeTopicSuggestionValues,a,e)}})),j()(b()(t),"getSubmitHandler",(function(e,a){return t.props.handleSubmit((function(n){if(Object(se.b)("content-upload-".concat(t.props.contentId)))t.props.addUploadWarning();else{if("album"!==t.props.contentType||t.props.content.get("mediaCount")){var r="_new"===t.props.contentId?null:t.props.contentId,o=Object(_.a)(r,n,t.props.siteId,t.props.contentType,t.props.content,a),i=o.get("isAIEnabled"),c=o.get("listOfSuggestedTopics",[]),l=o.get("listOfTopics");t.trackSuggestedTopicsUsage(e,c,l.toJS(),i),o=o.delete("isAIEnabled");var s=c.map((function(e){var t=de({},e);return t.id===t.name&&(t.id=null),t}));o=o.set("listOfSuggestedTopics",s),o=Object(ae.d)(o);var u=t.props.content.get("status"),d=t.props.content.get("firstPublishedAt"),m=t.props.content;return t.props[e](r,o).then((function(a){var r=a.contentId;t.changeTopicSuggestionValues([],i),"album"===t.props.contentType&&t.props.updateAlbumMedia(r,o.get("listOfAlbumMedia"),o.get("coverImageMediaId"));var c=r!==t.props.contentId;if("saveDraft"===e&&c)return Object(oe.e)({pathname:"".concat(t.props.baseUrl,"/").concat(r,"/edit")});if("save"===e||"saveAndApprove"===e){var l,s=t.props.promotionActionCount>0&&Object(ae.j)(new N.a.Map(a),u,d),p=t.props.content.getIn(["rsvp","attendingCount"])>0&&Object(ae.i)(new N.a.Map(a),m,c);return s?l="?openPromoteModal":p&&(l="?openSendEventUpdatedNotification"),Object(oe.e)({pathname:t.props.viewUrl||"".concat(t.props.baseUrl,"/").concat(r),search:l},!0)}t.props.initialize(n.set("body",o.get("body")))}))}t.props.addAlbumNoMediaWarning()}}))})),t}return m()(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){if(e.submitting!==this.props.submitting){var t=e.submitting?"add":"remove";document.documentElement.classList[t](J.b)}(this.props.location.query||{}).createToken!==(e.location.query||{}).createToken&&this.props.reset()}},{key:"componentDidMount",value:function(){var e=this;"_new"!==this.props.contentId&&this.activateUserActivityTimer(),this.updatedVideosThumbnailIntervalId=setInterval((function(){Object(ae.n)(e.props.content,e.props.getFormValues,e.props.getFormValues().get("listOfInlineVideos")||new N.a.List)}),2e4)}},{key:"componentWillUnmount",value:function(){document.documentElement.classList.remove(J.b),this.destroyUserActivityTimer(),this.resetUserActivityTimer.cancel(),clearInterval(this.updatedVideosThumbnailIntervalId)}},{key:"render",value:function(){var e=this,t=this.props,a=t.content,n=t.site,o=t.isAdd,i=t.isEdit,c=t.isBlog,l=t.submitting,s=this.props.component;return T.a.createElement(T.a.Fragment,null,T.a.createElement(H.a,{className:J.a},T.a.createElement(H.a,{className:J.b,isActive:l}),T.a.createElement(W.a,r()({},Object(ae.f)(c,a,o,i),{text:Object(re.a)(a,c?a.get("authoredBy"):n,o,i)})),T.a.createElement(G.a,{message:function(t){var a=t&&t.pathname.endsWith("/edit");return!(e.props.dirty&&!e.props.submitting&&!a)}}),T.a.createElement(s,r()({key:this.props.contentId},this.props,{handleFieldBlur:this.handleFieldBlur,removeRenewLock:this.destroyUserActivityTimer,getSubmitHandler:this.getSubmitHandler,onImageInsert:this.onImageInsert,onImageRemove:this.onImageRemove,onVideoInsert:this.onVideoInsert,onVideoRemove:this.onVideoRemove,onPublishPresetChange:this.setPublishTo,isProtectedAuthorAllowlisted:this.props.isProtectedAuthorAllowlisted,onPublishFromChange:this.onPublishFromChange,onPublishImmediatelyChange:this.onPublishImmediatelyChange,canManage:this.props.canManage}))),T.a.createElement(K.a,{id:a.get("contentId"),contentType:a.get("type"),restoreEditSession:this.activateUserActivityTimer,previewUrl:"".concat(this.props.baseUrl,"/").concat(a.get("contentId"))}))}}]),n}(T.a.Component);t.a=Object(x.connect)((function(e,t){var a=C.b,n=C.a,r=Object(Y.getCurrentUserPermissions)(e).get("isProtectedAuthorAllowlisted"),o=Object(P.getFormValues)(pe)(e),i=(null==o?void 0:o.get("listOfSuggestedTopics"))||[],c=(null==o?void 0:o.get("isAIEnabled"))||!1,l=t.siteId,s=t.content.get("id")?t.content:new N.a.Map({id:"_new",status:"new",type:t.contentType,authoredBy:e.get("currentUser"),imgLayout:"small",isFeedEnabled:!0,publishAt:Object(ne.j)().format(),createdAt:Object(ne.j)().format(),files:new N.a.List,topics:new N.a.List,site:"blog_post"!==t.contentType?new N.a.Map({siteId:l}):void 0}),u=s.get("id"),d=Object(C.d)(s.get("publishAt"),s.get("publishTo"),!1),m=t.isEdit&&"predraft"!==s.get("status"),p=s.get("publishAt");if(["draft","pending","rejected"].includes(s.get("status"))){var b=Object(ne.j)(p),g=Object(ne.j)();b.isBefore(g,"day")&&(p=g.format())}var f=Object(Y.getCurrentUser)(e).get("language").split("-")[0],h=s.getIn(["translation","detectLangCode"]);h&&(f=h);var v=new N.a.Map({authoredBy:s.get("authoredBy"),title:s.get("title"),body:Object(ae.b)(s,t.contentUrl),summary:s.get("summary"),img:s.get("img"),imgLandscape:s.get("imgLandscape"),imgOriginal:s.get("imgOriginal"),imgFile:s.get("imgFile"),imgLandscapeFile:s.get("imgLandscapeFile"),imgOriginalFile:s.get("imgOriginalFile"),imgLayout:s.get("imgLayout"),imgCaption:s.get("imgCaption"),publishImmediately:m?void 0:n,publishToPreset:m?d:a,publishIndefinitely:"no_date"===d,publishAt:Object(ne.f)(p),publishTo:Object(ne.f)(s.get("publishTo")),isFeedEnabled:s.get("isFeedEnabled"),language:f,listOfTopics:s.get("topics"),listOfFiles:s.get("files"),listOfInlineImages:s.get("inlineImages"),listOfInlineVideos:s.get("inlineVideos"),contentSubType:s.get("contentSubType"),publishingStatus:Object(ne.n)(s.get("publishAt"))?"schedule":"immediate",listOfSuggestedTopics:i,isAIEnabled:c});return{content:s,contentId:u,sharedInitialValues:v,isProtectedAuthorAllowlisted:r,getFormValues:function(){return Object(P.getFormValues)(pe)(e)},getFormValue:function(t){return Object(P.formValueSelector)(pe)(e,t)},getFileByUrl:function(t){return Object(ee.a)(e,t)},getFileById:function(t){return Object(ee.b)(e,t)},promotionActionCount:Object($.r)(e,s).size}}),(function(e,t){return{save:function(a,n){var r=function(e,t,a,n){switch(e.get("status")){case"new":case"draft":case"predraft":return t||a?"create":"submit";case"pending":case"published":case"unpublished":return"update";case"rejected":return t?"update":"submit"}return t||a?n?"create":"update":"submit"}(t.content,t.canManage,t.isBlog,t.isAdd);return e(Object(B.I)(t.contentType,a,n,null,r))},saveAndApprove:function(a,n){return e(Object(B.I)(t.contentType,a,n,"approve","update"))},saveDraft:function(a,n){return e(Object(B.J)(t.contentType,a,n,t.content.get("status")))},addUploadWarning:function(){t.contentType;return e(Object(z.l)(Object(ie.a)("file.upload.still_uploading.files")))},addAlbumNoMediaWarning:function(){return e(Object(z.l)(Object(ie.a)("album.create.no_media.warning_flash")))},updateAlbumMedia:function(t,a,n){var r=new N.a.OrderedMap(a.map((function(e){return[e.get("id"),e.get("description")]})).toJS());e(Object(D.b)(t)),e(Object(D.a)(t,r.keySeq().toJS())),e(Object(U.e)(r.toJS())),e(Object(U.d)(n,a.map((function(e){return e.get("id")}))))},openSessionExpireModal:function(){return e(Object(q.open)(Z.v,t.content.get("contentId")))},getVideoAccessToken:function(){return e(Object(V.a)())}}}))(Object(P.reduxForm)({form:pe,onSubmitFail:le.H,destroyOnUnmount:!1})(Object(L.k)(Object(X.a)(ge))))}).call(this,a(27))},3427:function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"a",(function(){return l})),a.d(t,"d",(function(){return s})),a.d(t,"c",(function(){return u}));var n=a(32),r="no_date",o="three_months",i="six_months",c="date",l="immediately";function s(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t)return r;if(!a)return c;var l=Object(n.j)(e),s=Object(n.j)(t);return l.clone().add(3,"months").isSame(s,"day")?o:l.clone().add(6,"months").isSame(s,"day")?i:c}function u(e,t,a){var l,s=Object(n.j)(t);switch(e){case r:l=null;break;case o:l=s.clone().add(3,"months").format();break;case i:l=s.clone().add(6,"months").format();break;case c:l=a}return l}},3428:function(e,t,a){var n=a(2042),r=a(482),o=a(373),i=a(822),c=a(1026),l=a(2221),s=i((function(e,t){var a=l(t);return c(a)&&(a=void 0),c(e)?n(e,r(t,1,c,!0),o(a,2)):[]}));e.exports=s},3429:function(e,t,a){var n=a(382),r=a(3430),o=a(373),i=a(822),c=a(3431),l=a(2221),s=i((function(e){var t=l(e),a=n(e,c);return t===l(a)?t=void 0:a.pop(),a.length&&a[0]===e[0]?r(a,o(t,2)):[]}));e.exports=s},3430:function(e,t,a){var n=a(565),r=a(1341),o=a(2041),i=a(382),c=a(424),l=a(566),s=Math.min;e.exports=function(e,t,a){for(var u=a?o:r,d=e[0].length,m=e.length,p=m,b=Array(m),g=1/0,f=[];p--;){var h=e[p];p&&t&&(h=i(h,c(t))),g=s(h.length,g),b[p]=!a&&(t||d>=120&&h.length>=120)?new n(p&&h):void 0}h=e[0];var v=-1,y=b[0];e:for(;++v<d&&f.length<g;){var O=h[v],E=t?t(O):O;if(O=a||0!==O?O:0,!(y?l(y,E):u(f,E,a))){for(p=m;--p;){var j=b[p];if(!(j?l(j,E):u(e[p],E,a)))continue e}y&&y.push(E),f.push(O)}}return f}},3431:function(e,t,a){var n=a(1026);e.exports=function(e){return n(e)?e:[]}},3432:function(e,t,a){"use strict";var n=a(1),r=a.n(n),o=a(0),i=a.n(o),c=a(55),l=a(52),s=a(113),u=a(90),d=a(3);function m(e){var t=e.close,a=e.contentType,n=e.restoreEditSession,r=e.previewUrl,l=Object(o.useRef)(null);return Object(o.useEffect)((function(){return l.current=window.setTimeout((function(){t(),Object(u.e)({pathname:r})}),6e4),function(){clearTimeout(l.current)}}),[]),i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"Modal-content"},i.a.createElement("div",{className:"Content Content--small type--secondary"},i.a.createElement("p",{className:"u-marg-b--medium"},Object(d.a)("modal.info.session_expired.info1",{contentType:Object(d.a)("common.".concat(a)).toLowerCase()})),i.a.createElement("p",null,Object(d.a)("modal.info.session_expired.info2",{contentType:Object(d.a)("common.".concat(a)).toLowerCase()})),i.a.createElement("p",null,Object(d.a)("modal.info.session_expired.info3",{contentType:Object(d.a)("common.".concat(a)).toLowerCase()})))),i.a.createElement("div",{className:"Strip Strip--modal"},i.a.createElement(c.a,{size:"large",type:"submit",appearance:"brand",onClick:function(){n(),t()},label:Object(d.a)("button_label.continue")})))}m.propTypes={id:r.a.string.isRequired},t.a=Object(s.a)((function(e){return{name:l.v,id:e.id,title:Object(d.a)("modal.info.title.session_expired"),classes:["Modal--mini"]}}))(m)},3433:function(e,t,a){"use strict";(function(e){var n=a(4),r=a.n(n),o=a(1),i=a.n(o),c=a(0),l=a.n(c),s=a(125),u=a(3434),d=a(52),m=a(3);function p(t){switch(e.Simpplr.Settings.addToCalendar[0]){case"app":return t.get("icsDownloadUrl");case"office365":return t.get("office365WebUrl");case"google":return t.get("googleCalendarWebUrl");case"outlook":return t.get("outlookWebUrl");default:return null}}function b(t){var a=t.content,n=t.openModal,r="published"===a.get("status")||"unpublished"===a.get("status");return 0!==e.Simpplr.Settings.addToCalendar.length&&r?l.a.createElement("div",{className:"u-hidePrint"},l.a.createElement(u.a,{id:a.get("id"),content:a}),e.Simpplr.Settings.addToCalendar.length>1?l.a.createElement(s.a,{isInlineBlock:!0,icon:"circle-plus",color:"brand",label:Object(m.a)("event.calendar.add"),onClick:function(){return n(d.s)},hasCurrentColorIcon:!0,iconSourceSize:17,fontStyle:"b2"}):l.a.createElement("a",{href:p(a),className:"type--b1"},Object(m.a)("calendar.add_to_provider",{provider:Object(m.a)("calendar.provider.".concat(e.Simpplr.Settings.addToCalendar[0]))}))):null}b.propTypes={content:i.a.instanceOf(r.a.Map).isRequired,openModal:i.a.func.isRequired},t.a=b}).call(this,a(27))},3434:function(e,t,a){"use strict";(function(e){var n=a(22),r=a.n(n),o=a(1),i=a.n(o),c=a(0),l=a.n(c),s=a(21),u=a(66),d=a(52),m=a(113),p=a(3);function b(t){return-1!==e.Simpplr.Settings.addToCalendar.indexOf(t)}function g(e){var t=e.content,a=e.close;return l.a.createElement("div",{className:"Modal-content Modal-content--forms"},l.a.createElement("aside",{className:"Tile"},l.a.createElement("ul",{className:"AddToCalendar"},b("app")&&l.a.createElement("li",{className:"AddToCalendar-item"},l.a.createElement("a",{href:t.get("icsDownloadUrl"),onClick:function(){return a()}},l.a.createElement("span",{className:"AddToCalendar-iconContainer"},l.a.createElement(s.a,{isLegacy:!0,name:"calendar"})),Object(p.a)("calendar.add_to_provider",{provider:Object(p.a)("calendar.provider.app")}))),b("office365")&&l.a.createElement("li",{className:"AddToCalendar-item"},l.a.createElement("a",{href:t.get("office365WebUrl"),onClick:function(){return a()}},l.a.createElement("span",{className:"AddToCalendar-iconContainer AddToCalendar-iconContainer--large"},l.a.createElement(s.a,{isLegacy:!0,name:"office365"})),Object(p.a)("calendar.provider.office365"))),b("google")&&l.a.createElement("li",{className:"AddToCalendar-item"},l.a.createElement("a",{href:t.get("googleCalendarWebUrl"),onClick:function(){return a()}},l.a.createElement("span",{className:"AddToCalendar-iconContainer"},l.a.createElement(s.a,{isLegacy:!0,name:"google"})),Object(p.a)("calendar.provider.google"))),b("outlook")&&l.a.createElement("li",{className:"AddToCalendar-item"},l.a.createElement("a",{href:t.get("outlookWebUrl"),onClick:function(){return a()}},l.a.createElement("span",{className:"AddToCalendar-iconContainer AddToCalendar-iconContainer--large"},l.a.createElement(s.a,{isLegacy:!0,name:"outlook"})),Object(p.a)("calendar.provider.outlook"))))),l.a.createElement("p",{className:"u-marg-t--small u-pad-tb--small type--b4 u-textCenter type--secondary"},Object(p.a)("calendar.last_edited",{date:r()(t.get("modifiedAt")).format(u.b)})))}g.propTypes={title:i.a.string},t.a=Object(m.a)((function(e){return{name:d.s,id:e.id,title:Object(p.a)("calendar.add_to_calendar"),classes:["Modal--mini"]}}))(g)}).call(this,a(27))},3435:function(e,t,a){"use strict";(function(e){var n=a(5),r=a.n(n),o=a(1009);function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}t.a=function(t){return Object(o.a)(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({endpoint:e.Simpplr.Salesforce.Event.getInvited},t))}}).call(this,a(27))},3436:function(e,t,a){"use strict";var n=a(15),r=a.n(n),o=a(4),i=a.n(o),c=a(1),l=a.n(c),s=a(0),u=a.n(s),d=a(2925),m=a(2775),p=a(2666),b=a(2776),g=a(2688),f=a(2792);function h(e){var t=e.content,a=e.canManage,n=e.canEdit,o=e.breadcrumb,i=e.actionBar,c=e.columnClasses,l=e.onFilesClick,s=e.promoteModalNotification,h=e.topNotification,v=e.isAutoGovernanceEnabled,y=e.translateContentLanguage,O=e.setContentLanguageToOriginal,E=e.contentBody,j=e.title,_=e.updateNativeVideosInBody,C=t.getIn(["translation","isTranslated"],!1),I=t.get("imgLayout"),N=r()({column:!0,"Content-column":!0,"large-centered":!0,"large-12":"fullscreen"===I,"large-8":"small"===I||"wide"===I});return u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:c},s,h,u.a.createElement(m.a,{title:j,breadcrumb:o,actionBar:i},u.a.createElement(p.a,{content:t,showSite:!1,onFilesClick:l,showTimezone:!0,showLastValidated:v}),u.a.createElement(b.a,{content:t,translateContentLanguage:y,setContentLanguageToOriginal:O})))),u.a.createElement("div",{className:"row"},t.get("imgLandscape")&&"hidden"!==I&&u.a.createElement("div",{className:N},u.a.createElement(d.a,{key:t.get("id"),canEdit:n||a||t.get("isMustRead")&&!t.get("hasRead"),layout:t.get("imgLayout","wide"),img:t.get("imgLandscape"),caption:t.get("imgCaption")}))),u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:c},u.a.createElement(g.a,{escape:{css:!1,script:!1},html:E,contentType:t.get("type"),applyFormatting:_}),C&&u.a.createElement("div",{className:"u-marg-t--xlarge u-marg-b--xxlarge"},u.a.createElement(f.a,null)))))}h.propTypes={content:l.a.instanceOf(i.a.Map).isRequired,onFilesClick:l.a.func,promoteModalNotification:l.a.element,topNotification:l.a.element,updateNativeVideosInBody:l.a.func},t.a=h},3437:function(e,t,a){"use strict";var n=a(31),r=a.n(n),o=a(10),i=a.n(o),c=a(11),l=a.n(c),s=a(7),u=a.n(s),d=a(12),m=a.n(d),p=a(13),b=a.n(p),g=a(8),f=a.n(g),h=a(5),v=a.n(h),y=a(15),O=a.n(y),E=a(4),j=a.n(E),_=a(1),C=a.n(_),I=a(0),N=a.n(I),k=a(18),S=a(37),w=a(670),A=a(2777),F=a(3050),M=a(2778),R=a(2666),T=a(2779),x=a(2780),L=a(245),P=a(2781),D=a(242),U=a(1006),V=a(755),B=a(2689),z=a(2783),q=a(30),H=a(2669),W=a(17),G=a(63),K=a(3),J=a(47);function Q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=f()(e);if(t){var r=f()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return b()(this,a)}}var Z=function(e){m()(a,e);var t=Q(a);function a(){var e;i()(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r)),v()(u()(e),"topicSelectize",null),e}return l()(a,[{key:"UNSAFE_componentWillMount",value:function(){this.props.initialize(this.props.initialValues)}},{key:"componentDidMount",value:function(){var e=this.props,t=e.isBlog,a=e.loadPageCategories;t||a()}},{key:"render",value:function(){var e=this,t=this.props,a=t.contentId,n=t.content,r=t.isMaximumWidth,o=t.canChangeAuthor,i=t.canManageSite,c=t.site,l=t.siteId,s=t.form,u=t.contentType,d=t.suggestedTopics,m=t.updateTopics,p=t.isSiteContentManager,b=t.isNativeVideoEnabled,g=t.isBlog,f=t.handleFieldBlur,h=t.body,v=t.title,y=t.getSuggestedTopics,E=t.pageCategories,j=O()("large-centered","column","Content-column",{"large-8":!r}),_=O()({"is-maximumWidth":r}),C=[{label:Object(K.a)("content.edit.news_label"),value:"news",note:Object(K.a)("content.edit.news_note")},{label:Object(K.a)("content.edit.knowledge_label"),value:"knowledge",note:Object(K.a)("content.edit.knowledge_note")}];return N.a.createElement("form",{className:_},N.a.createElement("div",{className:"is-disabledWhileSubmitting"},N.a.createElement("div",{className:"row"},N.a.createElement("div",{className:j},N.a.createElement("div",{className:"Content-columnInner--edit"},N.a.createElement("header",{className:"Hero Hero--edit"},N.a.createElement("div",{className:"Hero-inner"},N.a.createElement("div",{className:"u-marg-b--medium"},N.a.createElement(S.Field,{isPageTitle:!0,isLarge:!0,isMinimal:!0,component:L.a,name:"title",placeholder:Object(K.a)("content.edit.title_placeholder",{type:Object(K.a)("common.".concat(u))}),canHaveLineBreaks:!1,validate:[J.E],maxLength:255,onBlur:f(h,v,this.topicSelectize,y)})),N.a.createElement("div",{className:"medium-6 large-5"},o?N.a.createElement(T.a,{siteId:c&&(c.get("isPrivate")||"unlisted"===c.get("access"))?l:null,size:"medium",content:n,showSite:!1,showTimezone:!0,hideFollow:!0}):N.a.createElement(R.a,{size:"medium",content:n,showDate:!1,hideFollow:!0}))))))),N.a.createElement(F.a,{contentId:a,change:this.props.change,siteId:l,getFormValue:this.props.getFormValue,columnClasses:j}),N.a.createElement("div",{className:"row"},N.a.createElement("div",{className:j},N.a.createElement("div",{className:"Content-columnInner--edit u-marg-b--large"},N.a.createElement(S.Field,{isMinimal:!0,component:V.a,name:"body",placeholder:Object(K.a)("content.add_content"),mediaManagerSiteId:l,validate:[J.E],onImageInsert:this.props.onImageInsert,onImageRemove:this.props.onImageRemove,onVideoInsert:this.props.onVideoInsert,onVideoRemove:this.props.onVideoRemove,fileUploadWaitForKey:"content-upload-".concat(this.props.contentId),onBlur:f(h,v,this.topicSelectize,y),enableNativeVideoUpload:b})))),N.a.createElement("div",{className:"row"},N.a.createElement("div",{className:j},N.a.createElement("div",{className:"Content-columnInner--edit"},N.a.createElement("aside",{className:"u-marg-b--large u-hidePrint"},N.a.createElement(S.Field,{formName:s,component:P.a,name:"listOfFiles",contentId:a,siteId:l,showByDefault:!0,isNativeVideoEnabled:b,customAddLabel:b?Object(K.a)("dropzone.drop_type_media_and_file_or_plural"):Object(K.a)("dropzone.drop_type_images_and_files_or"),canUploadAllFileTypes:c&&c.get("canUploadAllFileTypes",!1)||!1})),!this.props.isBlog&&N.a.createElement("aside",{className:"u-marg-b--large u-hidePrint"},N.a.createElement(S.Field,{component:D.a,name:"contentSubType",options:C,isStacked:!0,label:Object(K.a)("field.content_type.label"),isRequired:!0,isLight:!0,validate:[J.E]})),!this.props.isBlog&&E.loaded&&N.a.createElement("div",{className:"row u-hidePrint"},N.a.createElement("div",{className:"column medium-6 large-5"},N.a.createElement("aside",{className:"u-marg-b--large"},N.a.createElement(S.Field,{component:U.a,name:"category",label:Object(K.a)("common.page_category"),isRequired:!0,placeholder:i||p?Object(K.a)("manage_site.form.category_placeholder_manager"):Object(K.a)("common.select_placeholder"),options:E.result.map((function(e){return{value:e.get("id"),label:e.get("name")}})).toArray(),canCreate:i||p,hasClearButton:!0,validate:[J.E],makeOption:function(e){return{value:e.value||e.label,label:e.label}},hasLabelAbove:!0})))),N.a.createElement("aside",{className:"u-marg-b--large"},N.a.createElement(S.Field,{component:B.a,name:"listOfTopics",label:Object(K.a)("content.edit.topics_label"),placeholder:Object(K.a)("content.edit.topics_placeholder"),isMinimal:!0,canCreate:!0,hasLabelAbove:!0,selectorRef:function(t){e.topicSelectize=t}}),d?N.a.createElement(x.a,{topics:d,updateTopics:m,topicSelectize:this.topicSelectize}):null),N.a.createElement(M.a,{key:"options",showFeedOptions:this.props.showFeedOptions,getFormValue:this.props.getFormValue,hasContentWidthOption:!0,isEdit:this.props.isEdit,onPublishFromChange:this.props.onPublishFromChange,onPublishImmediatelyChange:this.props.onPublishImmediatelyChange,onPublishPresetChange:this.props.onPublishPresetChange,languages:g?[]:this.props.languages}))))),N.a.createElement(A.a,{key:"contentBar",removeRenewLock:this.props.removeRenewLock,canManage:this.props.canManage,isSiteContentManager:this.props.isSiteContentManager,content:n,onSave:this.props.getSubmitHandler("save",null==E?void 0:E.result),onSaveDraft:this.props.getSubmitHandler("saveDraft",null==E?void 0:E.result),onApprove:this.props.getSubmitHandler("saveAndApprove",null==E?void 0:E.result),disabled:this.props.submitting,publishingStatus:this.props.getFormValue("publishingStatus")}))}}]),a}(N.a.Component);v()(Z,"propTypes",{content:C.a.instanceOf(j.a.Map).isRequired,onImageInsert:C.a.func,onImageRemove:C.a.func,onPublishFromChange:C.a.func.isRequired,onPublishPresetChange:C.a.func.isRequired,handleFieldBlur:C.a.func.isRequired}),t.a=Object(k.connect)((function(e,t){var a=t.sharedInitialValues.merge({category:t.content.getIn(["category","id"]),isMaximumWidth:t.content.get("isMaximumWidth")}),n=void 0===t.getFormValue("isMaximumWidth")?t.content&&t.content.get("isMaximumWidth"):t.getFormValue("isMaximumWidth"),o=t.getFormValue("title"),i=t.getFormValue("body"),c=Object(q.getCurrentUser)(e),l=Object(W.p)(e).toJS();l=new j.a.List([c.get("language")].concat(r()(l)));var s={};return l=l.reduce((function(e,t){var a=t.split("-")[0];return void 0===s[a]&&(s[a]=Object(K.a)("content.language.".concat(a)),e.push({label:Object(K.a)("content.language.".concat(a)),value:a})),e}),[]),{pageCategories:Object(H.a)(e,t.siteId),isMaximumWidth:n,initialValues:a,canManageSite:Object(G.c)(e,t.site),languages:l,title:o||null,body:i}}),(function(e,t){return{loadPageCategories:function(){return e(Object(w.b)(t.siteId,{size:999999}))}}}))(Object(z.a)(Z))},3972:function(e,t,a){"use strict";var n=a(16),r=a.n(n),o=a(20),i=a.n(o),c=a(34),l=a.n(c),s=a(10),u=a.n(s),d=a(11),m=a.n(d),p=a(7),b=a.n(p),g=a(12),f=a.n(g),h=a(13),v=a.n(h),y=a(8),O=a.n(y),E=a(5),j=a.n(E),_=a(15),C=a.n(_),I=a(4),N=a.n(I),k=a(1),S=a.n(k),w=a(0),A=a.n(w),F=a(81),M=a(18),R=a(36),T=a(166),x=a(94),L=a(165),P=a(24),D=a.n(P),U=a(55);function V(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function B(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?V(Object(a),!0).forEach((function(t){j()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):V(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=O()(e);if(t){var r=O()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return v()(this,a)}}var q=function(e){f()(a,e);var t=z(a);function a(e){var n;return u()(this,a),(n=t.call(this,e)).state={isRunning:!1},n.onClick=n.onClick.bind(b()(n)),n}return m()(a,[{key:"onClick",value:function(e){for(var t=this,a=arguments.length,n=new Array(a>1?a-1:0),r=1;r<a;r++)n[r-1]=arguments[r];var o=function(){return t.setState({isRunning:!1})};e.persist(),this.setState({isRunning:!0},(function(){var a;return Promise.resolve((a=t.props).onClick.apply(a,[e].concat(n))).then(o,o)}))}},{key:"render",value:function(){var e=this.state,t=e.isRunning,a=e.disabled;return A.a.createElement(U.a,r()({},this.props,{disabled:t||a,onClick:this.onClick}))}}]),a}(A.a.PureComponent);j()(q,"propTypes",B(B({},U.a.propTypes),{},{onClick:S.a.func.isRequired})),j()(q,"defaultProps",U.a.defaultProps);var H=q,W=a(301),G=a(52),K=a(32),J=a(3);function Q(e){var t=e.isBlogPost,a=e.status,n=e.canPublishUnpublish,r=e.isToBeScheduled,o=e.contentType,i=e.publishedDate;var c=t&&"draft"===a?[Object(J.a)("button_label.publish"),e.create]:n&&"pending"!==a&&"rejected"!==a?"draft"===a?r?[Object(J.a)("button_label.publish_immediately"),e.openPublishImmediatelyModal]:[Object(J.a)("button_label.publish"),e.create]:r?[Object(J.a)("button_label.publish_immediately"),e.openPublishImmediatelyModal]:[Object(J.a)("button_label.publish"),e.publish]:"draft"!==a&&"rejected"!==a||"published"===a||n?[]:[Object(J.a)("button_label.submit_for_approval"),e.submit],l=D()(c,2),s=l[0],u=l[1];return s?A.a.createElement(A.a.Fragment,null,A.a.createElement(H,{size:"large",appearance:"brand",label:s,onClick:u}),A.a.createElement(W.a,{name:G.Eb,id:"publish_immediately",title:Object(J.a)("content.publish_immediately_modal.title"),buttonText:Object(J.a)("common.yes"),onConfirm:e.publish},A.a.createElement("p",null,Object(J.a)("content.publish_immediately_modal.warning_message",{contentType:o,publishedDate:i})))):null}Q.propTypes={contentId:S.a.string.isRequired,status:S.a.string,isBlogPost:S.a.bool,canPublishUnpublish:S.a.bool};var Z=Object(M.connect)((function(e,t){var a=e.getIn(["content",t.contentId,"result"],new N.a.Map),n=e.getIn(["currentUser","permissions","isAppManager"],!1),r=a.get("status"),o=a.get("publishAt")&&Object(K.j)(a.get("publishAt")),i=o?Object(K.i)(o,!1):"";return{status:r,contentType:a.get("type"),publishedDate:i,siteId:a.getIn(["site","id"],null),isDeleted:a.get("isDeleted",!1),canPublishUnpublish:a.get("canPublishUnpublish",!1),isAppManager:n}}),(function(e,t){return{publish:function(){return e(Object(T.B)(t.contentId))},unpublish:function(){return e(Object(T.U)(t.contentId))},create:function(){return e(Object(T.g)(t.contentId))},submit:function(){return e(Object(T.Q)(t.contentId))},openPublishImmediatelyModal:function(){return e(Object(x.open)(G.Eb,"publish_immediately"))}}}))(Q),X=a(208),$=a(1003),Y=a(766),ee=a(227),te=a(242),ae=a(2772),ne=a(2715),re=a(66),oe=a(113),ie=a(30),ce=a(42),le=a(47);function se(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=O()(e);if(t){var r=O()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return v()(this,a)}}var ue=function(e){f()(a,e);var t=se(a);function a(){var e;u()(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r)),j()(b()(e),"handleSubmit",(function(t){e.props.makeMustRead(e.props.contentId,t),e.props.close()})),j()(b()(e),"renderForm",(function(t){var a=e.props,n=a.site,r=a.isBlogPost,o=a.isAppManager,i=a.activeLicenseCount,c=a.close,l=a.contentType,s=t.handleSubmit,u=t.values.audience,d=t.submitting,m=t.invalid,p=(null==n?void 0:n.name)||null,b=n&&Object(ce.c)(n.memberCount),g=n&&Object(ce.c)(n.totalMemberCount),f=(null==n?void 0:n.isManager)||!1,h=i>0?" (".concat(Object(ce.c)(i),")"):"",v=Object(K.j)().add(90,"days").format(Object(K.o)(re.p)),y=null,O=[];r?y=i>0&&A.a.createElement("p",{className:"type--secondary"},Object(J.a)("common.everyone_in_org"),h):"private"===n.access||"unlisted"===n.access||!o&&!f?y=A.a.createElement("p",{className:"type--secondary"},Object(J.a)("modal.alert.make_must_read.site_members_of",{siteName:p})," ","(",b,")"):o&&f?O=[{label:"".concat(Object(J.a)("modal.alert.make_must_read.site_members_and_followers_of",{siteName:p})," (").concat(g,")"),value:"site_members_and_followers"},{label:"".concat(Object(J.a)("modal.alert.make_must_read.site_members_of",{siteName:p})," (").concat(b,")"),value:"site_members"},{label:"".concat(Object(J.a)("common.everyone_in_org")).concat(h),value:"everyone"}]:f?O=[{label:"".concat(Object(J.a)("modal.alert.make_must_read.site_members_and_followers_of",{siteName:p})," (").concat(g,")"),value:"site_members_and_followers"},{label:"".concat(Object(J.a)("modal.alert.make_must_read.site_members_of",{siteName:p})," (").concat(b,")"),value:"site_members"}]:o&&(y=A.a.createElement("p",{className:"type--secondary"},"".concat(Object(J.a)("common.everyone_in_org")).concat(h))),O.length&&(y=A.a.createElement("div",{className:"u-marg-b--medium"},A.a.createElement(X.a,{component:te.a,name:"audience",validate:le.E,isStacked:!0,isLight:!0,isNormalLabelText:!0,options:O})));var E="everyone"===u?Object(J.a)("modal.alert.make_must_read.must_read_help_msg_everyone"):Object(J.a)("modal.alert.make_must_read.must_read_help_msg");return A.a.createElement("form",{onSubmit:s},A.a.createElement("div",{className:"Modal-content Modal-content--forms"},A.a.createElement("div",{className:"Content Content--small type--secondary"},A.a.createElement("p",{className:"type--primary type--500"},Object(J.a)("modal.alert.make_must_read.text")),A.a.createElement("ul",{className:"u-pad-t--small"},A.a.createElement("li",{className:"u-pad-b--xsmall"},Object(J.a)("modal.alert.make_must_read.effect1")),A.a.createElement("li",null,Object(J.a)("modal.alert.make_must_read.effect2")))),A.a.createElement("div",{className:"u-marg-t--small u-marg-b--medium u-pad-t--medium u-border-top"},A.a.createElement("p",{className:"u-marg-b--small type--500 type--primary"},Object(J.a)("modal.alert.make_must_read.must_read_audience_label")),y,A.a.createElement("p",{className:"u-marg-b--small type--500 type--primary u-marg-t--medium"},Object(J.a)("field.add_a_message.label")," ",A.a.createElement("span",{className:"note u-lowercase"},"(".concat(Object(J.a)("common.optional"),")"))),A.a.createElement(X.a,{component:ne.a,name:"message",isInitOnClick:!1,placeholder:Object(J.a)("modal.alert.make_must_read.msg_placeholder",{type:l}),minRows:2,hasListOptions:!1,maxLength:2e3}),A.a.createElement("div",{className:"note u-marg-t--small u-marg-b--mediumlarge"},A.a.createElement("p",null,Object(J.a)("modal.alert.make_must_read.message_note")))),A.a.createElement("div",{className:"u-marg-t--medium u-marg-b--small u-pad-t--medium u-border-top"},A.a.createElement("p",{className:"u-marg-b--small type--500 type--primary"},Object(J.a)("modal.alert.make_must_read.must_read_duration_label")),A.a.createElement("div",{className:"u-marg-b--small"},A.a.createElement(X.a,{component:te.a,name:"duration",validate:le.E,isStacked:!0,isLight:!0,isNormalLabelText:!0,options:[{label:Object(J.a)("modal.alert.make_must_read.duration_date",{durationDate:v}),value:"ninety_days",note:Object(J.a)("modal.alert.make_must_read.note_recommended")},{label:Object(J.a)("modal.alert.make_must_read.to.no_date"),value:"indefinitely"}]})),A.a.createElement("div",{className:"note u-lineHeight--1p5 u-marg-b--medium"},A.a.createElement("p",null,E))),A.a.createElement("div",{className:"Strip Strip--modal u-pad-l--none u-pad-r--none"},A.a.createElement(U.a,{size:"large",type:"submit",label:Object(J.a)("modal.alert.make_must_read.button_text"),disabled:d||m,appearance:"brand"}),A.a.createElement("button",{type:"button",className:"Strip-cancel",onClick:c},Object(J.a)("button_label.cancel")))))})),e}return m()(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.isAppManager,a=e.isBlogPost;(t||a)&&this.props.loadInstallStats()}},{key:"render",value:function(){var e=this.props,t=e.site,a=e.isBlogPost,n=e.isAppManager,r=(null==t?void 0:t.isManager)||!1,o="site_members_and_followers";return a?o="everyone":"private"===t.access||"unlisted"===t.access||!n&&!r?o="site_members":n&&!r&&(o="everyone"),A.a.createElement(X.b,{onSubmit:this.handleSubmit,initialValues:{audience:o,duration:"ninety_days"}},this.renderForm)}}]),a}(A.a.PureComponent);var de=Object(M.connect)((function(e){return{activeLicenseCount:e.getIn(["statistics","activeLicenseCount"],0),isAppManager:Object(ie.isCurrentUserAppManager)(e)}}),{loadInstallStats:ae.a,makeMustRead:T.v})(Object(oe.a)((function(e){var t=e.contentId;return{name:G.B,id:t,classes:["Modal--small"],title:Object(J.a)("modal.alert.make_must_read.title")}}))(ue)),me=a(14),pe=a(131),be=a(2716),ge=a(2774),fe=a(667),he=a(243),ve=a(17),ye=a(89),Oe=a(2915);function Ee(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=O()(e);if(t){var r=O()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return v()(this,a)}}var je=function(e){f()(a,e);var t=Ee(a);function a(){var e;u()(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r)),j()(b()(e),"redirectToSlack",(function(){var t=e.props;(0,t.connectApp)(t.redirectUrl)})),e}return m()(a,[{key:"render",value:function(){var e=this.props,t=e.content,a=e.showSlackConnectMessage,n=Object(J.a)("common.".concat(t.get("type")));return A.a.createElement(A.a.Fragment,null,A.a.createElement("p",{className:"u-marg-b--medium"},Object(J.a)("content.share_to_slack_modal.intro",{contentType:n})),a&&A.a.createElement(Oe.a,{onFauxClick:this.redirectToSlack}),A.a.createElement("div",{className:"u-marg-t--small u-pad-t--medium"},A.a.createElement(be.a,{label:Object(J.a)("field.slack_channel.label"),isSlackConnected:!a})),A.a.createElement("div",{className:"u-marg-t--small u-pad-t--medium"},A.a.createElement(X.a,{note:"(".concat(Object(J.a)("common.optional"),")"),label:Object(J.a)("field.message.label"),component:ne.a,name:"message",isInitOnClick:!1,placeholder:Object(J.a)("share_modal.comment_placeholder",{typeLabel:n}),minRows:2,hasListOptions:!1,maxLength:ge.a,hasLabelAbove:!0})))}}]),a}(A.a.Component);j()(je,"propTypes",{contentId:S.a.string,showSlackConnectMessage:S.a.bool});var _e=Object(M.connect)((function(e,t){var a=t.contentId,n=Object(he.m)(e,a),r=Object(ve.y)(e,Object(ye.g)(n)),o=Object(ve.Q)(e,"slack"),i=Object(ie.hasConnectedSlackAccount)(e);return{content:n,showSlackConnectMessage:o&&!i,redirectUrl:r}}),null)(Object(M.connect)(null,(function(e,t){return{send:function(a){return e(Object(T.A)({contentId:t.contentId,actions:["slack"],message:a.message,slackChannelId:a.channelId,slackChannelUrl:a.channelUrl})).then((function(){e(Object(me.j)(Object(J.a)("content.action.share_to_slack.success_flash")))}))},connectApp:function(t){return e(Object(pe.a)("slackContentShare",t))}}}))(Object(fe.a)((function(e){return{name:G.K,id:e.contentId,title:Object(J.a)("content.share_to_slack_modal.title"),buttonText:Object(J.a)("button_label.share"),onConfirm:e.send,classes:["Modal--small"]}}))(je))),Ce=a(2916),Ie=a(656),Ne=a(484);function ke(e){var t=e.isOpenToNotification,a=e.optForNotification,n=e.close,r=e.contentType,o=["off","on"];return A.a.createElement(X.b,{onSubmit:function(e){return a("on"===e.isOpenToNotification).then(n)},initialValues:{isOpenToNotification:t?"on":"off"}},(function(e){var t=e.submitting,a=e.invalid,n=e.handleSubmit;return A.a.createElement("form",{onSubmit:n},A.a.createElement("div",{className:"Modal-content"},A.a.createElement("p",{className:"u-marg-b--medium"},Object(J.a)("content.page_notifications.modal_info",{contentType:r})),A.a.createElement(X.a,{component:Ie.a,hasLargeIcons:!0,isFullWidth:!0,name:"isOpenToNotification",options:o.map((function(e){return{icon:Ne.b[e],label:Object(J.a)("common.".concat(e)),value:e}}))}),A.a.createElement("p",{className:"type--secondary type--fs13 u-marg-t--small"},Object(J.a)("content.page_notifications.modal_text"))),A.a.createElement("div",{className:"Strip Strip--modal"},A.a.createElement(U.a,{type:"submit",label:Object(J.a)("button_label.done"),appearance:"brand",disabled:t||a})))}))}ke.propTypes={id:S.a.string.isRequired};var Se=Object(oe.a)((function(e){return{name:G.D,id:e.id,title:e.title,classes:["Modal--mini"]}}))(ke),we=a(69),Ae=a.n(we),Fe=a(63);function Me(e,t,a){return[{value:"site_members_and_followers",label:"".concat(Object(J.a)("content.send_update_notification.members_type.site_members_and_followers",{siteName:e})," (").concat(Object(ce.c)(t),")")},{value:"site_members",label:"".concat(Object(J.a)("content.send_update_notification.members_type.site_members",{siteName:e})," (").concat(Object(ce.c)(a),")")}]}function Re(e){var t=e.content,a=e.site,n=Object(J.a)("common.".concat(t.get("type"))),r=a.access,o=a.name,i=a.totalMemberCount,c=a.memberCount;return A.a.createElement(A.a.Fragment,null,A.a.createElement("p",null,"public"===a.access?Object(J.a)("content.send_update_notification.modal_text.public_site"):Object(J.a)("content.send_update_notification.modal_text.private_unlisted_site")),"public"===r&&A.a.createElement("div",{className:"u-marg-t--small u-pad-t--medium"},A.a.createElement(X.a,{component:te.a,name:"membersType",validate:le.E,options:Me(o,i,c),isLight:!0,isStacked:!0,label:Object(J.a)("field.notify.label")})),A.a.createElement("div",{className:"u-marg-t--small u-pad-t--medium"},A.a.createElement(X.a,{note:"(".concat(Object(J.a)("common.optional"),")"),label:Object(J.a)("field.message.label"),component:ne.a,name:"message",isInitOnClick:!1,placeholder:Object(J.a)("share_modal.comment_placeholder",{typeLabel:n}),minRows:2,hasListOptions:!1,maxLength:ge.a,hasLabelAbove:!0})))}Re.propTypes={contentId:S.a.string,siteId:S.a.string,content:Ae.a.map,site:Ae.a.record};var Te=Object(M.connect)((function(e,t){var a=Object(he.m)(e,t.contentId),n=Object(Fe.l)(e,t.siteId);return{content:a,site:n,initialValues:{membersType:"public"===n.access?"site_members_and_followers":null}}}),(function(e,t){return{send:function(a){return e(Object(T.A)({contentId:t.contentId,actions:["notification"],message:a.message,membersType:a.membersType})).then((function(){e(Object(me.j)(Object(J.a)("content.action.sendUpdateNotification.success_flash")))}))}}}))(Object(fe.a)((function(e){return{name:G.I,id:e.contentId,title:Object(J.a)("content.send_update_notification.modal_title"),buttonText:Object(J.a)("button_label.send"),onConfirm:e.send,classes:["Modal--small"]}}))(Re));function xe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=O()(e);if(t){var r=O()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return v()(this,a)}}var Pe=function(e){f()(a,e);var t=Le(a);function a(){return u()(this,a),t.apply(this,arguments)}return m()(a,[{key:"renderOptions",value:function(){var e=this.props,t=e.id,a=e.title,n=e.type,r=e.site,o=e.siteId,i=e.isOpenToNotification,c=e.hasModerationOptions,l=e.hasVersionHistoryOption,s=e.editUrl,u=e.canEdit,d=e.canDelete,m=e.canPublish,p=e.canUnpublish,b=e.canCreate,g=e.canSubmit,f=e.canShareToSlack,h=e.canSendUpdateNotification,v=e.canViewUsefulHistory,y=e.canViewModerationHistory,O=e.canAddToSegmentHomeCarousel,E=e.canRemoveFromSegmentHomeCarousel,j=e.canAddToHomeCarousel,_=e.canRemoveFromHomeCarousel,C=e.canAddToSiteCarousel,I=e.canRemoveFromSiteCarousel,N=e.canMakeMustRead,k=e.canViewMustReadHistory,S=e.canRemoveMustRead,w=e.canViewAnalytics,F=e.canValidate,M=e.canValidateAndPublish,R=e.openDeleteModal,T=e.currentSegmentName,x=Object(J.a)("common.".concat(n)),L="blog_post"===n,P={edit:[],promote:[],analytics:[],mustRead:[],history:[]};u&&c&&P.edit.push(A.a.createElement(ee.a,{key:"edit",label:Object(J.a)("button_label.edit"),title:Object(J.a)("content.edit.contentType",{contentType:x}),linkTo:s})),d&&P.edit.push(A.a.createElement(ee.a,{key:"delete",label:Object(J.a)("button_label.delete"),title:Object(J.a)("content.delete.label",{contentType:x}),onSelect:R},A.a.createElement(Ce.a,{id:t}))),b&&P.edit.push(A.a.createElement(ee.a,{key:"create",label:Object(J.a)("button_label.publish"),title:Object(J.a)("content.create",{contentType:x}),onSelect:this.props.create})),F&&P.edit.push(A.a.createElement(ee.a,{key:"validateBeforeExpired",label:Object(J.a)("button_label.validate"),onSelect:this.props.validate})),M&&P.edit.push(A.a.createElement(ee.a,{key:"validateExpired",label:Object(J.a)("button_label.validate_and_publish"),onSelect:this.props.validateAndPublish})),p&&P.edit.push(A.a.createElement(ee.a,{key:"unpublish",label:Object(J.a)("button_label.unpublish"),title:Object(J.a)("content.unpublish",{contentType:x}),onSelect:this.props.unpublish})),m&&P.edit.push(A.a.createElement(ee.a,{key:"publish",label:Object(J.a)("button_label.publish"),title:Object(J.a)("content.publish.contentType",{contentType:x}),onSelect:this.props.publish})),g&&P.edit.push(A.a.createElement(ee.a,{key:"submit",label:Object(J.a)("button_label.submit_for_approval"),title:Object(J.a)("content.submit",{contentType:x}),onSelect:this.props.submit})),f&&P.promote.push(A.a.createElement(ee.a,{key:"share-to-slack",label:Object(J.a)("content.share_to_slack.label"),onSelect:this.props.openShareToSlackModal},A.a.createElement(_e,{key:"share-to-slack",contentId:t})));var D=[{label:"".concat(Object(J.a)("my_segments.label")," (").concat(T,")"),value:"current_segment"},{label:Object(J.a)("all_segments.label"),value:"all_segments"}];return O&&P.promote.push(A.a.createElement(ee.a,{key:"addToHomeCarousel",label:Object(J.a)("content.add_to_home_carousel"),onSelect:this.props.openAddToCarouselModal},A.a.createElement(W.a,{name:G.f,id:t,onConfirm:this.props.addToCarouselWithSegment,title:Object(J.a)("content.add_to_home_carousel_modal.heading"),buttonText:Object(J.a)("content.add_to_home_carousel_modal.button_label"),initialValues:{segmentType:"current_segment",type:"home"}},A.a.createElement("p",{className:"type--primary type--500"},Object(J.a)("content.add_to_home_carousel_modal.title")),A.a.createElement("div",{className:"u-marg-b--medium"},A.a.createElement(X.a,{component:te.a,name:"segmentType",validate:le.E,isStacked:!0,isLight:!0,isNormalLabelText:!0,options:D}))))),E&&P.promote.push(A.a.createElement(ee.a,{key:"removeFromHomeCarousel",label:Object(J.a)("content.remove_from_home_carousel"),onSelect:this.props.openRemoveFromCarouselModal},A.a.createElement(W.a,{name:G.Hb,id:t,onConfirm:this.props.removeFromCarouselWithSegment,title:Object(J.a)("content.remove_from_home_carousel_modal.heading"),buttonText:Object(J.a)("content.remove_from_home_carousel_modal.button_label"),initialValues:{segmentType:"current_segment",type:"home"}},A.a.createElement("p",{className:"type--primary type--500"},Object(J.a)("content.remove_from_home_carousel_modal.title")),A.a.createElement("div",{className:"u-marg-b--medium"},A.a.createElement(X.a,{component:te.a,name:"segmentType",validate:le.E,isStacked:!0,isLight:!0,isNormalLabelText:!0,options:D}))))),_&&P.promote.push(A.a.createElement(ee.a,{key:"removeFromHomeCarousel",label:Object(J.a)("content.remove_from_home_carousel"),onSelect:this.props.removeFromCarousel("home")})),j&&P.promote.push(A.a.createElement(ee.a,{key:"addToHomeCarousel",label:Object(J.a)("content.add_to_home_carousel"),onSelect:this.props.addToCarousel("home")})),I&&P.promote.push(A.a.createElement(ee.a,{key:"removeFromSiteCarousel",label:Object(J.a)("content.remove_from_site_carousel"),onSelect:this.props.removeFromCarousel("site")})),C&&P.promote.push(A.a.createElement(ee.a,{key:"addToSiteCarousel",label:Object(J.a)("content.add_to_site_carousel"),onSelect:this.props.addToCarousel("site")})),h&&P.promote.push(A.a.createElement(ee.a,{key:"send-update",label:Object(J.a)("content.send_update_notification.label"),onSelect:this.props.openSendUpdateModal},A.a.createElement(Te,{contentId:t,siteId:o}))),P.promote.push(A.a.createElement(ee.a,{key:"content-notifications",label:Object(J.a)("content.notifications_modal.label",{contentType:x}),title:Object(J.a)("content.notifications_modal.label",{contentType:x}),onSelect:this.props.openPageNotificationsModal},A.a.createElement(Se,{id:t,title:a,isOpenToNotification:i,optForNotification:this.props.optForNotification,contentType:x.toLowerCase()}))),w&&P.analytics.push(A.a.createElement(ee.a,{key:"content-analytics",label:Object(J.a)("content.history_modal.tab_label.analytics",{contentType:x}),title:Object(J.a)("content.analytics.option_title",{contentType:x}),onSelect:this.props.openAnalyticsModal})),l&&P.history.push(A.a.createElement(ee.a,{key:"version-history",label:Object(J.a)("content.version_history.label"),title:Object(J.a)("content.version_history.title",{contentType:x}),onSelect:this.props.openVersionHistoryModal})),k&&P.mustRead.push(A.a.createElement(ee.a,{key:"must-read-history",label:Object(J.a)("content.history_modal.tab_label.mustReadHistory"),title:Object(J.a)("content.must_read.view_title",{contentType:x}),onSelect:this.props.openMustReadHistoryModal})),S&&P.mustRead.push(A.a.createElement(ee.a,{key:"remove-must-read",label:Object(J.a)("content.must_read.remove_label"),title:Object(J.a)("content.must_read.remove_title",{contentType:x}),onSelect:this.props.openRemoveMustReadModal},A.a.createElement(W.a,{name:G.H,id:t,onConfirm:this.props.removeMustRead,title:Object(J.a)("content.must_read.remove_label"),buttonText:Object(J.a)("content.must_read.remove_button_label")},A.a.createElement("p",{className:"type--primary type--500"},Object(J.a)("content.must_read.remove_modal_warning")),A.a.createElement("ul",{className:"u-pad-t--small"},A.a.createElement("li",null,Object(J.a)("content.must_read.remove_modal_warning_subtext1")),A.a.createElement("li",null,Object(J.a)("content.must_read.remove_modal_warning_subtext2")))))),N&&P.mustRead.push(A.a.createElement(ee.a,{key:"make-must-read",label:Object(J.a)("content.must_read.set_label"),title:Object(J.a)("content.must_read.set_title"),onSelect:this.props.openMakeMustReadModal},A.a.createElement(de,{contentId:t,site:r,isBlogPost:L,onConfirm:this.props.makeMustRead,contentType:x}))),v&&P.history.push(A.a.createElement(ee.a,{key:"useful-content-history",label:Object(J.a)("content.feedback_history.label"),title:Object(J.a)("content.feedback_history.title",{contentType:x}),onSelect:this.props.openUsefulContentHistoryModal})),y&&P.history.push(A.a.createElement(ee.a,{key:"content-moderation-history",label:Object(J.a)("content.moderation_history.label"),title:Object(J.a)("content.moderation_history.title",{contentType:x}),onSelect:this.props.openContentModerationHistoryModal})),Object.keys(P).reduce((function(e,t){return e+P[t].length}),0)>0&&A.a.createElement(A.a.Fragment,null,A.a.createElement($.a,{isXLarge:!0,icon:"more",hasLegacyIcon:!1,hasArrow:!0,modifiers:[{name:"flip",enabled:!1}]},Object.keys(P).map((function(e){return A.a.createElement(Y.a,{key:e},P[e])}))))}},{key:"render",value:function(){var e=this.renderOptions();return e||null}}]),a}(A.a.PureComponent);j()(Pe,"propTypes",{id:S.a.string.isRequired,title:S.a.string,type:S.a.string,siteId:S.a.string,isOpenToNotification:S.a.bool,canEdit:S.a.bool,canDelete:S.a.bool,canSendUpdateNotification:S.a.bool,modifiers:S.a.shape({})});var De=Object(M.connect)((function(e,t){var a=e.getIn(["content",t.id,"result"],new N.a.Map),n=a.getIn(["site","siteId"]),r=n&&Object(Fe.l)(e,n),o=Object(he.h)(e,a);return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(a),!0).forEach((function(t){j()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):xe(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({site:r,type:a.get("type"),siteId:a.getIn(["site","id"],null),isOpenToNotification:a.get("isOpenToNotification"),isSegmentsEnabled:Object(ve.V)(e),currentSegmentName:Object(ie.getCurrentUserSegmentName)(e)},o)}),(function(e,t){return{publish:function(){return e(Object(T.B)(t.id))},unpublish:function(){return e(Object(T.U)(t.id))},validate:function(){return e(Object(T.Z)(t.id))},validateAndPublish:function(){return e(Object(T.ab)(t.id))},create:function(){return e(Object(T.g)(t.id))},submit:function(){return e(Object(T.Q)(t.id))},optForNotification:function(a){return e(Object(T.y)(t.id,a))},addToCarouselWithSegment:function(a){var n=a.type,r=a.segmentType;return e(Object(T.a)(t.id,n,r))},addToCarousel:function(a){return function(){return e(Object(T.a)(t.id,a))}},removeFromCarouselWithSegment:function(a){var n=a.type,r=a.segmentType;return e(Object(T.D)(t.id,n,r))},removeFromCarousel:function(a){return function(){return e(Object(T.D)(t.id,a))}},removeMustRead:function(){return e(Object(T.E)(t.id))},openDeleteModal:function(){return e(Object(x.open)(G.u,t.id))},openMakeMustReadModal:function(){return e(Object(x.open)(G.B,t.id))},openRemoveMustReadModal:function(){return e(Object(x.open)(G.H,t.id))},openAddToCarouselModal:function(){return e(Object(x.open)(G.f,t.id))},openRemoveFromCarouselModal:function(){return e(Object(x.open)(G.Hb,t.id))},openAnalyticsModal:function(){return e(Object(x.open)(G.z,t.id,"analytics"))},openMustReadHistoryModal:function(){return e(Object(x.open)(G.z,t.id,"mustReadHistory"))},openUsefulContentHistoryModal:function(){return e(Object(x.open)(G.z,t.id,"usefulContentHistory"))},openVersionHistoryModal:function(){return e(Object(x.open)(G.z,t.id,"versionHistory"))},openContentModerationHistoryModal:function(){return e(Object(x.open)(G.z,t.id,"moderationHistory"))},openShareToSlackModal:function(){return e(Object(x.open)(G.K,t.id))},openSendUpdateModal:function(){return e(Object(x.open)(G.I,t.id))},openPageNotificationsModal:function(){return e(Object(x.open)(G.D,t.id))}}}))(Pe);function Ue(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=O()(e);if(t){var r=O()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return v()(this,a)}}var Ve=function(e){f()(a,e);var t=Ue(a);function a(){return u()(this,a),t.apply(this,arguments)}return m()(a,[{key:"UNSAFE_componentWillMount",value:function(){this.props.loaded||this.props.loading||this.props.load()}},{key:"render",value:function(){var e=this.props,t=e.loading,a=e.status,n=e.isScheduledContent;return t||!a||"published"===a?null:A.a.createElement(A.a.Fragment,null,""," ",n?Object(J.a)("common.scheduled"):Object(J.a)("status.".concat("predraft"===a?"draft":a)))}}]),a}(A.a.Component);j()(Ve,"propTypes",{id:S.a.string.isRequired,isEmpty:S.a.bool,loading:S.a.bool,loaded:S.a.bool,status:S.a.string,isScheduledContent:S.a.bool});var Be=Object(M.connect)((function(e,t){var a=e.getIn(["content",t.id],new N.a.Map);return{loading:a.get("loading",!1),loaded:a.get("loaded",!1),type:a.getIn(["result","type"],null),status:a.getIn(["result","status"],null),siteId:a.getIn(["result","site","id"],null)}}),(function(e,t){return{load:function(){return"new"===t.id?null:e(Object(T.t)(t.id))}}}))(Ve),ze=a(850),qe=a(138),He=a(21),We=a(2917),Ge=a(2918),Ke=a(245);function Je(e){var t=e.id,a=e.isAnimating,n=e.close,r=Object(M.useDispatch)(),o=Object(w.useCallback)((function(e){r(Object(T.C)(t,e.reason)).then(n)}),[]);return A.a.createElement(X.b,{onSubmit:o},(function(e){var t=e.handleSubmit,r=e.invalid,o=e.submitting;return A.a.createElement("form",{onSubmit:t},A.a.createElement("div",{className:"Modal-content"},A.a.createElement(X.a,{component:Ke.a,name:"reason",label:Object(J.a)("modal.reject_content.field_label"),maxLength:255,isRequired:!0,validate:le.E})),A.a.createElement("div",{className:"Strip Strip--modal"},A.a.createElement(U.a,{appearance:"brand",label:Object(J.a)("button_label.reject"),type:"submit",disabled:r||o||a}),A.a.createElement("button",{type:"button",className:"Strip-cancel",onClick:n},Object(J.a)("button_label.cancel"))))}))}Je.propTypes={id:S.a.string.isRequired};var Qe=Object(oe.a)((function(e){return{name:G.G,id:e.id,title:Object(J.a)("modal.reject_content.title"),classes:["Modal--small"]}}))(Je),Ze=a(232),Xe=a(90);function $e(e){var t=e.contentType,a=e.hasRead;return A.a.createElement("header",{className:"ContentAdminBar ContentAdminBar--mustRead u-cf"},A.a.createElement("div",{className:"u-textCenter"},A.a.createElement("div",{className:"ContentAdminBar-iconContainer ContentAdminBar-iconContainer--must-read"},A.a.createElement(He.a,{name:"must-read",sourceSize:"28"})),A.a.createElement("div",{className:"ContentAdminBar-type"},A.a.createElement("div",{className:"type--h5 type--title"},Object(J.a)("common.must_read"))),A.a.createElement("div",{className:"ContentAdminBar-status type--primary"},A.a.createElement("span",{className:"u-marg-l--xsmall u-marg-r--xsmall"},"-"),a?Object(J.a)("content.must_read.header.confirmed"):Object(J.a)("must_read.confirm",{contentType:Object(J.a)("common.".concat(t))}))))}$e.propTypes={contentType:S.a.string,hasRead:S.a.bool},$e.defaultProps={contentType:"",hasRead:!1};var Ye=$e;function et(e){var t=e.onViewHistory,a=e.duration,n=e.readCount,r=e.audience,o=e.createdAt,i=e.removedAt,c="indefinitely"===a,l=Object(K.j)(o),s=l.clone().add(90,"days").format(re.c);i?s=Object(K.j)(i).format(re.c):c&&(s=Object(J.a)("modal.alert.make_must_read.to.no_date"));var u=function(e){switch(e){case"everyone":return"content.must_read.timeline_audience_everyone";case"site_members":return"content.must_read.timeline_audience_site_member";default:return"content.must_read.timeline_audience_site_members_and_followers"}}(r);return A.a.createElement("div",{className:"MustReadTimeline"},A.a.createElement("span",{className:"u-marg-r--xsmall"},Object(J.a)("content.must_read.timeline_from",{createdAt:l.format(re.c)})),A.a.createElement("span",{className:"u-marg-r--xsmall"},""),A.a.createElement("span",{className:"u-marg-r--xsmall"},Object(J.a)("content.must_read.timeline_to",{expiryDate:s})),A.a.createElement("span",{className:"u-marg-r--xsmall"},"|"),A.a.createElement("span",{className:"u-marg-r--xsmall"},Object(J.a)(u,{count:n})),A.a.createElement("button",{className:"type--fauxLink",type:"button",onClick:t},Object(J.a)("content.must_read.info_bar_view_history")))}et.propTypes={onViewHistory:S.a.func.isRequired,duration:S.a.oneOf(["indefinitely","ninety_days"]),readCount:S.a.number,audience:S.a.oneOf(["everyone","site_members","site_members_and_followers"]),createdAt:S.a.string,removedAt:S.a.string};var tt=A.a.memo(et);function at(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=O()(e);if(t){var r=O()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return v()(this,a)}}var nt=function(e){f()(a,e);var t=at(a);function a(){var e;u()(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r)),j()(b()(e),"openMustReadHistoryModal",(function(){return e.props.openMustReadHistory(G.z,e.props.content.get("id"),"mustReadHistory")})),j()(b()(e),"restorePreviousVersion",l()(i.a.mark((function t(){var a,n,r,o,c,l,s,u;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props,n=a.content,r=a.restore,o=a.contentType,c=a.versionId,l=n.toJS(),s=l.contentId,u=l.site.siteId,t.next=4,r(s,c);case 4:e.props.history.replace("/site/".concat(u,"/").concat(o,"/").concat(s));case 5:case"end":return t.stop()}}),t)})))),j()(b()(e),"handleEditContent",(function(t,a){return function(){var n=e.props,r=n.startContentEdit,o=n.content,i=n.editUrl,c=n.currentUser,l=n.isProtectedAuthorAllowlisted,s=n.openProtectedAuthorAlertModal,u=n.isAppManager,d=o.get("contentId"),m=o.get("versionId"),p=o.get("isLatest"),b=o.get("type"),g=o.getIn(["authoredBy","isProtectedAuthor"]),f=o.getIn(["authoredBy","id"])===c.id;l||!g||u||f?p?r(d,m,t,c,b):Object(Xe.e)({pathname:i}):s(a)}})),e}return m()(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.isAdd,n=t.isEdit,o=t.contentType,i=t.content,c=t.canEdit,l=t.canManage,s=t.editUrl,u=t.onApprove,d=t.hasModerationOptions,m=t.hasVersionHistoryOption,p=t.siteName,b=t.siteAccess,g=t.siteUrl,f=t.authorName,h=t.isOlderVersion,v=Object(Ze.k)(i),y=i.get("mustReadDetails")||new N.a.Map,O=a||n||c||l,E=i.get("id"),_=i.get("title"),I=i.get("isPublished"),k=i.get("hasRead"),S=i.get("canMakeMustRead"),w="knowledge"===i.get("contentSubType"),F=i.get("isScheduled");if(!O&&"pending"!==i.get("status"))return!!v&&A.a.createElement(Ye,{contentType:o,hasRead:k});var M=C()(j()({"ContentAdminBar-iconContainer":!0},"ContentAdminBar-iconContainer--".concat(Ne.d[o]),!0)),R=C()({ContentAdminBar:!0,"u-cf":!0,"is-disabledWhileSubmitting":!0,"u-sm-hide":!d}),T=y.size>0&&A.a.createElement(tt,r()({onViewHistory:this.openMustReadHistoryModal},y.toObject())),x=w?"pages-knowledge":Ne.d[o],P=A.a.createElement("span",{className:"post-date"},A.a.createElement(ze.a,{input:i.get("modifiedAt")||i.get("createdAt"),type:re.h}));return A.a.createElement("header",{className:R},A.a.createElement("div",{className:"u-floatLeft u-sm-hide"},A.a.createElement("div",{className:M},A.a.createElement(He.a,{name:x,sourceSize:"28"})),A.a.createElement("div",{className:"ContentAdminBar-type"},A.a.createElement("div",{className:"type--h5 type--title"},Object(J.a)("common.".concat(o)),v&&" (".concat(Object(J.a)("common.must_read"),")"))),h&&!n&&A.a.createElement("div",{className:"ContentAdminBar-status type--secondary"},A.a.createElement(A.a.Fragment,null," ")," ",Object(J.a)("content.version_history.preview.timestamp_label",{timeStamp:P})),v&&!S&&A.a.createElement("div",{className:"ContentAdminBar-status type--primary"},A.a.createElement("span",{className:"u-marg-l--xsmall u-marg-r--xsmall"},"-"),k?Object(J.a)("content.must_read.header.confirmed"):Object(J.a)("must_read.confirm",{contentType:Object(J.a)("common.".concat(o))})),A.a.createElement("div",{className:"ContentAdminBar-status type--secondary"},a||n?A.a.createElement(A.a.Fragment,null,(f||p)&&A.a.createElement(A.a.Fragment,null," "),f||p&&A.a.createElement("a",{href:g,className:"u-textInheritColor"},A.a.createElement(qe.a,{name:p,access:b}))):A.a.createElement(Be,{status:i.get("status"),id:E,isScheduledContent:F}))),O&&A.a.createElement(A.a.Fragment,null,!(a||n)&&A.a.createElement(A.a.Fragment,null,!h&&A.a.createElement("div",{className:"ContentAdminBar-buttonContainer u-hideIfEmpty u-sm-hide"},A.a.createElement(De,{key:"".concat(i.get("status"),"-").concat(v),hasModerationOptions:d,hasVersionHistoryOption:m,id:E,title:_})),!h&&A.a.createElement("div",{className:"ContentAdminBar-buttonContainer u-hideIfEmpty u-sm-hide"},A.a.createElement(U.a,{label:"",icon:"analytics",onClick:function(){return e.props.openAnalyticsModal()},size:"large"})),c&&s&&!d&&A.a.createElement("div",{className:"ContentAdminBar-buttonContainer u-hideIfEmpty"},A.a.createElement(L.a,{modal:A.a.createElement(We.a,{id:E,contentType:o})},(function(t){return A.a.createElement(L.a,{modal:A.a.createElement(Ge.a,{contentType:o})},(function(a){return A.a.createElement(U.a,{label:Object(J.a)("button_label.edit"),onClick:e.handleEditContent(t,a),size:"large"})}))}))),d&&!h&&A.a.createElement(L.a,{modal:A.a.createElement(Qe,{id:E})},(function(e){return A.a.createElement("div",{className:"ContentAdminBar-buttonContainer u-hideIfEmpty"},A.a.createElement(H,{label:Object(J.a)("button_label.reject"),onClick:e,size:"large"}))})),!I&&!h&&A.a.createElement("div",{className:"ContentAdminBar-buttonContainer u-hideIfEmpty"},A.a.createElement(Z,{isToBeScheduled:F,contentId:E})),d&&!h&&A.a.createElement("div",{className:"ContentAdminBar-buttonContainer u-hideIfEmpty"},A.a.createElement(H,{size:"large",label:F?Object(J.a)("button_label.approve_and_schedule"):Object(J.a)("button_label.approve_and_publish"),appearance:"brand",onClick:u})),h&&!n&&A.a.createElement("div",{className:"ContentAdminBar-buttonContainer u-hideIfEmpty"},A.a.createElement(U.a,{appearance:"brand",label:Object(J.a)("button_label.restore_version"),onClick:this.restorePreviousVersion,size:"large"})),T&&!h&&A.a.createElement("div",{className:"u-marg-t--medium"},T))))}}]),a}(F.b);j()(nt,"propTypes",{isAdd:S.a.bool,isEdit:S.a.bool,canEdit:S.a.bool,canManage:S.a.bool,editUrl:S.a.string,siteName:S.a.string,siteAccess:S.a.string,siteUrl:S.a.string,authorName:S.a.string,isOlderVersion:S.a.bool}),j()(nt,"defaultProps",{isAdd:!1,isEdit:!1,canEdit:!1,canManage:!1,siteName:"",siteAccess:"",authorName:"",isOlderVersion:!1});t.a=Object(R.k)(Object(M.connect)((function(e){var t=Object(ie.getCurrentUserPermissions)(e).get("isProtectedAuthorAllowlisted"),a=Object(ie.isCurrentUserAppManager)(e);return{currentUser:Object(ie.getCurrentUser)(e),isProtectedAuthorAllowlisted:t,isAppManager:a}}),(function(e,t){return{openMustReadHistory:function(t,a,n){return e(Object(x.open)(t,a,n))},restore:function(t,a){return e(Object(T.F)(t,a))},openProtectedAuthorAlertModal:function(t){return e(t(G.Db))},startContentEdit:function(a,n,r,o,i){return e(Object(T.P)(a,n,i)).then((function(a){var n=a.isLocked,i=a.lockedBy;return n&&i.name!==o.get("name")?e(r(G.lb,t.id)):Object(Xe.e)({pathname:t.editUrl})}))},openAnalyticsModal:function(){return e(Object(x.open)(G.z,t.content.get("contentId"),"analytics"))}}}))(nt))},3973:function(e,t,a){"use strict";var n=a(15),r=a.n(n),o=a(4),i=a.n(o),c=a(22),l=a.n(c),s=a(1),u=a.n(s),d=a(0),m=a.n(d),p=a(3433),b=a(81),g=a(18),f=a(94),h=a(2667),v=a(660),y=a(70),O=a(52),E=a(113),j=a(3),_=a(24),C=a.n(_),I=a(208),N=a(166),k=a(55),S=a(195),w=a(1001),A=a(661),F=a(1008),M=a(1014),R=a(225),T=a(849),x=a(2623),L=a(3435),P=a(35),D=a(243),U=a(32),V=function(e,t){var a=t.type,n=t.user;switch(a){case"ADD":return e.set(n.peopleId,Object(P.e)(n));case"REMOVE":return e.delete(n.peopleId,Object(P.e)(n));default:return e}};function B(e){var t=e.contentId,a=e.close,n=Object(L.a)({initialParams:new i.a.Map({contentId:t})}),r=n.users,o=n.loading,c=n.canPaginate,l=n.loadMore,s=Object(g.useDispatch)(),u=Object(g.useSelector)((function(e){return Object(D.m)(e,t)})),p=u.get("rsvp"),b=p.get("dueAtDate")&&Object(U.j)(p.get("dueAtDate")).isBefore(Object(U.j)()),f=Object(d.useReducer)(V,new i.a.Map),h=C()(f,2),v=h[0],y=h[1],O=Object(d.useMemo)((function(){return r.map((function(e){return e.peopleId})).concat(v.keySeq().toArray()).toArray()}),[v.hashCode(),r.hashCode()]),E=function(e){return!!e&&y({type:"ADD",user:e})},_=Object(d.useCallback)((function(e){return m.a.createElement(M.a,e,m.a.createElement("div",{className:"u-marg-t--small"},m.a.createElement(S.a,{onClick:function(){y({type:"REMOVE",user:e})}})))}),[]),P=m.a.createElement("p",null,Object(j.a)("modal.event_invite.no_already_invited"));return m.a.createElement(I.b,{onSubmit:function(e){var n=e.sendInvitationMail,r=v.valueSeq().toArray();s(Object(N.r)(t,r,n)).then((function(){a()}))},initialValues:{sendInvitationMail:!0},keepDirtyOnReinitialize:!0},(function(e){var n=e.handleSubmit;return m.a.createElement("form",{onSubmit:n},m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:"Modal-content Modal-content--forms"},m.a.createElement("div",{className:"u-pad--medium u-marg-b--medium u-border u-neg-t--small u-neg-l--small u-neg-r--small"},m.a.createElement("h2",{className:"u-marg-b--medium type--500 type--b2"},"".concat(Object(j.a)("modal.event_invite.invite_to_event")),v.size>0?" (".concat(v.size,")"):""),b?m.a.createElement(w.a,{type:"warning"},Object(j.a)("modal.event_invite.rsvp_passed.warning.body")):m.a.createElement(m.a.Fragment,null,m.a.createElement(T.a,{component:x.a,name:"peopleId",icon:"search",isCompact:!0,placeholder:Object(j.a)("modal.event_invite.search_placeholder"),isValueModel:!0,makeOption:function(e){return{value:e.peopleId,label:e.name}},renderOption:function(e){var t=e.data.item;return m.a.createElement(A.a,{user:t})},defaultParams:{contentId:t,siteId:u.getIn(["site","id"]),isPrivate:u.getIn(["site","isPrivate"])},onChange:E,excluded:O}),v.size>0&&m.a.createElement("div",{className:"u-marg-t--medium"},m.a.createElement(F.a,{itemComponent:_,users:new i.a.List(v.toArray()),showFollow:!1,showPopovers:!1})))),m.a.createElement("div",{className:"u-pad--medium u-marg-b--small u-border u-neg-l--small u-neg-r--small"},m.a.createElement("h2",{className:"u-marg-b--medium type--500 type--b2"},Object(j.a)("modal.event_invite.already_invited"),r.size>0?" (".concat(r.size,")"):""),m.a.createElement(F.a,{itemComponent:M.a,users:r,isLoading:o,canPaginate:c,onLoadMore:l,showFollow:!1,showPopovers:!1,noResults:P,showFullSeperator:!0}))),!b&&m.a.createElement("div",{className:"Strip Strip--modal u-pad-lr--large"},v.size>0&&m.a.createElement("div",{className:"u-sizeFill u-textLeft u-marg-t--small"},m.a.createElement(I.a,{component:R.a,name:"sendInvitationMail",label:Object(j.a)("modal.event_invite.send_invitation_emails"),isNormalLabelText:!0})),m.a.createElement("div",{className:"u-textRight"},m.a.createElement(k.a,{type:"submit",size:"large",label:[Object(j.a)("content.invite_remove_attendees_modal.tab_label.invite"),v.size>0?" (".concat(v.size,")"):""].join(" "),appearance:"brand",disabled:v.size<=0}),m.a.createElement("button",{type:"button",className:"Strip-cancel",onClick:a},Object(j.a)("button_label.cancel"))))))}))}B.propTypes={contentId:u.a.string};var z=B,q=a(16),H=a.n(q),W=a(129),G=(a(151),a(267),a(245)),K=a(1006),J=a(2718),Q=function(e,t){var a=t.type,n=t.user;switch(a){case"ADD":return e.set(n.peopleId,Object(P.e)(n));case"REMOVE":return e.delete(n.peopleId,Object(P.e)(n));default:return e}};function Z(e){var t=e.contentId,a=e.close,n=Object(J.c)(),r=n.users,o=n.loading,c=n.canPaginate,l=n.loadMore,s=n.appendId,u=n.removeId,p=Object(g.useDispatch)(),b=Object(d.useState)("default"),f=C()(b,2),h=f[0],v=f[1],y=Object(d.useReducer)(Q,new i.a.Map),O=C()(y,2),E=O[0],_=O[1],S=Object(d.useMemo)((function(){return E.keySeq().toArray()}),[r.hashCode(),E.hashCode()]),w=function(e){var t=e.item;return!!t&&_({type:"ADD",user:t})},x=Object(d.useCallback)((function(e,t){if(!t)return!1;var a=E.keySeq().toArray().includes(t.peopleId);return _(a?{type:"REMOVE",user:t}:{type:"ADD",user:t}),null}),[E.hashCode()]),L=Object(d.useMemo)((function(){return new i.a.List(r.filter((function(e){return!S.includes(e.peopleId)}))||[])}),[r.hashCode(),S]),D=m.a.createElement("p",null,Object(j.a)("modal.event_remove.no_attendees_yet")),U=function(e){var t=E.keySeq().toArray().includes(e.peopleId);return m.a.createElement(M.a,H()({},e,{showCheckbox:!0,renderCheckbox:function(){return m.a.createElement(T.a,{component:R.a,name:e.peopleId,value:t,onClick:function(t){return x(e.peopleId,e,t)}})}}))},V=Object(d.useCallback)((function(){return o?m.a.createElement("div",{className:"u-posRelative "},m.a.createElement(W.a,null)):m.a.createElement(m.a.Fragment,null,r.size>0?m.a.createElement(m.a.Fragment,null,m.a.createElement(I.a,{component:K.a,name:"listOfPeople",isCompact:!0,placeholder:Object(j.a)("modal.event_remove.search_placeholder"),isValueModel:!0,makeOption:function(e){var t=e.item;return{value:t.peopleId,label:t.name}},renderOption:function(e){var t=e.data.item.item;return m.a.createElement(A.a,{user:t})},icon:"search",options:(e={options:r.toJS(),excluded:S},t=e.options,a=void 0===t?[]:t,n=e.valueField,i=void 0===n?"peopleId":n,s=e.labelField,u=void 0===s?"name":s,d=e.itemFactory,p=void 0===d?P.e:d,b=e.excluded,g=void 0===b?[]:b,a.filter((function(e){return!g.includes(e[i])})).map((function(e){return{value:e[i],label:e[u],item:p(e)}}))),onChange:w}),m.a.createElement("div",{className:"u-marg-t--medium"},E.size>0&&m.a.createElement(m.a.Fragment,null,m.a.createElement("p",{className:"u-marg-b--xsmall type--secondary type--b4 type--500"},Object(j.a)("common.remove")," (".concat(E.size,")")),m.a.createElement(F.a,{itemComponent:U,users:E.toList(),showFollow:!1,showPopovers:!1})),L.size>0&&m.a.createElement(m.a.Fragment,null,m.a.createElement("p",{className:"u-marg-t--medium u-marg-b--medium type--secondary type--b4 type--500"},Object(j.a)("modal.event_remove.attendees_label")," (".concat(L.size,")")),m.a.createElement(F.a,{itemComponent:U,users:L,isLoading:o,canPaginate:c,onLoadMore:l,showFollow:!1,showPopovers:!1})))):D);var e,t,a,n,i,s,u,d,p,b,g}),[o,r.hashCode(),E.hashCode(),L.hashCode(),S]),B=Object(d.useCallback)((function(e){var n=e.note,r=E.valueSeq().toArray();p(Object(N.k)(t,r,n)).catch((function(){r.forEach((function(e){return s(e.peopleId)}))})).finally((function(){a()})),r.forEach((function(e){return u(e.peopleId)}))}),[E.hashCode()]);return m.a.createElement(I.b,{onSubmit:B,initialValues:{listOfPeople:[],note:""},keepDirtyOnReinitialize:!0},(function(e){var t=e.handleSubmit;return m.a.createElement("form",{onSubmit:t},m.a.createElement("div",{className:"Modal-content Modal-content--forms"},"default"===h?m.a.createElement("div",{className:"u-pad--medium u-marg-b--small u-border u-neg-t--small u-neg-l--small u-neg-r--small"},m.a.createElement("h2",{className:"u-marg-b--medium type--500 type--b2"},Object(j.a)("modal.event_remove.remove_from_event")),V()):m.a.createElement("div",{className:"u-marg-b--small"},m.a.createElement(I.a,{component:G.a,name:"note",id:"note",label:Object(j.a)("modal.event_remove.optional_note_label"),placeholder:Object(j.a)("modal.event_remove.optional_note_placeholder"),hasLabelAbove:!0,maxLength:255}))),m.a.createElement("div",{className:"Strip Strip--modal u-pad-lr--large"},"continue"===h&&m.a.createElement("div",{className:"u-sizeFill u-textLeft"},m.a.createElement(k.a,{size:"large",label:Object(j.a)("button_label.back"),onClick:function(){return v("default")}})),m.a.createElement("div",{className:"u-textRight"},"continue"===h?m.a.createElement(k.a,{type:"submit",appearance:"brand",size:"large",label:Object(j.a)("common.remove")}):m.a.createElement(k.a,{type:"button",label:Object(j.a)("button_label.continue"),appearance:"brand",size:"large",onClick:function(e){e.preventDefault(),v("continue")},disabled:E.size<=0}),m.a.createElement("button",{type:"button",className:"Strip-cancel",onClick:a},Object(j.a)("button_label.cancel")))))}))}Z.propTypes={contentId:u.a.string};var X=Z;function $(e){var t=e.contentId,a=e.tab,n=e.close,r=Object(d.useCallback)((function(){switch(a){case"invite":return m.a.createElement(z,{contentId:t,close:n});default:return m.a.createElement(X,{contentId:t,close:n})}}),[a]),o=Object(d.useCallback)((function(){return m.a.createElement("div",{className:"Modal-content"},m.a.createElement(y.a,{message:Object(j.a)("common.error_message"),hasNoBorder:!0}))}),[]);return m.a.createElement(v.a,{renderOnError:o},r())}$.propTypes={contentId:u.a.string,close:u.a.func};var Y=Object(E.a)((function(e){var t=e.contentId,a=[{id:"invite",label:Object(j.a)("content.invite_remove_attendees_modal.tab_label.invite")},{id:"remove",label:Object(j.a)("content.invite_remove_attendees_modal.tab_label.remove")}];return{name:O.x,id:t,title:Object(j.a)("modal.event_invite.title"),classes:["Modal--mini"],tabs:a}}))($),ee=function(e,t,a){var n=a.get("rsvp"),r=t.find((function(t){return t.get("peopleId")===e.get("peopleId")})),o=t;return"yes"!==n.get("respondedWith")||r||(o=t.unshift(e)),"no"===n.get("respondedWith")&&(o=t.filter((function(t){return t.get("peopleId")!==e.get("peopleId")}))),o};var te=Object(E.a)((function(e){var t=e.id;return{name:O.w,id:t,title:Object(j.a)("modal.event_attending.title"),classes:["Modal--mini"]}}))((function(e){var t=e.contentId,a=e.currentUser,n=e.content,r=Object(J.b)({initialParams:new i.a.Map({contentId:t})}),o=r.users,c=r.loading,l=r.canPaginate,s=r.loadMore,u=ee(a,o,n);return m.a.createElement("div",{className:"Modal-content"},m.a.createElement(F.a,{itemComponent:M.a,users:u,isLoading:c,canPaginate:l,onLoadMore:s,showPopovers:!1,showFullSeperator:!0}))})),ae=a(226),ne=a(132);function re(e){var t=e.content,a=e.currentUser,n=Object(J.c)(),r=n.users,o=n.loading,i=n.params,c=Object(g.useDispatch)(),l=ee(a,r,t),s=t.get("rsvp"),u=l.slice(0,6),d=s.get("attendingCount"),p=s.get("capacityCount",null),b=t.get("isPublished"),v=Object(U.j)(),y=Object(U.j)(t.get("endsAt")).isBefore(v),E=t.get("organizers").some((function(e){return e.id===a.id})),_=t.get("authoredBy").id===a.id,C=a.get("permissions").isAppManager,I=t.get("site"),N=I.isManager,k=I.isContentManager,S=I.isPublic,w=b&&!y&&(_||E||C&&S||N||k),A=Object(ae.c)(m.a.createElement(te,{contentId:i.get("contentId"),currentUser:a,content:t})).open;return m.a.createElement("aside",{className:"EventSidebar-item EventSidebar-item--borderTop u-hidePrint"},m.a.createElement("header",{className:"EventSidebar-header"},m.a.createElement("h3",{className:"type--stamp"},"".concat(Object(j.a)("rsvp.attending_title")," (").concat(d,")"),p>0&&", ".concat(Object(j.a)("rsvp.capacity_title")," (").concat(p,")"))),d<=0?m.a.createElement("div",{className:"type--secondary type--b2"},Object(j.a)("event.nobody_attending")):m.a.createElement(h.a,{rows:1,isOverlapping:!0,isOnWashBg:!0,isLoading:o,users:u,total:d,onExpand:A}),m.a.createElement(Y,{contentId:t.get("id")}),w&&m.a.createElement("button",{className:"type--fauxLink u-displayBlock u-marg-t--small",type:"button",onClick:function(){c(Object(f.open)(O.x,t.get("contentId"),"invite"))}},Object(j.a)("button_label.invite")))}re.propTypes={content:u.a.instanceOf(ne.a).isRequired};var oe=Object(b.c)(re),ie=a(2666),ce=a(2668);function le(e){var t=e.users,a=e.content;return t.size<=0?null:m.a.createElement("div",{className:"u-marg-t--large"},m.a.createElement("h3",{className:"type--title type--h6 u-marg-b--small"},t.size>1?Object(j.a)("event.author_and_organizers"):Object(j.a)("common.author")),t.size>1?m.a.createElement("div",{className:"UserAvatarList u-cf"},m.a.createElement("ul",{className:"UserAvatarList-inner"},t.reverse().map((function(e){var t=C()(e,2),a=t[0],n=t[1];return m.a.createElement(ce.a,{isOverlapping:!0,user:n,key:n.get("id"),popoverTitle:a?Object(j.a)("content.field_label.author"):Object(j.a)("content.field_label.organiser")})})))):m.a.createElement(ie.a,{content:a}))}le.propTypes={users:u.a.instanceOf(i.a.List).isRequired};var se=Object(g.connect)((function(e,t){return{users:t.users.map((function(t){var a=C()(t,2),n=a[0],r=a[1];return[n,e.getIn(["users",r.get("peopleId"),"result"])||r]}))}}))(le),ue=a(2925);function de(e){var t=e.content,a=t.get("rsvp");return a.get("canDownloadReport")&&a.get("reportUrl")&&("published"===t.get("status")||"unpublished"===t.get("status"))?m.a.createElement("aside",{className:"EventSidebar-item u-hidePrint"},m.a.createElement("header",{className:"EventSidebar-header"},m.a.createElement("h3",{className:"type--stamp"},Object(j.a)("rsvp.attendance_data"))),m.a.createElement("a",{href:a.get("reportUrl")},Object(j.a)("rsvp.download"))):null}de.propTypes={content:u.a.instanceOf(i.a.Map).isRequired};var me=de,pe=a(2775),be=a(2690),ge=a(125),fe=a(74);function he(e){var t=e.content;return m.a.createElement("aside",{className:"EventSidebar-item"},m.a.createElement(be.a,{height:200,label:Object(j.a)("event.location.button_label.directions"),isWashColor:!0},m.a.createElement("header",{className:"EventSidebar-header"},m.a.createElement("h3",{className:"type--stamp"},Object(j.a)("event.location.title"))),m.a.createElement("div",{className:"u-marg-b--medium"},m.a.createElement(ge.a,{icon:"location",isWrap:!0,color:"secondary",fontStyle:"b2",label:t.get("location"),url:Object(fe.k)(t.get("location"),!0)&&t.get("location")||null})),t.get("directions").size>0&&m.a.createElement("ol",{className:"Directions"},t.get("directions").map((function(e,t){return m.a.createElement("li",{className:"Directions-item",key:t},e)}))),t.get("mapUrl")&&m.a.createElement("div",{className:"u-marg-t--medium"},m.a.createElement(ge.a,{hasLegacyIcon:!0,url:Object(fe.a)(t.get("mapUrl")),icon:"globe",color:"brand",fontStyle:"b2",label:Object(j.a)("event.location.button_label.map")}))))}he.propTypes={content:u.a.instanceOf(i.a.Map).isRequired};var ve=he,ye=a(2717);function Oe(e){var t=e.content.get("rsvp"),a=t.get("isRemovedFromAttendeeList"),n=t.get("removedFromAttendeeListMessage");return a?m.a.createElement("div",{className:"u-marg-b--xlarge"},m.a.createElement(w.a,{type:"warning",title:Object(j.a)("event.removed_from_rsvp.title"),hasContentStyles:!1},n)):null}Oe.propTypes={content:u.a.instanceOf(i.a.Map).isRequired};var Ee=Oe,je=a(10),_e=a.n(je),Ce=a(11),Ie=a.n(Ce),Ne=a(7),ke=a.n(Ne),Se=a(12),we=a.n(Se),Ae=a(13),Fe=a.n(Ae),Me=a(8),Re=a.n(Me),Te=a(37),xe=a(1017),Le=a(1157),Pe=a(117),De=a(66);function Ue(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Re()(e);if(t){var r=Re()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Fe()(this,a)}}var Ve="CONTENT_RSVP_FORM",Be=function(e){we()(a,e);var t=Ue(a);function a(e){var n;return _e()(this,a),(n=t.call(this,e)).state={},n.onSubmit=n.onSubmit.bind(ke()(n)),n.selectAttending=n.selectAttending.bind(ke()(n)),n.renderOptions=n.renderOptions.bind(ke()(n)),n.renderNote=n.renderNote.bind(ke()(n)),n.renderNoteForm=n.renderNoteForm.bind(ke()(n)),n}return Ie()(a,[{key:"onSubmit",value:function(e){this.props.rsvpNote(e.get("noteValue"),e.get("respondedWith"))}},{key:"selectAttending",value:function(e){var t=this;return function(){e!==t.props.respondedWith&&t.props.rsvpRespond(e)}}},{key:"renderOptions",value:function(){var e=this.props.content.get("rsvp"),t="published"===this.props.content.get("status"),a=e.get("capacityCount")&&e.get("attendingCount")>=e.get("capacityCount"),n=e.get("dueAtDate")&&Object(U.j)(e.get("dueAtDate")).isBefore(Object(U.j)()),r=t&&!a&&!n,o=Object(U.j)(this.props.content.get("endsAt")).isBefore(Object(U.j)());if(!e)return null;if(!this.props.respondedWith){if(a)return m.a.createElement("div",{className:"type--secondary type--b2"},Object(j.a)("rsvp.message.full"));if(n)return m.a.createElement("div",{className:"type--secondary type--b2"},Object(j.a)("rsvp.message.closed"))}return m.a.createElement(m.a.Fragment,null,m.a.createElement("ul",{className:"IconToggleGroup IconToggleGroup--darkIcon IconToggleGroup--fullWidth IconToggleGroup--".concat(e.get("hasMaybeOption")?3:2)},m.a.createElement("li",{className:"IconToggleGroup-item"},m.a.createElement(Te.Field,{component:Le.a,type:"radio",icon:"tick",label:Object(j.a)("rsvp.option.yes"),name:"respondedWith",value:"yes",id:"rsvpYes",onClick:this.selectAttending("yes"),isDisabled:!t||!r||o,hasBorder:!0,fieldIndex:0})),m.a.createElement("li",{className:"IconToggleGroup-item"},m.a.createElement(Te.Field,{component:Le.a,type:"radio",icon:"close",label:Object(j.a)("rsvp.option.no"),name:"respondedWith",value:"no",id:"rsvpNo",onClick:this.selectAttending("no"),isDisabled:!t||n||o,hasBorder:!0,fieldIndex:1})),e.get("hasMaybeOption")&&m.a.createElement("li",{className:"IconToggleGroup-item"},m.a.createElement(Te.Field,{component:Le.a,type:"radio",icon:"maybe",label:Object(j.a)("rsvp.option.maybe"),name:"respondedWith",value:"maybe",id:"rsvpMaybe",onClick:this.selectAttending("maybe"),isDisabled:!t||!r||o,hasBorder:!0,fieldIndex:2}))),n&&m.a.createElement("div",{className:"type--secondary type--b2 u-marg-t--xsmall"},Object(j.a)("rsvp.message.closed")))}},{key:"renderNote",value:function(){var e=this,t=this.props,a=t.content,n=t.isAttending,r=a.get("rsvp");return n&&r.get("noteLabel")?m.a.createElement("aside",{className:"EventSidebar-item u-hidePrint"},m.a.createElement("header",{className:"EventSidebar-header"},m.a.createElement("h3",{className:"type--stamp"},Object(j.a)("rsvp.note_label"))),m.a.createElement(xe.a,{initialState:!r.get("noteValue")},(function(t,a){var n=t.activate,o=t.deactivate;return a?e.renderNoteForm(o):m.a.createElement("div",{className:"u-neg-t--xsmall"},m.a.createElement("p",{className:"type--500"},r.get("noteLabel")),m.a.createElement("p",{className:"type--secondary"},r.get("noteValue")),m.a.createElement("button",{type:"button",className:"u-marg-t--small type--fauxLink",onClick:n},Object(j.a)("common.update")))}))):null}},{key:"renderNoteForm",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.props.content;return m.a.createElement(m.a.Fragment,null,m.a.createElement(Te.Field,{key:"noteField",component:Pe.a,name:"noteValue",label:t.getIn(["rsvp","noteLabel"])}),m.a.createElement("div",{className:"u-marg-t--small u-cf"},m.a.createElement("div",{className:"u-floatRight"},m.a.createElement(k.a,{size:"large",type:"submit",label:Object(j.a)("button_label.save"),onClick:function(){return setTimeout(e)},appearance:"brand"}))))}},{key:"render",value:function(){var e=this.props,t=e.content,a=e.handleSubmit,n=e.respondedWith,r=t.get("rsvp");return r&&"published"===t.get("status")?m.a.createElement("form",{onSubmit:a(this.onSubmit)},m.a.createElement("aside",{className:"EventSidebar-item u-hidePrint"},m.a.createElement("header",{className:"EventSidebar-header"},m.a.createElement("h3",{className:"type--stamp"},Object(j.a)("rsvp.title"))),m.a.createElement("div",{className:"Rsvp"},this.renderOptions()),r.get("dueAtDate")&&!n&&m.a.createElement("div",{className:"u-marg-t--small type--secondary",key:"dueDate"},"".concat(Object(j.a)("rsvp.by_date"),": "),Object(U.j)(r.get("dueAtDate")).format(Object(U.o)(De.h)))),this.renderNote()):null}}]),a}(m.a.Component),ze=Object(Te.formValueSelector)(Ve);var qe=Object(g.connect)((function(e,t){return{respondedWith:ze(e,"respondedWith"),isAttending:"yes"===ze(e,"respondedWith"),initialValues:{respondedWith:t.content.getIn(["rsvp","respondedWith"]),noteValue:t.content.getIn(["rsvp","noteValue"])}}}),(function(e,t){return{rsvpRespond:function(a){return e(Object(N.H)(t.content.get("id"),a))},rsvpNote:function(a,n){return e(Object(N.G)(t.content.get("id"),a,n))}}}))(Object(Te.reduxForm)({form:Ve})(Be)),He=a(2776),We=a(854),Ge=a(2688),Ke=a(856);function Je(e){var t=e.content,a=e.openModal,n=e.canEdit,o=e.canManage,c=e.breadcrumb,s=e.actionBar,u=e.filesSection,b=e.notificationId,g=e.topNotification,f=e.currentUser,h=e.translateContentLanguage,v=e.setContentLanguageToOriginal,y=e.promoteModalNotification,O=e.contentBody,E=e.title,_=e.updateNativeVideosInBody,C=Object(d.useMemo)((function(){return Object(fe.k)(t.get("location"),!0)?"a":"div"}),[t.get("location")]),I=new i.a.List([[!0,t.get("authoredBy")]]).concat(t.get("organizers").map((function(e){return[!1,e]}))).filter((function(e){return e[0]||e[1].get("peopleId")!==t.getIn(["authoredBy","peopleId"])})),N=t.get("imgLayout"),k=r()({column:!0,"Content-column":!0,"large-centered":!0,"large-12":"fullscreen"===N,"large-8":"small"===N||"wide"===N}),S=r()({"EventSidebar-item":!0,"u-hideIfEmpty":!0,"u-pad-t--none":t.get("rsvp")&&"published"!==t.get("status")});return m.a.createElement("div",null,m.a.createElement("div",{className:"row"},m.a.createElement("div",{className:"large-12 column"},y,b&&m.a.createElement("div",{className:"u-marg-b--large"},m.a.createElement(ye.a,{contentId:t.get("contentId"),notificationId:b})),g,t.get("rsvp")&&m.a.createElement(Ee,{content:t}),m.a.createElement(pe.a,{title:E,breadcrumb:c,actionBar:s,isEvent:!0},m.a.createElement("div",{className:"Hero-calendarContainer"},m.a.createElement(Ke.a,{size:"large",input:t.get("startsAt"),timezoneIso:t.get("timezoneIso"),isAllDay:t.get("isAllDay")})),m.a.createElement("div",{className:"u-neg-t--small"},m.a.createElement(We.a,{isAllDay:t.get("isAllDay"),startsAt:t.get("startsAt"),endsAt:t.get("endsAt"),timezoneIso:t.get("timezoneIso"),timezoneName:t.get("timezoneName"),timezoneOffset:t.get("timezoneOffset"),isStacked:!0,isLarge:!0,isEventPreview:!1}),m.a.createElement(C,{className:"type--b2 type--secondary"},m.a.createElement("b",null,Object(j.a)("location"),": "),t.get("location"))),m.a.createElement(He.a,{content:t,translateContentLanguage:h,setContentLanguageToOriginal:v}))),t.get("imgLandscape")&&"hidden"!==t.get("imgLayout")&&m.a.createElement("div",{className:k},m.a.createElement(ue.a,{canEdit:n||o||t.get("isMustRead")&&!t.get("hasRead"),layout:t.get("imgLayout","wide"),img:t.get("imgLandscape"),caption:t.get("imgCaption")})),m.a.createElement("div",{className:"large-5 large-push-7 column"},m.a.createElement("div",{className:"EventSidebar"},t.get("rsvp")&&m.a.createElement(qe,{content:t,openModal:a}),m.a.createElement("aside",{className:S},m.a.createElement(p.a,{content:t,openModal:a})),t.get("rsvp")&&m.a.createElement(J.a,{initialParams:new i.a.Map({contentId:t.get("contentId")})},m.a.createElement(oe,{content:t,currentUser:f})),t.get("location")&&m.a.createElement(ve,{content:t}),t.get("rsvp")&&m.a.createElement(me,{content:t})),t.get("modifiedAt")&&m.a.createElement("span",{className:"u-inlineBlock type--secondary u-marg-b--medium"},Object(j.a)("common.last_edited"),":"," ",l()(t.get("modifiedAt")).format(De.b))),m.a.createElement("div",{className:"large-7 large-pull-5 column"},m.a.createElement("div",{className:"u-marg-b--medium"},m.a.createElement(Ge.a,{escape:{css:!1,script:!1},html:O,contentType:t.get("type"),applyFormatting:_}),m.a.createElement(se,{users:I,content:t}),u))))}Je.propTypes={content:u.a.instanceOf(i.a.Map).isRequired,canEdit:u.a.bool,canManage:u.a.bool,breadcrumb:u.a.node,actionBar:u.a.node,filesSection:u.a.node,notificationId:u.a.bool,topNotification:u.a.element,promoteModalNotification:u.a.element,updateNativeVideosInBody:u.a.func};t.a=Je},3974:function(e,t,a){"use strict";a.d(t,"a",(function(){return Xe}));var n=a(16),r=a.n(n),o=a(24),i=a.n(o),c=a(776),l=a(15),s=a.n(l),u=a(2784),d=a.n(u),m=a(0),p=a.n(m),b=a(18),g=a(3420),f=a(1),h=a.n(f),v=a(2923),y=a(1013);function O(e){var t=e.actionBar,a=e.likedByBar,n=e.isFeedInViewport,r=s()({"ContentBar-actionContainer":!0,"u-floatRight":a});return t||a?p.a.createElement(v.a,{isFixed:!n,align:"center"},a&&p.a.createElement("div",{className:"ContentBar-likedByContainer"},a),t&&p.a.createElement("div",{className:r},p.a.createElement(y.a,{name:"content",popperPosition:"top",position:{top:-35,right:-30}}),t)):null}O.propTypes={actionBar:h.a.node,likedByBar:h.a.node,isFeedInViewport:h.a.bool};var E=O,j=a(138),_=a(2787),C=a(2788),I=a(3),N=a(89);function k(e){var t=e.site,a=e.toListingPage,n=e.contentType,r=e.isBlog,o=e.content,i=null;return i=r?p.a.createElement(C.a,{label:o.getIn(["authoredBy","name"]),to:Object(N.l)(o.getIn(["authoredBy","peopleId"]))}):p.a.createElement(C.a,{label:p.a.createElement(j.a,{name:t.name,access:t.access}),to:Object(N.q)(t.id)}),p.a.createElement(_.a,null,i,p.a.createElement(C.a,{label:Object(I.a)("common.".concat(n,"_plural")),to:a}),o.get("category")&&p.a.createElement(C.a,{label:o.getIn(["category","name"]),to:Object(N.k)(o.getIn(["site","siteId"]),o.getIn(["category","id"]))}))}k.propTypes={toListingPage:h.a.string,contentType:h.a.string,isBlog:h.a.bool},k.defaultProps={isBlog:!1};var S=k,w=a(2717),A=a(3425),F=a(10),M=a.n(F),R=a(11),T=a.n(R),x=a(12),L=a.n(x),P=a(13),D=a.n(P),U=a(8),V=a.n(U),B=a(81),z=a(166),q=a(243),H=a(7),W=a.n(H),G=a(5),K=a.n(G),J=a(4),Q=a.n(J),Z=a(657),X=a(856),$=a(2789),Y=a(168),ee=a(232);function te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=V()(e);if(t){var r=V()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return D()(this,a)}}var ae=function(e){L()(a,e);var t=te(a);function a(){var e;M()(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r)),K()(W()(e),"getImage",(function(e){return"event"!==e.get("type")||e.get("imgLandscape")?p.a.createElement(Y.a,{img:e.get("imgLandscape")||e.getIn(["site","img"]),aspectRatio:"landscape",size:"330px"}):p.a.createElement("div",{className:"theme--bg u-posRelative",style:{height:"0",paddingBottom:"56.25%"}},p.a.createElement(X.a,{input:e.get("startsAt"),isPlain:!0,timezoneIso:e.get("timezoneIso"),isAllDay:e.get("isAllDay")}))})),e}return T()(a,[{key:"render",value:function(){var e=this,t=this.props.items;return t.size<3?null:p.a.createElement(p.a.Fragment,null,p.a.createElement("h2",{className:"type--h6 type--500 type--secondary u-marg-b--medium"},Object(I.a)("content.related_content")),p.a.createElement("ul",{className:"u-blockList u-blockList--flex u-blockList--noBottom u-blockList-small-1 u-blockList-medium-3"},t.map((function(t,a){return p.a.createElement("li",{key:t.get("contentId")},p.a.createElement($.a,{title:t.get("title"),to:Object(N.g)(t,Object(N.c)("related_content",{content:"position-".concat(a+1)})),stamp:Object(ee.c)(t)&&Object(I.a)("common.must_read"),image:e.getImage(t),meta:p.a.createElement(Z.a,{publishAt:t.get("publishAt"),createdAt:t.get("createdAt"),modifiedAt:t.get("modifiedAt"),site:t.get("site"),authoredBy:t.get("authoredBy"),showSite:!0}),showSummary:!0}))}))))}}]),a}(B.b);function ne(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=V()(e);if(t){var r=V()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return D()(this,a)}}K()(ae,"propTypes",{items:h.a.instanceOf(Q.a.Iterable).isRequired});var re=function(e){L()(a,e);var t=ne(a);function a(){return M()(this,a),t.apply(this,arguments)}return T()(a,[{key:"componentDidMount",value:function(){this.props.loadRelated(this.props.contentId)}},{key:"render",value:function(){return p.a.createElement(ae,{items:this.props.items})}}]),a}(B.b);var oe=Object(b.connect)((function(e,t){var a=t.contentId;return{items:Object(q.s)(e,a)}}),{loadRelated:z.u})(re),ie=a(1255),ce=a(1156),le=a(65),se=a.n(le),ue=a(53),de=a(55),me=a(1001),pe=a(66),be=a(1256),ge=a(30),fe=a(32),he=a(354);function ve(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=V()(e);if(t){var r=V()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return D()(this,a)}}var ye=function(e){L()(a,e);var t=ve(a);function a(e){var n;return M()(this,a),n=t.call(this,e),K()(W()(n),"checkForOldMustRead",(function(){var e=se.a.parse((n.props.history.location.search||"").substr(1));if(e.mustRead&&!n.props.isMustRead){Object(he.add)("info",Object(I.a)("must_reads.warning.no_longer_must_read"),!0),delete e.mustRead;var t=se.a.stringify(e);n.props.history.replace({search:t&&"?".concat(t)})}})),n.hasReadBefore=e.hasRead,n}return T()(a,[{key:"UNSAFE_componentWillMount",value:function(){this.checkForOldMustRead()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.hasReadBefore=e.hasRead,!this.props.loaded&&e.loaded&&this.checkForOldMustRead(e.isMustRead),this.props.isMustRead&&!e.isMustRead&&(this.hasReadBefore=!1),this.props.hasRead&&!e.hasRead&&(this.hasReadBefore=!1)}},{key:"render",value:function(){var e=this.props,t=e.hasRead,a=e.readAt,n=e.onMarkAsRead,r=e.currentUserId,o=e.canShowMessage,i=e.unreadMustReadsCount;if(!o)return null;var c=Object(fe.j)(a),l=t?Object(I.a)("must_read.confirmed"):Object(I.a)("common.must_read"),s=p.a.createElement("span",null,t?Object(I.a)("must_read.read_on_date",{date:c.format(Object(fe.o)(pe.g))}):Object(I.a)("must_read.confirm_generic")),u=!t&&p.a.createElement(de.a,{label:Object(I.a)("button_label.confirm"),onClick:n,appearance:"brand",size:"large"}),d=p.a.createElement("div",{className:"u-border-top u-displayFlex u-alignItems--center u-marg-t--medium u-pad-t--medium"},Object(I.a)("must_read.pending_read_count_message",{unreadMustReadsCount:i})," -",p.a.createElement(ue.a,{className:"u-marg-l--xsmall",to:"/people/".concat(r,"/must-reads")},Object(I.a)("must_read.view_link_label")));return p.a.createElement(me.a,{size:"large"},p.a.createElement("div",{className:"u-displayFlex u-alignItems--center"},p.a.createElement("div",{className:"u-flex-1"},p.a.createElement("h3",{className:"type--h4 type--title u-marg-b--none"},l),s),u),t&&i>0?d:null)}}]),a}(p.a.Component);ye.propTypes={hasRead:h.a.bool.isRequired,isMustRead:h.a.bool.isRequired,canShowMessage:h.a.bool.isRequired,readAt:h.a.string,onMarkAsRead:h.a.func.isRequired,unreadMustReadsCount:h.a.number},ye.defaultProps={};var Oe=Object(b.connect)((function(e){return{currentUserId:Object(ge.getCurrentUserId)(e)}}),null)(Object(be.a)(ye)),Ee=a(190),je=a(69),_e=a.n(je),Ce=a(192),Ie=a(128),Ne=a(1135);function ke(e){var t=e.tags;return p.a.createElement(Ce.a,{isLarge:!0,hasNoBottom:!0},t.map((function(e){var t=e.id,a=e.name;return p.a.createElement(Ie.a,{key:t},p.a.createElement(Ne.a,{isPlain:!0,to:"/topic/".concat(t),label:a}))})).toArray())}ke.propTypes={tags:_e.a.listOf(_e.a.contains({id:h.a.string.isRequired,name:h.a.string.isRequired}))},ke.defaultProps={tags:new Q.a.List};var Se=ke,we=a(165),Ae=a(21),Fe=a(37),Me=a(14),Re=a(2919),Te=a(245),xe=a(52),Le=a(113),Pe=a(47);function De(e){var t=e.valid,a=e.submitting,n=e.handleSubmit,r=e.isAnimating,o=e.close,i=e.onSubmit,c=e.contentType;return p.a.createElement("form",{onSubmit:n(i)},p.a.createElement("div",{className:"Modal-content"},p.a.createElement("div",{className:"Content Content--small type--secondary u-marg-b--medium"},p.a.createElement("div",{className:"type--fs13"},Object(I.a)("content.send_feedback.form_help_label",{type:Object(I.a)("common.".concat(c))}))),p.a.createElement(Fe.Field,{component:Te.a,name:"reason",id:"reason",label:Object(I.a)("content.send_feedback.form_label"),placeholder:Object(I.a)("content.send_feedback.form_placeholder"),maxLength:255,validate:[Pe.E],showRemainingCharactersCount:!0,isRequired:!0,hasLabelAbove:!0})),p.a.createElement("div",{className:"Strip Strip--modal"},p.a.createElement(de.a,{type:"submit",label:Object(I.a)("button_label.send"),disabled:!t||a||r,appearance:"brand"}),p.a.createElement("button",{type:"button",className:"Strip-cancel",onClick:o},Object(I.a)("button_label.cancel"))))}De.propTypes={id:h.a.string.isRequired,contentType:h.a.string};var Ue=Object(Le.a)((function(e){return{name:xe.ac,id:e.id,title:Object(I.a)("content.send_feedback.title"),classes:["Modal--small"]}}))(Object(b.connect)(null,(function(e,t){return{onSubmit:function(a){return t.close(),e(Object(Re.a)(t.id,!1,a.get("reason"))).then((function(){e(Object(Me.j)(Object(I.a)("feedback.success_flash")))}))}}}))(Object(Fe.reduxForm)({form:"USEFUL_CONTENT_FEEDBACK"})(De)));function Ve(e){var t=e.contentId,a=e.contentType,n=p.a.createElement(Ue,{name:xe.ac,id:t,contentType:a});return p.a.createElement(we.a,{modal:n},(function(e){return p.a.createElement("button",{type:"button",className:"NotUseful",onClick:e},p.a.createElement("div",{className:"NotUseful-text"},Object(I.a)("content.send_feedback.title")),p.a.createElement("div",{className:"NotUseful-iconContainer"},p.a.createElement(Ae.a,{name:"flag"})))}))}Ve.propTypes={contentId:h.a.string.isRequired,contentType:h.a.string.isRequired},Ve.defaultProps={};var Be=Ve,ze=a(296),qe=a(214);var He=a(664),We=a(17),Ge=a(2017),Ke=a(266),Je=a(503),Qe=a(311),Ze=a(74);function Xe(e){var t=e.component,a=e.showFeed,n=e.contentId,o=e.content,l=e.contentUrl,u=e.site,f=e.canPost,h=e.cannotPostMessage,v=e.contentType,y=e.toListingPage,O=e.isBlog,j=e.canShare,_=e.openModal,C=e.viewport,N=e.markAsRead,k=e.location,F=function(e){var t=e.get("id");return[Object(b.useSelector)((function(e){return Object(q.n)(e,t)})),Object(b.useSelector)((function(e){return Object(q.i)(e,t)}))]}(o),M=i()(F,2),R=M[0],T=M[1],x=Object(b.useDispatch)(),L=Object(m.useState)(!1),P=i()(L,2),D=P[0],U=P[1],V=Object(m.useRef)(null),B=Object(m.useRef)(null),z=Object(He.c)().addRecentSite,H=Object(m.useCallback)((function(e){var t=e.isIntersecting;U(t)}),[U]),W=Object(m.useCallback)((function(){V.current&&Object(Qe.c)(V.current,0)}),[]),G=Object(m.useCallback)((function(){B.current&&Object(Qe.c)(B.current,0)}),[]);Object(m.useEffect)((function(){u&&z(u)}),[null==u?void 0:u.siteId]),Object(m.useEffect)((function(){var e="".concat(window.location.pathname).concat(window.location.search),t={content_type:o.get("contentSubType")||o.get("type"),is_site_member:o.getIn(["site","isMember"]),site_id:null==u?void 0:u.siteId,publication_date:o.get("publishAt"),contentUrl:e};Object(Ke.b)("Content Viewed",t),Object(Ze.p)(qe.a)}),[]);var K=Object(m.useCallback)((function(e){Object(ee.l)(o,e,l)}),[o,l,x]),J=t,Q=o.get("isPublished"),Z=o.get("usefulContent")||!1,X=Q&&Z&&!O,$=d.a.parse(k.search.substr(1)),Y=p.a.createElement(S,{site:u,toListingPage:y,contentType:v,isBlog:O,content:o}),te=Q&&p.a.createElement(g.a,{content:o,canShare:j,openModal:_,onCommentClick:a&&W}),ae=Object(b.useSelector)((function(e){return{people:Object(We.y)(e,"/people/:peopleId:"),sites:Object(We.y)(e,"/site/:siteId:"),topics:Object(We.y)(e,"/topic/:topicId:/content")}})),ne=ae.people,re=ae.sites,le=ae.topics,se=$&&$.mustRead?p.a.createElement("div",{className:"u-marg-b--large"},p.a.createElement(w.a,{message:o.getIn(["mustReadDetails","message"])?Object(Ge.a)(o.getIn(["mustReadDetails","message"]),{people:ne,sites:re,topics:le}):null,createdAt:o.getIn(["mustReadDetails","createdAt"]),createdBy:o.getIn(["mustReadDetails","createdBy"])})):null,ue=o.get("files")&&o.get("files").size>0&&p.a.createElement("aside",{className:"u-marg-t--large",ref:B},p.a.createElement("h3",{className:"type--title type--h6 u-marg-b--small"},Object(I.a)("content.files_and_attachments")," ",o.get("files").size>6&&"(".concat(o.get("files").size,")")),p.a.createElement(ce.a,{files:o.get("files")})),de=X&&p.a.createElement("div",{className:"Content-feebackButton"},p.a.createElement(Be,{contentId:n,contentType:v})),me=o.get("topics").size>0&&p.a.createElement("div",null,p.a.createElement("h4",{className:"type--title type--h6 u-marg-b--small"},Object(I.a)("common.topic_plural")),p.a.createElement(Se,{tags:o.get("topics")})),pe=s()({column:!0,"Content-column":!0,"large-centered":!0,"large-8":!o.get("isMaximumWidth")&&"event"!==v}),be=$&&$.showContentNotification,ge=be&&p.a.createElement("div",{className:"u-marg-b--large"},p.a.createElement(A.a,{contentId:o.get("contentId"),notificationId:be}));return p.a.createElement(p.a.Fragment,null,p.a.createElement(Ee.a,r()({},Object(ee.f)(O,o),{text:Object(Je.a)(o,O?o.get("authoredBy"):u)})),p.a.createElement(J,r()({},e,{breadcrumb:Y,actionBar:"mobile"===C&&te,columnClasses:pe,onCommentClick:W,onFilesClick:G,filesSection:"event"===v&&ue,topics:"event"===v&&me,promoteModalNotification:ge,topNotification:se,contentBody:T,title:R,updateNativeVideosInBody:K})),p.a.createElement("div",{className:"row"},p.a.createElement("div",{className:pe},p.a.createElement(Oe,{isMustRead:o.get("isMustRead"),hasRead:o.get("hasRead"),readAt:o.get("readAt"),canShowMessage:Object(ee.k)(o),onMarkAsRead:N,unreadMustReadsCount:o.getIn(["mustReadDetails","unreadMustReadsCount"])}),"event"!==v&&ue&&p.a.createElement("div",{className:"u-border-top u-marg-t--large"},ue),(de||me)&&p.a.createElement("aside",{className:"Content-topicsAndFeedback u-marg-t--large"},me,de),Q&&"mobile"===C&&p.a.createElement("div",{className:"ContentActionBar"},p.a.createElement("div",{className:"ContentActionBar-inner"},p.a.cloneElement(te,{isFullWidth:!0,doMountModal:!1}))))),p.a.createElement("div",{className:"Content-relatedContentContainer u-hideIfEmpty"},p.a.createElement(oe,{contentId:o.get("contentId")})),Q&&"mobile"!==C&&p.a.createElement("div",{className:"ContentBar-wrapper"},p.a.createElement(E,{isFeedInViewport:D,actionBar:te})),p.a.createElement(c.a,{onChange:H},p.a.createElement("div",{className:"Page-feedContainer",ref:V,"aria-hidden":!a},a&&p.a.createElement("div",{className:"row"},p.a.createElement("div",{className:"column large-8 large-centered"},p.a.createElement("div",{className:"Feed Feed--inContent"},p.a.createElement(ie.a,{type:"record",feedContext:ze.a.content,feedPostformType:ze.c.COMMENT,subjectId:n,subjectName:o.get("title"),canMention:u?u.get("canMention"):null,chatterGroupId:u?u.get("chatterGroupId"):null,siteId:u?u.get("id"):null,canPost:f,cannotPostMessage:h,lazyMount:!0})))))))}},3977:function(e,t,a){"use strict";var n=a(16),r=a.n(n),o=a(15),i=a.n(o),c=a(4),l=a.n(c),s=a(1),u=a.n(s),d=a(0),m=a.n(d),p=a(36),b=a(10),g=a.n(b),f=a(11),h=a.n(f),v=a(7),y=a.n(v),O=a(12),E=a.n(O),j=a(13),_=a.n(j),C=a(8),I=a.n(C),N=a(18),k=a(14),S=a(3),w=a(2179),A=a(2033);function F(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=I()(e);if(t){var r=I()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return _()(this,a)}}var M=function(e){E()(a,e);var t=F(a);function a(e){var n;return g()(this,a),(n=t.call(this,e)).updateGalleryUrl=n.updateGalleryUrl.bind(y()(n)),n.closeOnUnfound=n.closeOnUnfound.bind(y()(n)),n}return h()(a,[{key:"updateGalleryUrl",value:function(e,t){this.props.history.replace("".concat(this.props.galleryUrl,"/gallery/").concat(t.get("albumMediaId")))}},{key:"closeOnUnfound",value:function(){var e=this.props,t=e.history,a=e.galleryUrl,n=e.showNotFoundFlash;t.replace(a),n()}},{key:"render",value:function(){var e=this,t=this.props,a=t.albumId,n=t.startAtAlbumMediaId,o=t.albumMediaId,i=t.total,c=t.content,l=t.canShare,s=t.showLinkToAlbum,u=t.onClose;return m.a.createElement(A.a,{albumId:a,total:i,startAtAlbumMediaId:n},(function(t){return m.a.createElement(w.a,r()({},t,{albumId:a,albumMediaId:o,onMove:e.updateGalleryUrl,onClose:u,content:c,canShare:l,showLinkToAlbum:s,onNotFound:e.closeOnUnfound}))}))}}]),a}(m.a.Component);M.propTypes={content:u.a.instanceOf(l.a.Map).isRequired,canShare:u.a.bool,showLinkToAlbum:u.a.bool,startAtAlbumMediaId:u.a.string,galleryUrl:u.a.string.isRequired,history:u.a.object.isRequired,onClose:u.a.func.isRequired};var R=Object(N.connect)(null,(function(e){return{showNotFoundFlash:function(){return e(Object(k.l)(Object(S.a)("content.albums.not_available")))}}}))(M),T=a(241),x=a(2920),L=a(2921);function P(e){var t=e.items,a=e.total,n=e.isAddEdit,r=e.onClick,o=e.onRemove,i=e.onSetCover,c=e.onMove,l=e.onSetDescription,s=e.canSetCover,u=a<=0,d=n?L.a:x.a;return m.a.createElement(m.a.Fragment,null,u&&!n&&m.a.createElement("p",null,Object(S.a)("content.album.empty")),t.map((function(e,t){return m.a.createElement(d,{id:e.get("albumMediaId"),media:e.get("result"),key:e.get("albumMediaId"),index:t,isAddEdit:n,canSetCover:s,onClick:r,onRemove:o,onSetCover:i,onSetDescription:l,onMove:function(e,t){return c(e,t)}})})).toArray(),!n&&!e.isFullyRequested&&m.a.createElement("div",{className:"u-grid-item small-12"},m.a.createElement(T.a,{canLoad:!e.isFullyRequested,onLoad:e.loadNext,isLoading:e.isLoading,window:e.window})))}P.propTypes={content:u.a.object.isRequired,total:u.a.number.isRequired,isAddEdit:u.a.bool,canSetCover:u.a.bool},P.defaultProps={isAddEdit:!1,canSetCover:!0,onMove:function(){}};var D=P,U=a(94),V=a(2687),B=a(5),z=a.n(B),q=a(37),H=a(991),W=a(931),G=a(55),K=a(3046),J=a(140),Q=a(52),Z=a(113),X=a(17),$=a(658);function Y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=I()(e);if(t){var r=I()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return _()(this,a)}}var ee=function(e){E()(a,e);var t=Y(a);function a(e){var n;return g()(this,a),(n=t.call(this,e)).onSubmit=n.onSubmit.bind(y()(n)),n}return h()(a,[{key:"onSubmit",value:function(e){if(!Object($.b)("content-upload-".concat(this.props.content.get("id"))))return this.props.submitMedia(e.get("listOfAlbumMedia"));this.props.addUploadWarning()}},{key:"render",value:function(){var e=this.props,t=e.content,a=e.handleSubmit,n=e.valid,r=e.submitting,o=e.isAnimating,i=e.form,c=e.isNativeVideoEnabled,l=t.get("id");return m.a.createElement("form",{onSubmit:a(this.onSubmit)},m.a.createElement("div",{className:"Modal-content Modal-content--noPaddingTop"},m.a.createElement("div",{className:"Modal-dropzoneContainer"},m.a.createElement(q.Field,{component:K.a,name:"listOfAlbumMedia",formName:i,total:t.get("mediaCount")||0,contentId:l,maxFields:500,isNativeVideoEnabled:c,disableVideoUrlInputModal:!0}))),m.a.createElement("div",{className:"Strip Strip--modal"},m.a.createElement(G.a,{label:Object(S.a)("button_label.add"),type:"submit",disabled:!n||r||o,appearance:"brand"}),m.a.createElement("a",{href:"",className:"Strip-cancel",onClick:this.props.close},Object(S.a)("button_label.cancel"))))}}]),a}(m.a.Component);z()(ee,"propTypes",{id:u.a.string.isRequired});var te=Object(Z.a)((function(e){return{name:Q.r,id:e.id,title:Object(S.a)("modal.add_to_album.title"),classes:[""]}}))(Object(N.connect)((function(e){return{initialValues:{listOfAlbumMedia:new l.a.List},isNativeVideoEnabled:Object(X.C)(e,J.e)}}),(function(e,t){return{submitMedia:function(a){return e(Object(W.g)(t.content.get("id"),a.toJS())).then((function(){t.close();var n=a.map((function(e){return e.get("id")}));e(Object(H.e)(t.content.get("id"),n.toJS()))}))},addUploadWarning:function(){return e(Object(k.l)(Object(S.a)("modal.add_to_album.warning")))}}}))(Object(q.reduxForm)({form:"ADD_TO_OPEN_ALBUM_MODAL",validate:function(e){return!(e.get("listOfAlbumMedia")||new l.a.List).size?{_error:"true"}:{}}})(ee)));function ae(e){var t=e.isAddEdit,a=e.content,n=e.openUploadModal;return"album"===a.get("type")&&a.get("isOpenToSubmissions")&&!t&&"published"===a.get("status")?m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:"u-grid-item small-6 medium-3"},m.a.createElement("div",{style:{position:"relative",paddingBottom:"100%"}},m.a.createElement(V.a,{label:Object(S.a)("content.album.button_label.add"),icon:"plus",onClick:n,size:"large",isPositionFit:!0}))),m.a.createElement(te,{id:a.get("id"),content:a,albumId:a.get("id")})):null}ae.propTypes={content:u.a.object.isRequired,isAddEdit:u.a.bool.isRequired};var ne=Object(N.connect)(null,(function(e,t){return{openUploadModal:function(){return e(Object(U.open)(Q.r,t.content.get("id")))}}}))(ae),re=a(2775),oe=a(2717),ie=a(2666),ce=a(2776),le=a(2688),se=a(129);function ue(e){var t=e.content,a=e.viewUrl,n=e.canShare,o=e.history,c=e.isAddEdit,l=e.site,s=e.breadcrumb,u=e.actionBar,d=e.onFilesClick,b=e.notificationId,g=e.topNotification,f=e.translateContentLanguage,h=e.setContentLanguageToOriginal,v=e.promoteModalNotification,y=e.contentBody,O=e.title,E=e.updateNativeVideosInBody,j=i()("large-centered","column",{"large-8":!t.get("isMaximumWidth")}),_=function(e){o.replace("".concat(a,"/gallery/").concat(e))},C=function(){o.replace("".concat(a))};return m.a.createElement("div",null,m.a.createElement("div",{className:"row"},m.a.createElement("div",{className:"large-12 column"},v,b&&m.a.createElement("div",{className:"u-marg-b--large"},m.a.createElement(oe.a,{contentId:t.get("contentId"),notificationId:b})),g,m.a.createElement(re.a,{title:O,breadcrumb:s,actionBar:u},m.a.createElement(ie.a,{content:t,showSite:!1,onFilesClick:d}),m.a.createElement(ce.a,{content:t,translateContentLanguage:f,setContentLanguageToOriginal:h}))),m.a.createElement("div",{className:"large-12 column"},m.a.createElement("div",{className:"AlbumSquareList"},m.a.createElement("div",{className:"u-grid u-grid--small"},m.a.createElement(A.a,{albumId:t.get("id"),total:t.get("mediaCount")||0},(function(e){return e.isLoading?m.a.createElement("div",{className:"u-pad--large u-posRelative"},m.a.createElement(se.a,null)):m.a.createElement(m.a.Fragment,null,e.isAnyLoaded&&m.a.createElement(ne,{isAddEdit:c,site:l,content:t}),m.a.createElement(D,r()({content:t,onClick:_},e)))})))))),m.a.createElement("div",{className:"row"},m.a.createElement("div",{className:j},t.get("body")&&m.a.createElement(le.a,{escape:{css:!1,script:!1},html:y,contentType:t.get("type"),applyFormatting:E}))),m.a.createElement(p.c,{exact:!0,path:"".concat(a,"/gallery/:albumMediaId"),render:function(e){var r=e.match;return m.a.createElement(R,{albumId:t.get("id"),total:t.get("mediaCount"),startAtAlbumMediaId:r.params.albumMediaId,albumMediaId:r.params.albumMediaId,galleryUrl:a,history:o,content:t,canShare:n,onClose:C})}}))}ue.propTypes={content:u.a.instanceOf(l.a.Map).isRequired,contentUrl:u.a.string.isRequired,canShare:u.a.bool,notificationId:u.a.bool,topNotification:u.a.element,promoteModalNotification:u.a.element,updateNativeVideosInBody:u.a.func};t.a=Object(p.k)(ue)},3983:function(e,t,a){"use strict";var n=a(10),r=a.n(n),o=a(11),i=a.n(o),c=a(7),l=a.n(c),s=a(12),u=a.n(s),d=a(13),m=a.n(d),p=a(8),b=a.n(p),g=a(5),f=a.n(g),h=a(15),v=a.n(h),y=a(4),O=a.n(y),E=a(1),j=a.n(E),_=a(0),C=a.n(_),I=a(18),N=a(37),k=a(166),S=a(2033),w=a(2777),A=a(2778),F=a(2666),M=a(2779),R=a(2780),T=a(3046),x=a(245),L=a(2781),P=a(755),D=a(2689),U=a(2783);a(19);function V(e,t){return function(e,t){return e.getIn(["albumListings",t,"items"],new O.a.List)}(e,t).map((function(t){return e.getIn(["albumMedia",t.get("albumMediaId"),"result"])}))}var B=a(3),z=a(47);function q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=b()(e);if(t){var r=b()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return m()(this,a)}}var H=function(e){u()(a,e);var t=q(a);function a(){var e;r()(this,a);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),f()(l()(e),"topicSelectize",null),f()(l()(e),"changeTopicSuggestionValues",(function(t,a){e.props.change("listOfSuggestedTopics",t),e.props.change("isAIEnabled",a)})),e}return i()(a,[{key:"UNSAFE_componentWillMount",value:function(){this.props.initialize(this.props.initialValues)}},{key:"componentDidMount",value:function(){var e=this.props,t=e.content,a=e.getSuggestedTopics,n=e.title,r=e.body;t&&"predraft"===t.get("status")&&a(this.topicSelectize,this.changeTopicSuggestionValues,n,r)}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.content,a=e.contentId,n=e.unset;t&&"predraft"===t.get("status")&&n(a)}},{key:"render",value:function(){var e=this,t=this.props,a=t.contentId,n=t.content,r=t.canChangeAuthor,o=t.site,i=t.siteId,c=t.currentValues,l=t.change,s=t.form,u=t.suggestedTopics,d=t.updateTopics,m=t.isNativeVideoEnabled,p=t.handleFieldBlur,b=t.body,g=t.title,f=t.getSuggestedTopics,h=v()("large-centered","column","Content-column",{"large-8":!c.get("isMaximumWidth")});return C.a.createElement("form",null,C.a.createElement("div",{className:"is-disabledWhileSubmitting"},C.a.createElement("div",{className:"row"},C.a.createElement("div",{className:h},C.a.createElement("div",{className:"Content-columnInner--edit"},C.a.createElement("div",{className:"u-marg-b--medium"},C.a.createElement(N.Field,{isPageTitle:!0,isLarge:!0,isMinimal:!0,component:x.a,name:"title",placeholder:Object(B.a)("content.edit.title_placeholder",{type:Object(B.a)("common.album")}),canHaveLineBreaks:!1,validate:[z.E],maxLength:255,onBlur:p(b,g,this.topicSelectize,f)})),C.a.createElement("div",{className:"medium-6"},r?C.a.createElement(M.a,{siteId:o&&(o.get("isPrivate")||"unlisted"===o.get("access"))?i:null,size:"medium",content:n,showSite:!1,showTimezone:!0,hideFollow:!0}):C.a.createElement("div",{className:"u-marg-t--small"},C.a.createElement(F.a,{content:this.props.content,showDate:!1,hideFollow:!0})))))),C.a.createElement(S.a,{albumId:n.get("id")||"_new",isAddingToOpenAlbum:!1,total:n.get("mediaCount")||0,onLoad:function(e){var t=e.find((function(e){return e.getIn(["result","isCover"])}));l("listOfAlbumMedia",e.map((function(e){return new O.a.Map({id:e.getIn(["result","id"]),description:e.getIn(["result","description"])})}))),t&&l("coverImageMediaId",t.getIn(["result","id"]))}},(function(){return C.a.createElement(N.Field,{component:T.a,name:"listOfAlbumMedia",formName:s,total:n.get("mediaCount")||0,contentId:n.get("id")||"_new",coverImageMediaId:c.get("coverImageMediaId"),onSetCover:function(e){return l("coverImageMediaId",e)},canSetCover:!0,maxFields:500,baseUrl:e.props.baseUrl,getFormValues:e.props.getFormValues,siteId:e.props.siteId,content:e.props.content,isNativeVideoEnabled:m})})),C.a.createElement("div",{className:"u-marg-t--xlarge"},C.a.createElement("div",{className:"row"},C.a.createElement("div",{className:h},C.a.createElement("div",{className:"Content-columnInner--edit"},C.a.createElement("div",{className:"Content"},C.a.createElement("div",{className:"u-marg-b--large"},C.a.createElement(N.Field,{isMinimal:!0,component:P.a,name:"body",placeholder:Object(B.a)("content.add_content"),mediaManagerSiteId:i,onImageInsert:this.props.onImageInsert,onImageRemove:this.props.onImageRemove,onVideoInsert:this.props.onVideoInsert,onVideoRemove:this.props.onVideoRemove,fileUploadWaitForKey:"content-upload-".concat(this.props.contentId),onBlur:p(b,g,this.topicSelectize,f),enableNativeVideoUpload:m}))),C.a.createElement("aside",{className:"u-marg-b--large u-hidePrint"},C.a.createElement(N.Field,{formName:s,component:L.a,name:"listOfFiles",contentId:a,siteId:i,isNativeVideoEnabled:m,customAddLabel:m?Object(B.a)("dropzone.drop_type_media_and_file_or_plural"):Object(B.a)("dropzone.drop_type_images_and_files_or"),canUploadAllFileTypes:o.get("canUploadAllFileTypes",!1)})),C.a.createElement("aside",{className:"u-marg-b--large"},C.a.createElement(N.Field,{component:D.a,name:"listOfTopics",label:Object(B.a)("content.edit.topics_label"),placeholder:Object(B.a)("content.edit.topics_placeholder"),isMinimal:!0,canCreate:!0,hasLabelAbove:!0,selectorRef:function(t){e.topicSelectize=t}}),u?C.a.createElement(R.a,{topics:u,updateTopics:d,topicSelectize:this.topicSelectize}):null),C.a.createElement(A.a,{key:"options",hasOpenAlbumOptions:!0,isPublicSite:this.props.site.get("isPublic"),showFeedOptions:this.props.showFeedOptions,getFormValue:this.props.getFormValue,hasContentWidthOption:!0,isEdit:this.props.isEdit&&this.props.content&&"predraft"!==this.props.content.get("status"),onPublishFromChange:this.props.onPublishFromChange,onPublishImmediatelyChange:this.props.onPublishImmediatelyChange,onPublishPresetChange:this.props.onPublishPresetChange})))))),C.a.createElement(w.a,{key:"contentBar",removeRenewLock:this.props.removeRenewLock,canManage:this.props.canManage,content:this.props.content,onSave:this.props.getSubmitHandler("save"),onSaveDraft:this.props.getSubmitHandler("saveDraft"),onApprove:this.props.getSubmitHandler("saveAndApprove"),disabled:this.props.submitting,publishingStatus:this.props.getFormValue("publishingStatus")}))}}]),a}(C.a.Component);f()(H,"propTypes",{content:j.a.instanceOf(O.a.Map).isRequired,baseUrl:j.a.string,onPublishFromChange:j.a.func.isRequired,onPublishPresetChange:j.a.func.isRequired,handleFieldBlur:j.a.func.isRequired});t.a=Object(I.connect)((function(e,t){var a=!t.content.get("id")?new O.a.List:V(e,t.content.get("id")).map((function(e){return new O.a.Map({id:e.get("id"),description:e.get("description")})})),n=t.getFormValue("title"),r=t.getFormValue("body"),o=t.sharedInitialValues.merge({isMaximumWidth:t.content.get("isMaximumWidth"),isOpenToSubmissions:t.content.get("isOpenToSubmissions"),listOfAlbumMedia:a,coverImageMediaId:t.content.get("coverImageMediaId")||null});return{currentValues:t.getFormValues()||o,initialValues:o,title:n||null,body:r}}),{unset:k.V})(Object(U.a)(H))},3984:function(e,t,a){"use strict";var n=a(10),r=a.n(n),o=a(11),i=a.n(o),c=a(7),l=a.n(c),s=a(12),u=a.n(s),d=a(13),m=a.n(d),p=a(8),b=a.n(p),g=a(5),f=a.n(g),h=a(4),v=a.n(h),y=a(22),O=a.n(y),E=a(1),j=a.n(E),_=a(0),C=a.n(_),I=a(18),N=a(37),k=a(2777),S=a(3050),w=a(2778),A=a(2666),F=a(2779),M=a(2924),R=a(2780),T=a(2791),x=a(225),L=a(853),P=a(245),D=a(2781),U=a(16),V=a.n(U),B=a(1019),z=a(380);function q(e){return C.a.createElement(z.a,V()({},e,{inputType:"number"}),C.a.createElement(B.a,V()({inputType:"number"},e)))}q.propTypes={};var H=q,W=a(1016),G=a(656),K=a(755),J=a(422),Q=a(117),Z=a(2689),X=a(66),$=a(2783),Y=a(30),ee=a(32),te=a(170),ae=a(3),ne=a(47);function re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=b()(e);if(t){var r=b()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return m()(this,a)}}var oe=function(e){u()(a,e);var t=re(a);function a(){var e;r()(this,a);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),f()(l()(e),"topicSelectize",null),e}return i()(a,[{key:"UNSAFE_componentWillMount",value:function(){this.props.initialize(this.props.initialValues)}},{key:"render",value:function(){var e=this,t=this.props,a=t.contentId,n=t.currentValues,r=t.canChangeAuthor,o=t.site,i=t.siteId,c=t.form,l=t.suggestedTopics,s=t.updateTopics,u=t.isNativeVideoEnabled,d=t.handleFieldBlur,m=t.body,p=t.title,b=t.getSuggestedTopics;return void 0===n.get("isAllDay")?null:C.a.createElement("form",null,C.a.createElement("div",{className:"is-disabledWhileSubmitting"},C.a.createElement("div",{className:"row u-marg-b--medium"},C.a.createElement("div",{className:"large-8 large-centered column Content-column"},C.a.createElement("div",{className:"Content-columnInner--edit"},C.a.createElement("div",{className:"u-marg-b--medium"},C.a.createElement(N.Field,{isPageTitle:!0,isLarge:!0,isMinimal:!0,component:P.a,name:"title",placeholder:Object(ae.a)("content.edit.title_placeholder",{type:Object(ae.a)("common.event")}),canHaveLineBreaks:!1,validate:[ne.E],maxLength:255,onBlur:d(m,p,this.topicSelectize,b)})),C.a.createElement("div",{className:"row"},C.a.createElement("div",{className:"column medium-6"},r?C.a.createElement(F.a,{siteId:o&&(o.get("isPrivate")||"unlisted"===o.get("access"))?i:null,size:"medium",content:this.props.content,showTimezone:!0,hideFollow:!0}):C.a.createElement(A.a,{content:this.props.content,showDate:!1,hideFollow:!0})))))),C.a.createElement(S.a,{contentId:a,change:this.props.change,siteId:i,getFormValue:this.props.getFormValue}),C.a.createElement("div",{className:"row u-marg-b--medium"},C.a.createElement("div",{className:"large-8 large-centered column Content-column"},C.a.createElement("h2",{className:"type--h5 type--title u-marg-b--medium"},Object(ae.a)("content.section_title.details")),C.a.createElement("div",{className:"u-marg-b--small"},C.a.createElement(N.Field,{component:x.a,name:"isAllDay",label:Object(ae.a)("content.checkbox.all_day")})),C.a.createElement("div",{className:"u-grid"},C.a.createElement("div",{className:"u-grid-item small-6 u-posRelative u-zIndex--3"},C.a.createElement("div",{className:"u-marg-b--small"},C.a.createElement(N.Field,{component:L.a,name:"startsAt",label:Object(ae.a)("content.field_label.start_date_time"),isRequired:!0,validate:[ne.E],hasTime:!n.get("isAllDay"),onChange:function(t,a){if(a&&n.get("endsAt")){var r=O()(a);O()(n.get("endsAt")).isBefore(r)&&e.props.change("endsAt",a)}},timezone:n.get("timezoneIso"),dateFormat:X.b}))),C.a.createElement("div",{className:"u-grid-item small-6 u-posRelative u-zIndex--3"},C.a.createElement("div",{className:"u-marg-b--small"},C.a.createElement(N.Field,{component:L.a,hasLegacyIcon:!1,name:"endsAt",label:Object(ae.a)("content.field_label.end_date_time"),isRequired:!0,validate:[ne.E,Object(ne.e)("startsAt",Object(ae.a)("content.field_label.start_date_time"))],hasTime:!n.get("isAllDay"),hasEndOfDayTimeOption:!0,dateFormat:X.b,timezone:n.get("timezoneIso")}))),C.a.createElement("div",{className:"u-grid-item small-6"},C.a.createElement("div",{className:"u-marg-b--small"},C.a.createElement(N.Field,{component:J.a,name:"timezoneIso",label:Object(ae.a)("profile_fields.timezone"),validate:ne.E,options:Object(te.d)(document.documentElement.lang)}))),C.a.createElement("div",{className:"u-grid-item small-12 u-posRelative u-zIndex--0"},C.a.createElement(N.Field,{component:Q.a,icon:"location",name:"location",label:Object(ae.a)("content.field_label.location"),isRequired:!0,hasLegacyIcon:!1,validate:[ne.E]}))),C.a.createElement("aside",{className:"u-marg--medium"},C.a.createElement(M.a,{label:Object(ae.a)("content.add_directions_and_map"),fontStyle:"b2",isInitiallyActive:!!n.get("hasDirections")},C.a.createElement("h2",{className:"type--h5 type--title u-marg-b--medium u-marg-t--xlarge"},Object(ae.a)("content.section_title.directions_and_map")),C.a.createElement("div",{className:"u-marg-b--mediumlarge"},C.a.createElement(N.FieldArray,{label:Object(ae.a)("content.field_label.directions"),note:"Optional",name:"directions",getPlaceholder:function(e){return Object(ae.a)("content.field_label.directions_step.placeholder",{number:e})},component:T.a,addLabel:Object(ae.a)("content.field_label.directions_step.add_another"),showDeleteButton:!0,minFields:1,isCompact:!0,ariaLabel:Object(ae.a)("button_label.delete_directions")})),C.a.createElement(N.Field,{icon:"links",hasLegacyIcon:!1,hasLabelAbove:!0,hasNoInternalLabel:!0,component:Q.a,name:"mapUrl",label:Object(ae.a)("content.field_label.online_map_url.label"),note:Object(ae.a)("common.optional"),placeholder:Object(ae.a)("content.field_label.online_map_url.placeholder")}))),C.a.createElement("div",{className:"u-marg-b--xxlarge u-pad-b--xxlarge u-border-bottom"},C.a.createElement("h2",{className:"type--h5 type--title u-marg-b--medium u-marg-t--xxlarge"},Object(ae.a)("content.section_title.attendance")),C.a.createElement(N.Field,{component:G.a,name:"hasRsvp",options:[{icon:"close",label:Object(ae.a)("content.edit.rvsp.not_required"),value:"no"},{icon:"tick",label:Object(ae.a)("content.edit.rvsp.required"),value:"yes"}],isFullWidth:!1,hasBorders:!0,hasLargeIcons:!0,isRequired:!0}),"yes"===n.get("hasRsvp")&&C.a.createElement(C.a.Fragment,null,C.a.createElement("div",{className:"u-marg-b--mediumlarge u-marg-t--xlarge"},C.a.createElement(N.Field,{component:x.a,name:"rsvp.hasMaybeOption",label:Object(ae.a)("content.checkbox.allow_maybe")})),C.a.createElement("div",{className:"row"},C.a.createElement("div",{className:"column small-12 medium-6"},C.a.createElement("div",{className:"u-marg-b--mediumlarge"},C.a.createElement(N.Field,{component:H,name:"rsvp.capacityCount",label:Object(ae.a)("content.field_label.capacity"),validate:[ne.D,Object(ne.B)(999999,!0)],min:1,icon:"user",hasLegacyIcon:!1,hasLabelAbove:!0,hasNoInternalLabel:!0,note:Object(ae.a)("content.field_note.capacity")})))),C.a.createElement("div",{className:"u-marg-b--mediumlarge"},C.a.createElement(N.Field,{component:Q.a,name:"rsvp.noteLabel",label:Object(ae.a)("content.field_label.rvsp_note"),placeholder:Object(ae.a)("content.field_placeholder.rsvp_note"),maxLength:255,hasLabelAbove:!0,hasNoInternalLabel:!0,note:Object(ae.a)("content.field_note.rsvp_note")})),C.a.createElement("div",{className:"u-marg-b--small"},C.a.createElement(N.Field,{component:x.a,name:"rsvp.hasDueDate",label:Object(ae.a)("content.edit.rvsp.before_date")})),n.getIn(["rsvp","hasDueDate"])&&C.a.createElement("div",{className:"row"},C.a.createElement("div",{className:"column small-12 medium-8 u-posRelative u-zIndex--2"},C.a.createElement(N.Field,{component:L.a,name:"rsvp.dueAtDate",label:Object(ae.a)("content.edit.rvsp.before"),validate:[Object(ne.f)("endsAt",Object(ae.a)("content.field_label.end_date_time"),(function(e){return e.get("isAllDay")?"day":"minute"}))]}))))),C.a.createElement("div",{className:"u-marg-b--xlarge"},C.a.createElement("div",{className:"Content"},C.a.createElement("div",{className:"u-posRelative u-zIndex--1"},C.a.createElement(N.Field,{isMinimal:!0,component:K.a,name:"body",placeholder:Object(ae.a)("content.add_content"),mediaManagerSiteId:i,validate:[ne.E],onImageInsert:this.props.onImageInsert,onImageRemove:this.props.onImageRemove,onVideoInsert:this.props.onVideoInsert,onVideoRemove:this.props.onVideoRemove,fileUploadWaitForKey:"content-upload-".concat(this.props.contentId),onBlur:d(m,p,this.topicSelectize,b),enableNativeVideoUpload:u})))),C.a.createElement("aside",{className:"u-marg-b--small u-hidePrint"},C.a.createElement(N.Field,{formName:c,component:D.a,name:"listOfFiles",contentId:a,siteId:i,isNativeVideoEnabled:u,customAddLabel:u?Object(ae.a)("dropzone.drop_type_media_and_file_or_plural"):Object(ae.a)("dropzone.drop_type_images_and_files_or"),canUploadAllFileTypes:o.get("canUploadAllFileTypes",!1)})),C.a.createElement(M.a,{label:Object(ae.a)("content.field_label.add_organizers"),fontStyle:"b2",isInitiallyActive:!!this.props.content.get("organizers")},C.a.createElement("div",{className:"u-marg--xlarge"},C.a.createElement(N.Field,{component:W.a,people:this.props.content.get("organizers"),name:"organizers",label:Object(ae.a)("content.field_label.add_organizers"),placeholder:Object(ae.a)("field.people_selector.placeholder"),defaultParams:{siteId:i},isMulti:!0,isValueModel:!0,hasLabelAbove:!0}))),C.a.createElement("aside",{className:"u-marg--xlarge"},C.a.createElement(N.Field,{component:Z.a,name:"listOfTopics",label:Object(ae.a)("content.edit.topics_label"),placeholder:Object(ae.a)("content.edit.topics_placeholder"),isMinimal:!0,canCreate:!0,hasLabelAbove:!0,selectorRef:function(t){e.topicSelectize=t}}),l?C.a.createElement(R.a,{topics:l,updateTopics:s,topicSelectize:this.topicSelectize}):null),C.a.createElement(w.a,{key:"options",showFeedOptions:this.props.showFeedOptions,getFormValue:this.props.getFormValue,isEdit:this.props.isEdit,onPublishFromChange:this.props.onPublishFromChange,onPublishImmediatelyChange:this.props.onPublishImmediatelyChange,onPublishPresetChange:this.props.onPublishPresetChange})))),C.a.createElement(k.a,{key:"contentBar",removeRenewLock:this.props.removeRenewLock,canManage:this.props.canManage,content:this.props.content,onSave:this.props.getSubmitHandler("save"),onSaveDraft:this.props.getSubmitHandler("saveDraft"),onApprove:this.props.getSubmitHandler("saveAndApprove"),disabled:this.props.submitting,publishingStatus:this.props.getFormValue("publishingStatus")}))}}]),a}(C.a.Component);f()(oe,"propTypes",{content:j.a.instanceOf(v.a.Map).isRequired,onPublishFromChange:j.a.func.isRequired,onPublishPresetChange:j.a.func.isRequired,handleFieldBlur:j.a.func.isRequired});t.a=Object(I.connect)((function(e,t){var a=t.content,n=Object(Y.getCurrentUser)(e).get("timezoneIso"),r="_new"===a.get("id"),o=a.get("directions",new v.a.List).size>0?a.get("directions"):new v.a.List(["",""]),i=Object(ee.j)().hours(9).startOf("hour"),c=i.clone().add(1,"hour"),l=(a.get("rsvp")||new v.a.Map).set("hasDueDate",!!a.getIn(["rsvp","dueAtDate"])),s=t.getFormValue("title"),u=t.getFormValue("body"),d=t.sharedInitialValues.merge({isAllDay:!!r||a.get("isAllDay"),startsAt:r?i.format():Object(te.c)(a.get("startsAt"),a.get("timezoneIso")),endsAt:r?c.format():Object(te.c)(a.get("endsAt"),a.get("timezoneIso")),hasRsvp:null!==a.get("rsvp",null)?"yes":"no",hasMapUrl:a.get("mapUrl"),timezoneIso:r?n:a.get("timezoneIso"),rsvp:l,location:a.get("location"),mapUrl:a.get("mapUrl"),organizers:a.get("organizers"),hasDirections:a.get("directions")&&a.get("directions").size>0,directions:o});return{currentValues:t.getFormValues()||d,initialValues:d,title:s||null,body:u}}))(Object($.a)(oe))}}]);