(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{2600:function(e,t,n){"use strict";var a=n(1),r=n.n(a),o=n(0),c=n.n(o),i=n(18),s=n(21);function l(e){var t=e.message;return c.a.createElement("div",{className:"ErrorPage ErrorPage--fixed"},c.a.createElement("div",{className:"ErrorPage-inner"},c.a.createElement("div",{className:"ErrorPage-iconContainer u-marg-b--medium"},c.a.createElement(s.a,{isLegacy:!0,name:"alert"})),c.a.createElement("h4",{className:"type--h1"},t)))}l.propTypes={message:r.a.string.isRequired};var u=l,d=n(167),m=n(3);function p(e){var t=e.children;return"mobile"===e.viewport?c.a.createElement("div",{className:"u-sm-show"},c.a.createElement(u,{message:Object(m.a)("common.page_not_available_on_mobile")})):t||null}p.propTypes={children:r.a.oneOfType([r.a.arrayOf(r.a.element),r.a.element])};t.a=Object(i.connect)((function(e){return{viewport:Object(d.a)(e)}}))(p)},2669:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return l}));var a=n(4),r=n.n(a),o=n(19),c=function(e,t){return e.getIn(["pageCategories",t,"results"],new r.a.Map)},i=Object(o.a)([function(e,t){return e.getIn(["pageCategories",t],new r.a.Map)}],(function(e){return{loaded:e.get("loaded",!1),loading:e.get("loading",!1),result:e.get("results",new r.a.List)}})),s=Object(o.a)([c,function(e,t,n){return new r.a.List(n)}],(function(e,t){return t.map((function(t){return e.find((function(e){return e.id===t}))})).filter((function(e){return!!e}))})),l=Object(o.a)([c,function(e,t,n){return n}],(function(e,t){return e.find((function(e){return e.id===t}))}))},2916:function(e,t,n){"use strict";var a=n(1),r=n.n(a),o=n(0),c=n.n(o),i=n(18),s=n(166),l=n(52),u=n(667),d=n(3);function m(){return c.a.createElement(c.a.Fragment,null,c.a.createElement("p",null,Object(d.a)("modal.confirm.warning.delete_generic",{name:Object(d.a)("common.content_small")})),c.a.createElement("strong",{className:"type--500"},Object(d.a)("common.cannot_be_undone")))}m.propTypes={id:r.a.string.isRequired,removeId:r.a.func},t.a=Object(i.connect)(null,(function(e,t){var n=t.id,a=t.removeId;return{delete:function(){return e(Object(s.l)(n)).then((function(){a&&a(n)}))}}}))(Object(u.a)((function(e){return{name:l.u,id:e.id,title:Object(d.a)("modal.confirm.title.delete_generic",{name:Object(d.a)("common.content_small")}),buttonText:Object(d.a)("button_label.delete"),onConfirm:e.delete,classes:["Modal--mini"]}}))(m))},2917:function(e,t,n){"use strict";n(1);var a=n(0),r=n.n(a),o=n(18),c=n(55),i=n(52),s=n(113),l=n(243),u=n(3);function d(e){var t=e.close,n=e.username,a=e.contentType;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"Modal-content"},r.a.createElement("div",{className:"Content Content--small type--secondary"},r.a.createElement("p",{className:"u-marg-b--medium"},Object(u.a)("modal.info.lock_content.info1",{username:n,contentType:Object(u.a)("common.".concat(a)).toLowerCase()})),r.a.createElement("p",null,Object(u.a)("modal.info.lock_content.info2",{username:n,contentType:Object(u.a)("common.".concat(a)).toLowerCase()})))),r.a.createElement("div",{className:"Strip Strip--modal"},r.a.createElement(c.a,{size:"large",type:"submit",onClick:t,label:Object(u.a)("button_label.ok")})))}t.a=Object(o.connect)((function(e,t){return{username:Object(l.k)(e,t.id).get("name")}}))(Object(s.a)((function(e){return{name:i.lb,id:e.id,title:Object(u.a)("modal.info.title.lock_content",{contentType:Object(u.a)("common.".concat(e.contentType)).toLowerCase()}),classes:["Modal--mini"]}}))(r.a.memo(d)))},2918:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(55),c=n(52),i=n(113),s=n(3);t.a=Object(i.a)((function(e){return{name:c.Db,id:e.id,title:Object(s.a)("modal.info.title.protected_author"),classes:["Modal--mini"]}}))((function(e){var t=e.close,n=e.contentType;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"Modal-content"},r.a.createElement("div",{className:"Content Content--small type--secondary"},r.a.createElement("p",{className:"u-marg-b--medium"},Object(s.a)("modal.info.protected_author.info1",{contentType:Object(s.a)("common.".concat(n)).toLowerCase()})),r.a.createElement("p",null,Object(s.a)("modal.info.protected_author.info2")))),r.a.createElement("div",{className:"Strip Strip--modal"},r.a.createElement(o.a,{size:"large",type:"submit",onClick:t,label:Object(s.a)("button_label.ok")})))}))},2919:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return l}));var a=n(4),r=n.n(a),o=n(14),c=n(944),i=n(26);function s(e,t){return Array.isArray(t)||r.a.Iterable.isIterable(t)?{type:c.c,payload:{contentId:e,rateContent:t}}:function(e,t){return{type:c.b,payload:{contentId:e,result:t}}}(e,t)}function l(t,n,a){return function(r){return e.Simpplr.Loader.show(),r({type:c.d}),e.Simpplr.Salesforce.Content.rate(t,n,a).done((function(e){r({type:c.e,payload:e.result})})).fail((function(e){var t=Object(i.a)(e);return r(Object(o.f)(t)),r({type:c.a})})).always(e.Simpplr.Loader.hide)}}}).call(this,n(27))},3040:function(e,t,n){"use strict";var a=n(10),r=n.n(a),o=n(11),c=n.n(o),i=n(7),s=n.n(i),l=n(12),u=n.n(l),d=n(13),m=n.n(d),p=n(8),f=n.n(p),b=n(5),y=n.n(b),g=n(1),v=n.n(g),E=n(0),h=n.n(E),O=n(18),j=n(166),w=n(660),C=n(70),N=n(52),R=n(113),P=n(243),I=n(17),_=n(63),T=n(3),M=n(16),S=n.n(M),L=n(53),k=n(2030),A=n(173),V=n(15),D=n.n(V),q=n(302),U=n(383),x=n(40),F=n(176),H=n(42),B=n(1258);function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return m()(this,n)}}var J="Content detail - Engagement tile",K=function(e){u()(n,e);var t=z(n);function n(){var e;r()(this,n);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return e=t.call.apply(t,[this].concat(o)),y()(s()(e),"generateSum",(function(e,t){return t.value+e})),y()(s()(e),"renderInner",(function(t){var n=t.result,a=t.setFrom,r=t.setTo,o=t.setRange,c=t.from,i=t.to,s=t.loading,l=e.props.isFeedEnabled,u=n&&n.data&&Object.keys(n.data).sort(Object(F.g)()).filter(Object(F.f)(l)).map((function(t){return{name:Object(T.a)("content.analytics.engagement.stats.title.".concat(t)),value:Object(H.c)(n.data[t].reduce(e.generateSum,0))}})),d=D()({"is-loading":s,"ContentEngagement-stats":!0});return s&&!n?null:h.a.createElement("div",{className:"ContentEngagement"},h.a.createElement("div",{className:"ContentEngagement-datePicker--bordered"},h.a.createElement(q.a,{from:c,to:i,onFromChange:a,onToChange:r,setRange:o,initialValue:"last_36_months",additionalText:h.a.createElement("h2",{className:"type--500 type--b1 u-inline"},Object(T.a)("content.analytics.engagement.section.title")),onDropdownChange:function(e){return Object(x.e)(J,e)}})),h.a.createElement("div",{className:d},h.a.createElement(U.a,{items:u})))})),e}return c()(n,[{key:"render",value:function(){var e=this.props.contentId;return h.a.createElement(B.a,{contentId:e,range:1097},this.renderInner)}}]),n}(h.a.PureComponent);y()(K,"propTypes",{contentId:v.a.string.isRequired,isFeedEnabled:v.a.bool.isRequired});var W=n(408),X=n(198),G=n(129),Q=n(3414),Y=n(55),Z=n(1001),$=n(32);function ee(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return m()(this,n)}}var te=function(e){u()(n,e);var t=ee(n);function n(){var e;r()(this,n);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return e=t.call.apply(t,[this].concat(o)),y()(s()(e),"onUnpublish",(function(){e.props.onUnpublishClick(),e.props.closeModal()})),e}return c()(n,[{key:"render",value:function(){var e=this.props,t=e.isTodayInRange,n=e.uniqueViewCount,a=e.totalViewCount,r=e.recentViewCount,o=e.updateUrl,c=e.closeModal,i=e.dateInput,s=e.contentStatus,l=e.contentType,u=Object($.j)(),d=Object($.j)(i),m=u.diff(d,"days")>30&&r<4&&"published"===s;return h.a.createElement("div",{className:"ContentViews-header"},h.a.createElement("h1",{className:"ContentViews-heading"},Object(T.a)("common.x_views",{count:Object(H.c)(a)})),t?h.a.createElement("p",{className:"ContentViews-unique type--primary"},n>0&&h.a.createElement(h.a.Fragment,null,h.a.createElement("strong",null,Object(H.c)(n))," ",Object(T.a)("content.analytics.unique_views.percentage",{percentage:Math.round(n/a*100)}))):h.a.createElement("p",{className:"ContentViews-unique type--secondary"},Object(T.a)("content.analytics.unique_views.unavailable")),"unpublished"===s&&h.a.createElement("div",{className:"ContentViews-infoBox"},h.a.createElement(Z.a,{type:"warning",title:Object(T.a)("content.analytics.unpublished.title",{contentType:Object(T.a)("common.".concat(l))})})),m&&h.a.createElement("div",{className:"ContentViews-infoBox"},h.a.createElement(Z.a,{type:"warning"},h.a.createElement("h4",{className:"type--h6 type--title"},Object(T.a)("content.analytics.outdated_content.title",{contentType:Object(T.a)("common.".concat(l))})),h.a.createElement("div",{className:"ContentViews-infoBox-text"},Object(T.a)("content.analytics.outdated_content.subtitle")),h.a.createElement("div",{className:"ContentViews-buttons"},h.a.createElement(Y.a,{label:Object(T.a)("button_label.update"),linkTo:o,onClick:c}),h.a.createElement("span",{className:"ContentViews-infoBox-or"},Object(T.a)("common.or")),h.a.createElement(Y.a,{label:Object(T.a)("button_label.unpublish"),appearance:"danger",onClick:this.onUnpublish})))))}}]),n}(h.a.PureComponent);function ne(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return m()(this,n)}}y()(te,"propTypes",{isTodayInRange:v.a.bool,uniqueViewCount:v.a.number,totalViewCount:v.a.number,onUnpublishClick:v.a.func,updateUrl:v.a.string,closeModal:v.a.func,dateInput:v.a.string,contentType:v.a.string.isRequired,contentStatus:v.a.string}),y()(te,"defaultProps",{isTodayInRange:!0,uniqueViewCount:0,totalViewCount:0,onUnpublishClick:function(){},closeModal:function(){},updateUrl:""});var ae="Views tile",re=function(e){u()(n,e);var t=ne(n);function n(){var e;r()(this,n);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return e=t.call.apply(t,[this].concat(o)),y()(s()(e),"dataToView",(function(e,t){return{name:e.name,viewCount:e.viewCount,to:"/people?".concat(t,"=").concat(e.id||e.label||e.name)}})),e}return c()(n,[{key:"render",value:function(){var e=this.props,t=e.contentId,n=e.firstPublishedAt,a=e.createdAt,r=e.recentViewCount,o=e.onUnpublishClick,c=e.updateUrl,i=e.closeModal,s=e.contentStatus,l=e.brandColor,u=e.contentType,d=e.canManageSite,m=n||a;return h.a.createElement("div",{className:"ContentViews"},h.a.createElement(Q.a,{contentId:t,createdAt:n||a,range:90},(function(e){var t=e.result,n=e.setFrom,a=e.setTo,p=e.setRange,f=e.from,b=e.to,y=e.loading,g=e.isTodayInRange,v=D()({"is-loading":y,"ContentViews-body":!0}),E=D()({"ContentViews-datePicker":!0,"ContentViews-datePicker--bordered":d}),O=h.a.createElement("h2",{className:"type--500 type--b1 u-inline"},Object(T.a)("common.views"));return h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{className:E},h.a.createElement(q.a,{from:f,to:b,onFromChange:n,onToChange:a,setRange:p,additionalText:O,onDropdownChange:function(e){return Object(x.e)(ae,e)}})),y&&!t&&h.a.createElement("div",{className:"u-posRelative u-pad--large"},h.a.createElement(G.a,null)),t&&h.a.createElement("div",{className:v},h.a.createElement(te,{recentViewCount:r,totalViewCount:t.data.totalViewCount,uniqueViewCount:t.data.uniqueViewCount,isTodayInRange:g,onUnpublishClick:o,updateUrl:c,closeModal:i,dateInput:m,contentStatus:s,contentType:u}),h.a.createElement("div",{className:"ContentViews-chart"},h.a.createElement(W.a,{data:Object(F.a)([{legend:Object(T.a)("site.analytics.tile_title.views"),data:t.data.viewsOverTime}],l,{colorProperty:"borderColor"})}),h.a.createElement("div",{className:"ContentViews-footer"},h.a.createElement(X.a,{onClick:function(){Object(x.g)(ae)},url:t.csvUrl})))))})))}}]),n}(h.a.PureComponent);y()(re,"propTypes",{contentId:v.a.string.isRequired,brandColor:v.a.string.isRequired,contentType:v.a.string.isRequired,createdAt:v.a.string,firstPublishedAt:v.a.string,recentViewCount:v.a.number,updateUrl:v.a.string,contentStatus:v.a.string});var oe=n(1187),ce=n(568),ie=n(190),se=n(66),le=n(352);function ue(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return m()(this,n)}}var de=function(e){u()(n,e);var t=ue(n);function n(){return r()(this,n),t.apply(this,arguments)}return c()(n,[{key:"render",value:function(){var e=this.props,t=e.contentId,n=e.contentType,a=e.isFeedEnabled,r=e.createdAt,o=e.firstPublishedAt,c=e.recentViewCount,i=e.onUnpublishClick,s=e.updateUrl,l=e.closeModal,u=e.contentStatus,d=e.brandColor,m=e.canManageSite,p=e.siteName,f=e.siteId,b=e.lastMovedAt,y=Object($.j)(),g=Object($.j)(o);if(o&&y.diff(g,"hours")<24)return h.a.createElement("div",{className:"Modal-content Modal-content--forms"},h.a.createElement("div",{className:"u-pad-b--medium"},h.a.createElement(C.a,null,Object(T.a)("content.analytics.panel_no_data"))));var v=o||r,E=o?Object(T.a)("content.analytics.first_published"):Object(T.a)("content.analytics.created"),O=b?"content.analytics.to_site":"content.analytics.in_site",j=h.a.createElement(h.a.Fragment,null,h.a.createElement("div",null,h.a.createElement("span",{className:"type--500"},E)," ",h.a.createElement(ce.a,{createdAt:v})),b&&h.a.createElement("div",null,h.a.createElement("span",{className:"type--500"},Object(T.a)("common.moved"))," ",h.a.createElement("div",{className:"type--b3 u-inlineBlock"},Object($.j)(b).format(se.b))),m&&h.a.createElement("div",null,Object(T.a)(O,{span:h.a.createElement("span",{className:"type--500"}),siteName:p})," - ",h.a.createElement(L.a,{to:"/manage/sites/".concat(f,"/analytics?utm_medium=internal&utm_source=content_analytics")},Object(T.a)("content.analytics.view_site_analytics"))));return h.a.createElement(h.a.Fragment,null,h.a.createElement(ie.a,S()({},le.e,{category:"analytics_".concat(n)})),h.a.createElement("div",{className:"AnalyticsPanel"},h.a.createElement("div",{className:"u-marg-b--medium"},j),h.a.createElement(re,{contentId:t,createdAt:r,firstPublishedAt:o,recentViewCount:c,onUnpublishClick:i,closeModal:l,updateUrl:s,contentStatus:u,brandColor:d,contentType:n,canManageSite:m,siteId:f,siteName:p,lastMovedAt:b}),h.a.createElement("div",{className:"u-cf u-marg-b--small"},h.a.createElement(k.a,{contentId:t,contentType:n,range:90})),h.a.createElement("div",{className:"u-cf u-marg-b--small"},h.a.createElement(A.a,{title:Object(T.a)("content.analytics.top_views_tile.title"),provider:oe.a,lastColumnName:Object(T.a)("content.analytics.top_views_tile.column_name.total_views"),providerProps:{orderBy:"top",contentId:t,range:90},showThirdColumnFromDataKey:{name:Object(T.a)("content.analytics.top_views_tile.column_name.unique_views"),value:"uniqueViews"},handleDownloadButtonClick:function(){return Object(x.g)("Top views")},handleDateDropdownChange:Object(x.b)("Top views"),handleTabChange:Object(x.c)("Page Analytics - Top views")})),h.a.createElement(K,{contentId:t,isFeedEnabled:a})))}}]),n}(h.a.PureComponent);y()(de,"propTypes",{contentId:v.a.string.isRequired,contentType:v.a.string.isRequired,isFeedEnabled:v.a.bool.isRequired,brandColor:v.a.string.isRequired,createdAt:v.a.string,firstPublishedAt:v.a.string,recentViewCount:v.a.number,onUnpublishClick:v.a.func,updateUrl:v.a.string,closeModal:v.a.func,contentStatus:v.a.string,canManageSite:v.a.bool});var me=n(4),pe=n.n(me),fe=n(241),be=n(850),ye=n(1266),ge=n(114),ve=n(89);function Ee(e){var t=e.item,n=e.contentType,a=t.user,r=t.createdAt,o=t.action,c=t.reason,i=t.subjectUser,s=t.fromSite,l=t.toSite,u=h.a.createElement("span",{className:"post-date"},h.a.createElement(be.a,{input:r})),d="VALIDATION_EXPIRED"===o?h.a.createElement(ye.a,{name:"pages-knowledge"}):h.a.createElement(ge.a,{url:a.get("url"),name:a.get("name"),img:a.get("img")}),m=a&&h.a.createElement(L.a,{className:"type--title",to:Object(ve.l)(a.get("peopleId"))},a.get("name")),p=i&&h.a.createElement(L.a,{to:Object(ve.l)(i.get("peopleId"))},i.get("name")),f=s&&h.a.createElement(L.a,{to:Object(ve.q)(s.get("siteId"))},s.get("name")),b=l&&h.a.createElement(L.a,{to:Object(ve.q)(l.get("siteId"))},l.get("name")),y="content.moderation.action.".concat(o.toLowerCase()),g=Object(T.a)(y,{user:m,subjectUser:p,fromSite:f,toSite:b,contentType:Object(T.a)("common.".concat(n)).toLowerCase(),date:u});return h.a.createElement("div",{className:"Post Post--small"},h.a.createElement("div",{className:"Post-body"},h.a.createElement("div",{className:"Post-header"},h.a.createElement("div",{className:"Post-avatarContainer"},d),h.a.createElement("div",{className:"Post-headerInner"},h.a.createElement("div",null,g))),c&&h.a.createElement("div",{className:"Content Content--small"},h.a.createElement("p",null,c))))}Ee.propTypes={item:v.a.instanceOf(pe.a.Record).isRequired};var he=Ee;function Oe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return m()(this,n)}}var je=function(e){u()(n,e);var t=Oe(n);function n(){return r()(this,n),t.apply(this,arguments)}return c()(n,[{key:"shouldComponentUpdate",value:function(e){return!pe.a.is(this.props.history,e.history)||this.props.isLoading!==e.isLoading||this.props.canPaginate!==e.canPaginate||this.props.onLoadMore!==e.onLoadMore}},{key:"render",value:function(){var e=this.props,t=e.history,n=e.isLoading,a=e.contentType;return 0===t.size?n?h.a.createElement("div",{className:"u-posRelative u-pad--large"},h.a.createElement(G.a,null)):h.a.createElement(C.a,null):h.a.createElement("div",null,h.a.createElement("div",null,t.map((function(e){return h.a.createElement(he,{item:e,contentType:a,key:e.get("moderationHistoryId")})})).toArray()),h.a.createElement(fe.a,{canLoad:this.props.canPaginate,onLoad:this.props.onLoadMore,isLoading:this.props.isLoading,window:this.props.window}))}}]),n}(h.a.Component);je.propTypes={history:v.a.instanceOf(pe.a.List),isLoading:v.a.bool,canPaginate:v.a.bool,onLoadMore:v.a.func,window:v.a.oneOfType([v.a.element,v.a.object])};var we=je,Ce=n(3415);function Ne(e){var t=e.contentId,n=e.contentType,a=Object(Ce.a)(t),r=a.history,o=a.canPaginate,c=a.loadMore,i=a.loading;return h.a.createElement("div",{className:"Modal-content Modal-content--forms"},h.a.createElement("div",{className:"u-pad-b--medium"},h.a.createElement(we,{history:r,isLoading:i,canPaginate:o,onLoadMore:c,contentType:n})))}Ne.propTypes={contentId:v.a.string,contentType:v.a.string};var Re=Ne,Pe=n(22),Ie=n.n(Pe),_e=n(479);function Te(e){var t=e.onSelect,n=e.selected,a=e.options,r=D()({FilterOptions:!0});return h.a.createElement("div",{className:r},a.map((function(e){var a=e.value,r=e.label;return h.a.createElement("button",{key:a,type:"button",className:D()({"FilterOptions-option":!0,"is-active":a===n}),onClick:function(){return t(a)}},r)})))}Te.propTypes={onSelect:v.a.func.isRequired,selected:v.a.string,options:v.a.arrayOf(v.a.shape({value:v.a.string,label:v.a.node.isRequired})).isRequired};var Me=Te,Se=n(1008),Le=n(125),ke=n(1014);function Ae(e){return h.a.createElement(ke.a,e,e.hasRead?h.a.createElement(Le.a,{icon:"tick",color:"brand",label:Object(T.a)("must_read.read"),hasCurrentColorIcon:!0,iconSourceSize:"20",verticalAlign:"middle"}):h.a.createElement("span",{className:"State State--noBg"},h.a.createElement("span",{className:"State-text"},Object(T.a)(e.hasRead?"must_read.read":"must_read.unread"))))}Ae.propTypes={isCompact:v.a.bool,hasRead:v.a.bool},Ae.defaultProps={isCompact:!1,hasRead:!1};var Ve=Ae,De=n(67),qe=n(1009),Ue=n(73);function xe(e){var t=e.contentId,n=e.isMustRead,a=e.contentMustReadDetails,r=e.onSendMustReadReminderMail,o=e.isSimpplrEmailEnabled,c=Object(qe.a)({initialParams:new pe.a.Map({filter:"unread",contentId:t,includeTotal:!0})}),i=c.users,s=c.loading,l=c.canPaginate,u=c.loadMore,d=c.params,m=c.setParams,p=c.csvUrl,f=c.totalRecords,b=Object(E.useCallback)((function(e){m({term:e.get("term")})}),[m]),y=Object(E.useCallback)((function(e){m({filter:e})}),[m]),g=s&&0===i.size&&h.a.createElement("div",{className:"u-posRelative u-pad--large"},h.a.createElement(G.a,null)),v={},O=Object($.j)(),j=Object($.j)(a.get("createdAt")),w=a.get("removedAt")&&Object($.j)(a.get("removedAt")),C=(null==w?void 0:w.isBefore(O))&&(null==j?void 0:j.isBefore(w));if(C){var N=Math.ceil(Ie.a.duration(w.diff(j)).asDays());v={mustReadFrom:j.format(se.c),mustReadTo:w.format(se.c),mustReadDays:N,mustReadUsers:Object(H.c)(a.get("readCount"))}}var R=Object($.j)().startOf("week").add(8,"days").format(se.c),P=d.get("filter"),I=h.a.createElement(Me,{selected:P,onSelect:y,options:[{label:Object(T.a)("must_read.unread"),value:"unread"},{label:Object(T.a)("must_read.read"),value:"read"}]}),_=h.a.createElement(Se.a,{itemComponent:Ve,users:i,isLoading:s,canPaginate:l,onLoadMore:u,csvUrl:p,showPopovers:!1});return h.a.createElement("div",{className:"u-pad-b--medium"},h.a.createElement("div",{className:"row"},h.a.createElement("div",{className:"medium-4 column"},h.a.createElement("div",{className:"u-marg-t--medium"},h.a.createElement("div",{className:"filter"},h.a.createElement("div",{className:"filter-options"},h.a.createElement("div",{className:"filter-option-selection"},h.a.createElement("ul",null,I)))))),h.a.createElement("div",{className:"medium-8 column"},h.a.createElement("div",{className:"u-marg--medium u-floatRight"},h.a.createElement(_e.a,{className:"MustReadSearchForm",placeholder:Object(T.a)("field.search_selector.placeholder"),initialValue:d.get("term"),onSubmit:b,ariaLabel:Object(T.a)("field.search_selector.placeholder")})))),!s&&h.a.createElement("div",{className:"row"},C&&h.a.createElement("div",{className:"column","data-testid":"mustReadExpire"},h.a.createElement("div",{className:"u-marg-b--large"},h.a.createElement(Z.a,{type:"warning"},h.a.createElement("p",null,Object(T.a)("must_reads_history.warning.no_longer_must_read",v))))),h.a.createElement("div",{className:"column"},h.a.createElement("div",{className:"u-cf u-border-bottom u-pad-b--small-sketchSize u-marg-b--mediumlarge"},f>0&&h.a.createElement("span",{className:"type--500 u-capitalize"},Object(T.a)("people_index.total_people",{count:f,formattedCount:Object(H.c)(f)})),h.a.createElement("div",{className:"u-floatRight"},h.a.createElement("span",null,h.a.createElement(X.a,{onClick:function(){Object(Ue.b)(De.m,"")},url:p}))))),o&&n&&"unread"===P&&f>0&&h.a.createElement("div",{className:"column","data-testid":"sendNow"},h.a.createElement("div",{className:"u-pad-b--small u-marg-b--medium"},h.a.createElement(Z.a,{type:"warning"},h.a.createElement("p",null,Object(T.a)("must_reads_history.warning.toggle_unread_message",{reminderDate:R})),h.a.createElement(Y.a,{floatRight:!0,onClick:r(Object(H.c)(f))},Object(T.a)("must_reads_history.button_label.send_now",v)))))),h.a.createElement("div",{className:"index-newsletter-history"},h.a.createElement("div",{className:"row"},h.a.createElement("div",{className:"column"},g||_))))}xe.propTypes={contentId:v.a.string,isSimpplrEmailEnabled:v.a.bool};var Fe=xe;function He(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return m()(this,n)}}var Be=function(e){u()(n,e);var t=He(n);function n(){return r()(this,n),t.apply(this,arguments)}return c()(n,[{key:"shouldComponentUpdate",value:function(e){return!pe.a.is(this.props.ratings,e.ratings)||this.props.isLoading!==e.isLoading||this.props.canPaginate!==e.canPaginate||this.props.onLoadMore!==e.onLoadMore}},{key:"render",value:function(){var e=this.props,t=e.itemComponent,n=e.ratings,a=e.isLoading;return 0===n.size?a?h.a.createElement("div",{className:"u-posRelative u-pad--large"},h.a.createElement(G.a,null)):h.a.createElement(C.a,null):h.a.createElement(h.a.Fragment,null,n.map((function(e){return h.a.createElement(t,e.merge({key:e.get("id")}).toObject())})),h.a.createElement(fe.a,{canLoad:this.props.canPaginate,onLoad:this.props.onLoadMore,isLoading:this.props.isLoading,window:this.props.window}))}}]),n}(h.a.Component);Be.propTypes={itemComponent:v.a.func,ratings:v.a.instanceOf(pe.a.List),isLoading:v.a.bool,canPaginate:v.a.bool,onLoadMore:v.a.func,window:v.a.oneOfType([v.a.element,v.a.object])},Be.defaultProps={itemComponent:function(e){var t=e.user,n=e.notes;return h.a.createElement("div",{className:"Post Post--small"},h.a.createElement("div",{className:"Post-body"},h.a.createElement("div",{className:"Post-header"},h.a.createElement("div",{className:"Post-header-inner"},h.a.createElement("div",{className:"Post-avatarContainer"},h.a.createElement(ge.a,{url:t.url,name:t.name,img:t.img})),h.a.createElement("div",null,h.a.createElement("a",{className:"type--title",href:t.url},t.name),h.a.createElement("span",{className:"type--secondary"},"Â ",Object(T.a)("common.on_date",{date:h.a.createElement(be.a,{input:e.ratedAt})})),n&&h.a.createElement("div",{className:"u-marg-t--xsmall Content Content--small"},h.a.createElement("p",{className:"type--secondary"},n)))))))}};var ze=Be,Je=n(3417);function Ke(e){var t=e.contentId,n=Object(Je.a)(t),a=n.ratings,r=n.canPaginate,o=n.loadMore,c=n.loading;return h.a.createElement("div",{className:"Modal-content Modal-content--forms"},h.a.createElement("div",{className:"u-pad-b--medium"},h.a.createElement(ze,{ratings:a,isLoading:c,canPaginate:r,onLoadMore:o})))}Ke.propTypes={contentId:v.a.string};var We=Ke,Xe=n(21),Ge=n(217);function Qe(e){var t=e.item,n=e.contentType,a=e.siteId,r=e.contentId,o=t.toJS(),c=o.versionHistoryId,i=o.user,s=o.createdAt,l=(o.updatedAt,o.action),u=(o.isAuthor,o.isLatest),d=h.a.createElement("span",{className:"post-date"},h.a.createElement(be.a,{input:s})),m=h.a.createElement(ge.a,{url:i.url,name:i.name,img:i.img}),p=i&&h.a.createElement(L.a,{className:"type--title",to:Object(ve.l)(i.peopleId)},i.name),f="content.version_history.action.".concat(l.toLowerCase()),b=Object(T.a)(f,{user:p,type:Object(T.a)("common.".concat(n)).toLowerCase(),date:d});return h.a.createElement("div",{className:"Post Post--small"},h.a.createElement("div",{className:"Post-body"},h.a.createElement("div",{className:"Post-header u-displayFlex u-justifySpaceBetween u-alignItemsCenter"},h.a.createElement("div",{className:"Post-avatarContainer"},m),h.a.createElement("div",{className:"Post-headerInner"},h.a.createElement("div",null,b)),u?h.a.createElement("p",{className:"type--b3 type--secondary u-uppercase"},Object(T.a)("modal.file.version_history.current_version.text")):h.a.createElement(L.a,{to:"/site/".concat(a,"/").concat(n,"/").concat(r,"/history/").concat(c)},h.a.createElement("div",{className:"Post-iconContainer"},h.a.createElement(Ge.a,{position:"topRight",title:Object(T.a)("modal.file.version_history.version_tooltip")},h.a.createElement(Xe.a,{name:"view"})))))))}Qe.propTypes={item:v.a.instanceOf(pe.a.Record).isRequired};var Ye=Qe;function Ze(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return m()(this,n)}}var $e=function(e){u()(n,e);var t=Ze(n);function n(){return r()(this,n),t.apply(this,arguments)}return c()(n,[{key:"shouldComponentUpdate",value:function(e){return!pe.a.is(this.props.history,e.history)||this.props.isLoading!==e.isLoading||this.props.canPaginate!==e.canPaginate||this.props.onLoadMore!==e.onLoadMore}},{key:"render",value:function(){var e=this.props,t=e.history,n=e.isLoading,a=e.contentType,r=e.siteId,o=e.contentId;return 0===t.size?n?h.a.createElement("div",{className:"u-posRelative u-pad--large"},h.a.createElement(G.a,null)):h.a.createElement(C.a,null):h.a.createElement("div",null,h.a.createElement("div",null,t.map((function(e){return h.a.createElement(Ye,{item:e,contentType:a,siteId:r,contentId:o,key:e.get("versionHistoryId")})})).toArray()),h.a.createElement(fe.a,{canLoad:this.props.canPaginate,onLoad:this.props.onLoadMore,isLoading:this.props.isLoading,window:this.props.window}))}}]),n}(h.a.Component);y()($e,"propTypes",{history:v.a.instanceOf(pe.a.List),isLoading:v.a.bool,canPaginate:v.a.bool,onLoadMore:v.a.func,window:v.a.oneOfType([v.a.element,v.a.object])});var et=$e,tt=n(3418);function nt(e){var t=e.contentId,n=e.contentType,a=e.siteId,r=Object(tt.a)(t),o=r.history,c=r.canPaginate,i=r.loadMore,s=r.loading;return h.a.createElement("div",{className:"Modal-content Modal-content--forms"},h.a.createElement("div",{className:"u-pad-b--medium"},h.a.createElement(et,{history:o,isLoading:s,canPaginate:c,onLoadMore:i,contentType:n,siteId:a,contentId:t})))}nt.propTypes={contentId:v.a.string,contentType:v.a.string,siteId:v.a.string};var at=nt;function rt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return m()(this,n)}}var ot=function(e){u()(n,e);var t=rt(n);function n(){var e;r()(this,n);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return e=t.call.apply(t,[this].concat(o)),y()(s()(e),"renderInner",(function(){var t=e.props,n=t.tab,a=t.contentId,r=t.contentMustReadDetails,o=(t.hasVersionHistoryOption,t.isMustRead),c=t.createdAt,i=t.firstPublishedAt,s=t.recentViewCount,l=t.updateUrl,u=t.contentStatus,d=t.brandColor,m=t.contentType,p=t.canManageSite,f=t.siteId,b=t.siteName,y=t.isFeedEnabled,g=t.lastMovedAt,v=t.isSimpplrEmailEnabled;switch(n){case"moderationHistory":return h.a.createElement(Re,{contentId:a,contentType:m});case"usefulContentHistory":return h.a.createElement(We,{contentId:a});case"mustReadHistory":return h.a.createElement(Fe,{contentId:a,isMustRead:o,contentMustReadDetails:r,onSendMustReadReminderMail:e.props.sendMustReadReminderMail,isSimpplrEmailEnabled:v});case"versionHistory":return h.a.createElement(at,{contentId:a,contentType:m,siteId:f});default:return h.a.createElement(de,{contentId:a,contentType:m,createdAt:c,firstPublishedAt:i,recentViewCount:s,onUnpublishClick:e.props.unpublish,updateUrl:l,closeModal:e.props.close,contentStatus:u,brandColor:d,canManageSite:p,siteId:f,siteName:b,isFeedEnabled:y,lastMovedAt:g})}})),y()(s()(e),"renderError",(function(){return h.a.createElement("div",{className:"Modal-content"},h.a.createElement(C.a,{message:Object(T.a)("common.error_message"),hasNoBorder:!0}))})),e}return c()(n,[{key:"render",value:function(){return h.a.createElement(w.a,{renderOnError:this.renderError},this.renderInner())}}]),n}(h.a.PureComponent);y()(ot,"propTypes",{tab:v.a.string,contentId:v.a.string.isRequired,siteId:v.a.string.isRequired,siteName:v.a.string,brandColor:v.a.string.isRequired,createdAt:v.a.string,firstPublishedAt:v.a.string,recentViewCount:v.a.number,updateUrl:v.a.string,contentStatus:v.a.string,contentTitle:v.a.string,canManageSite:v.a.bool,isFeedEnabled:v.a.bool,isSimpplrEmailEnabled:v.a.bool}),y()(ot,"defaultProps",{contentStatus:"published",canManageSite:!1});t.a=Object(O.connect)((function(e,t){var n=t.siteId&&Object(_.l)(e,t.siteId),a=Object(P.m)(e,t.contentId);return{isFeedEnabled:Object(I.L)(e),isContentAnalyticsEnabled:Object(I.C)(e,"externalAnalytics"),brandColor:Object(I.v)(e,"brandingPrimaryColor"),contentType:t.contentType||a.get("type"),isMustRead:a.get("isMustRead"),canManageSite:n&&Object(_.c)(e,n),siteName:n&&n.get("name")||null,isSimpplrEmailEnabled:Object(I.W)(e)}}),(function(e,t){return{unpublish:function(){return e(Object(j.U)(t.contentId))},sendMustReadReminderMail:function(n){return function(){return e(Object(j.K)(t.contentId,n))}}}}))(Object(R.a)((function(e){var t=[{id:"analytics",label:Object(T.a)("content.history_modal.tab_label.analytics",{contentType:Object(T.a)("common.".concat(e.contentType))}),isEnabled:e.isContentAnalyticsEnabled&&("published"===e.contentStatus||"unpublished"===e.contentStatus)},{id:"versionHistory",label:Object(T.a)("content.history_modal.tab_label.versionHistory"),isEnabled:e.hasVersionHistoryOption},{id:"moderationHistory",label:Object(T.a)("content.history_modal.tab_label.moderationHistory"),isEnabled:e.canViewModerationHistory},{id:"usefulContentHistory",label:Object(T.a)("content.history_modal.tab_label.usefulContentHistory"),isEnabled:e.canViewUsefulHistory},{id:"mustReadHistory",label:Object(T.a)("content.history_modal.tab_label.mustReadHistory"),isEnabled:e.canMakeMustRead&&e.contentMustReadDetails.size>0}].filter((function(e){return e.isEnabled}));return{name:N.z,classes:["Modal--small"],id:e.contentId,title:e.contentTitle,tabs:t}}))(ot))},3414:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return w}));var a=n(10),r=n.n(a),o=n(11),c=n.n(o),i=n(12),s=n.n(i),l=n(13),u=n.n(l),d=n(8),m=n.n(d),p=n(5),f=n.n(p),b=n(1),y=n.n(b),g=n(0),v=n.n(g),E=n(176),h=n(92);function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=m()(e);if(t){var r=m()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u()(this,n)}}var j=Object(E.i)("viewsOverTime"),w=function(t){s()(a,t);var n=O(a);function a(){return r()(this,a),n.apply(this,arguments)}return c()(a,[{key:"render",value:function(){var t=this.props,n=t.contentId,a=t.siteId,r=t.range,o=t.from,c=t.to,i=t.createdAt,s=t.children,l={};return void 0!==n?l.contentId=n:void 0!==a&&(l.siteId=a),v.a.createElement(h.a,{endpoint:e.Simpplr.Salesforce.Analytics.getContentViews,params:l,range:r,from:o,to:c,createdAt:i,formatResult:j},s)}}]),a}(v.a.Component);f()(w,"propTypes",{children:y.a.func.isRequired,contentId:y.a.string,siteId:y.a.string,range:y.a.number,from:y.a.string,to:y.a.string,createdAt:y.a.string})}).call(this,n(27))},3415:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return m}));var a=n(5),r=n.n(a),o=n(4),c=n.n(o),i=n(3416),s=n(243),l=n(478);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(l.a)(d({endpoint:e.Simpplr.Salesforce.Content.getModerationHistory,itemActionCreator:i.a,itemSelector:s.q,itemName:"history",keyName:"moderationHistoryId",initialParams:new c.a.Map({id:t})},n))}}).call(this,n(27))},3416:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(4),r=n.n(a),o=n(942);function c(e){return Array.isArray(e)||r.a.Iterable.isIterable(e)?{type:o.b,payload:{moderationHistory:e}}:function(e,t){return{type:o.a,payload:{result:t}}}()}},3417:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return f}));var a=n(5),r=n.n(a),o=n(4),c=n.n(o),i=n(2919),s=n(1159),l=n(243),u=n(275);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){var a=n.id,r=e.result.listOfItems;return r.length>0&&t(Object(i.b)(a,r)),r.map((function(e){return Object(s.b)(a,e)}))}function f(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(u.a)(m({endpoint:e.Simpplr.Salesforce.Content.getRatings,resultExtractor:p,itemSelector:l.l,itemName:"ratings",initialParams:new c.a.Map({id:t})},n))}}).call(this,n(27))},3418:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return m}));var a=n(5),r=n.n(a),o=n(4),c=n.n(o),i=n(3419),s=n(243),l=n(478);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(l.a)(d({endpoint:e.Simpplr.Salesforce.Content.getVersionHistory,itemActionCreator:i.a,itemSelector:s.t,itemName:"history",keyName:"versionHistoryId",initialParams:new c.a.Map({id:t})},n))}}).call(this,n(27))},3419:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(4),r=n.n(a),o=n(946);function c(e){return Array.isArray(e)||r.a.Iterable.isIterable(e)?{type:o.b,payload:{versionHistory:e}}:function(e,t){return{type:o.a,payload:{result:t}}}()}}}]);